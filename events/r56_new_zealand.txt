add_namespace = new_zealand

# Choosing a successor for Michael Joseph Savage
country_event = {
	id = new_zealand.1
	title = new_zealand.1.t
	desc = new_zealand.1.d
	picture = GFX_report_event_generic_parliament

	fire_only_once = yes

	trigger = {
		date > 1939.03.27
		date < 1939.04.27
		tag = NZL
		has_country_flag = NZL_labour_flag
	}

	option = {
		name = new_zealand.1.a
		set_country_flag = NZL_peter_fraser_flag
	}
	
	option = {
		name = new_zealand.1.b
		set_country_flag = NZL_gervan_macmillan_flag
	}
}

# Death of Michael Joseph Savage
country_event = {
	id = new_zealand.2
	title = new_zealand.2.t
	desc = new_zealand.2.d
	picture = GFX_report_event_europe_funeral

	fire_only_once = yes

	trigger = {
		date > 1940.03.27
		date < 1940.04.27
		tag = NZL
		has_country_flag = NZL_labour_flag
	}

	option = {
		name = new_zealand.2.a
		set_country_flag = NZL_savage_dead
		if = {
			limit = {
				has_country_flag = NZL_peter_fraser_flag
			}
			create_country_leader = {
				name = "Peter Fraser"
				picture = "gfx/leaders/NZL/r56_portrait_NZL_Peter_Fraser.dds"
				expire = "1965.1.1"
				ideology = socialism
			}
		}
		if = {
			limit = {
				has_country_flag = NZL_gervan_macmillan_flag
			}
			create_country_leader = {
				name = "Gervan McMillan"
				picture = "gfx/leaders/NZL/r56_portrait_NZL_Gervan_McMillan.dds"
				expire = "1965.1.1"
				ideology = socialism
			}
		}
	}
}

# 1938 General Election
country_event = {
	id = new_zealand.3
	title = new_zealand.3.t
	desc = new_zealand.3.d
	picture = GFX_report_event_generic_parliament

	fire_only_once = yes

	trigger = {
		date > 1938.10.15
		date < 1938.11.15
		tag = NZL
		has_government = democratic
	}

	option = {
		name = new_zealand.3.a
		set_country_flag = NZL_labour_flag
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = new_zealand.3.b
		set_country_flag = NZL_national_flag
		set_party_name = {
			ideology = democratic
			long_name = NZL_democratic_national_long
			name = NZL_democartic_Nzational
		}
		create_country_leader = {
				name = "Adam Hamilton"
				picture = "gfx/leaders/NZL/r56_portrait_NZL_Adam_Hamilton.dds"
				expire = "1965.1.1"
				ideology = conservatism
		}
	}

	option = {
		name = new_zealand.3.c
		trigger = {
			communism > 0.30
		}

		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		
		ENG = { set_autonomy = { target = NZL autonomy_state = autonomy_free } }	
		
		NZL = {
			add_to_war = { targeted_alliance = ENG enemy = PREV hostility_reason = asked_to_join }
			leave_faction = yes
		}
	}

	option = {
		name = new_zealand.3.e
		trigger = {
			fascism > 0.30
		}

		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}

		ENG = { set_autonomy = { target = NZL autonomy_state = autonomy_free } }	
		
		NZL = {
			add_to_war = { targeted_alliance = ENG enemy = PREV hostility_reason = asked_to_join }
			leave_faction = yes
		}
	}
}

#sydney holland
country_event = {
	id = new_zealand.10
	title = new_zealand.10.t
	desc = new_zealand.10.d
	picture = GFX_report_event_generic_parliament

	trigger = {
		date > 1940.11.26
		date < 1940.12.26
		tag = NZL
		has_government = democratic
		has_country_flag = NZL_national_flag
	}

	fire_only_once = yes

	option = {
		name = new_zealand.10.a
		create_country_leader = {
			name = "Sidney Holland"
			picture = gfx/leaders/NZL/r56_portrait_NZL_Sidney_Holland.dds
			expire = "1965.1.1"
			ideology = conservatism
		}
	}
}
#Radar Cooperation
country_event = {
	id = new_zealand.11
	title = new_zealand.11.t
	desc = new_zealand.11.d
	picture = GFX_report_event_radar_01

	is_triggered_only = yes

	option = {
		set_technology = {
			cavity_magnatron = 1
		}
		name = new_zealand.11.a  # Accept radar cooperation
		522 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = radar_station
					level = 2
					instant_build = yes
				}
		}
		FROM = {
			country_event = new_zealand.12 
		}
	}
}
country_event = {
	id = new_zealand.12
	title = new_zealand.12.t
	desc = new_zealand.12.d
	picture = GFX_report_event_radar_01

	is_triggered_only = yes

	option = {
		set_technology = {
			cavity_magnatron = 1
		}
		name = new_zealand.12.a  # Confirm cooperation
		284 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = radar_station
					level = 2
					instant_build = yes
				}
		}
	}
}

#Ask for Manufacturing Permits from UK
country_event = {
	id = new_zealand.13
	title = new_zealand.13.t
	desc = new_zealand.13.d
	picture = GFX_report_event_SOV_purge_aircraft_2

	is_triggered_only = yes

	option = {
		name = new_zealand.13.a  # Supermarine
			NZL = {
				set_country_flag = NZL_has_supermarine_mio_access
				country_event = { id = new_zealand.14 days = 1 }
			}
		
	}

	option = {
		name = new_zealand.13.b  # Fairey	
			NZL = {
				set_country_flag = NZL_has_fairey_mio_access
				country_event = { id = new_zealand.14 days = 1 }
			}
	}
}

country_event = {
    id = new_zealand.14
    title = new_zealand.14.t
    picture = GFX_report_event_SOV_purge_aircraft_2
    is_triggered_only = yes

    immediate = {
        if = {
            limit = { has_country_flag = NZL_has_supermarine_mio_access }
            set_variable = { name = aircraft_choice_text value = 1 }
        }
        else_if = {
            limit = { has_country_flag = NZL_has_fairey_mio_access }
            set_variable = { name = aircraft_choice_text value = 2 }
        }
    }

    option = {
    name = new_zealand.14.a

   		if = {
			limit = {
				check_variable = { name = aircraft_choice_text value = 1 }
			}
			custom_effect_tooltip = new_zealand.14.tt_supermarine
		}
		else_if = {
			limit = {
				check_variable = { name = aircraft_choice_text value = 2 }
			}
			custom_effect_tooltip = new_zealand.14.tt_fairey
		}	
	
}
}

country_event = {
    id = new_zealand.15
    title = new_zealand.15.t
    picture = GFX_report_event_generic_usa_treaty
    is_triggered_only = yes

    option = { #UK Gives Up Islands
    name = new_zealand.15.a
			add_political_power = 75
			NZL = {
				transfer_state = 636
				transfer_state = 643
				transfer_state = 639
				transfer_state = 725
			}	
	}
	option = {
        name = NZL_event.15.b  # Decline - Keep the states but trigger unrest
        
		636 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
        643 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		639 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		725 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
    }
}

country_event = {
    id = new_zealand.16
    title = new_zealand.16.t
    picture = GFX_report_event_generic_usa_treaty
    is_triggered_only = yes

    option = { #FRANCE Gives Up Islands
    name = new_zealand.16.a
			add_political_power = 75
			NZL = {
				transfer_state = 635
				transfer_state = 734
				transfer_state = 641
			}	
	}
	option = {
        name = NZL_event.16.b  # Decline - Keep the states but trigger unrest     
		635 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
        734 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		641 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
    }
}

country_event = {
    id = new_zealand.17
    title = new_zealand.17.t
    picture = GFX_report_event_generic_usa_treaty
    is_triggered_only = yes

    option = { #USA Gives Up Islands
    name = new_zealand.17.a
			add_political_power = 75
			NZL = {
				transfer_state = 642
				transfer_state = 727
				transfer_state = 629
				transfer_state = 630
				transfer_state = 631
				transfer_state = 632
				transfer_state = 638
			}	
	}
	option = {
        name = NZL_event.17.b  # Decline - Keep the states but trigger unrest     
		642 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
        727 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		629 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		630 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		631 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		632 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
		638 = {
			add_dynamic_modifier = {
				modifier = NZL_island_resistance
			}
		}
    }
}