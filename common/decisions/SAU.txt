SAU_dandilian_puppet_category = {

    SAU_YEM_puppet = {

		available = {
			is_faction_leader = yes
            YEM = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = YEM
            YEM = { is_subject = no }
		}

		complete_effect = {
			add_political_power = 50
			YEM = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}
    SAU_OMA_puppet = {

		available = {
			is_faction_leader = yes
            OMA = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = OMA
            OMA = { is_subject = no }
		}

		complete_effect = {
			add_political_power = 50
			OMA = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}
    SAU_IRQ_puppet = {

		available = {
			is_faction_leader = yes
            IRQ = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = IRQ
            IRQ = { is_subject = no }
		}

		complete_effect = {
			add_political_power = 50
			IRQ = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}
    SAU_KUW_puppet = {

		available = {
			is_faction_leader = yes
            KUW = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = KUW
            KUW = { is_subject = no }
		}

		complete_effect = {
			add_political_power = 50
			KUW = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}
    SAU_QAT_puppet = {

		available = {
			is_faction_leader = yes
            QAT = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = QAT
            QAT = { is_subject = no }
		}

		complete_effect = {
			add_political_power = 50
			QAT = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}
    SAU_UAE_puppet = {

		available = {
			is_faction_leader = yes
            UAE = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = UAE
            UAE = { is_subject = no }
		}

		complete_effect = {
			add_political_power = 50
			UAE = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}    
    SAU_PER_puppet = {

		available = {
			is_faction_leader = yes
            PER = { 
				is_in_faction_with = ROOT
			}
		}

		cost = 100

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = PER
            PER = { is_subject = no }
		}

		complete_effect = {
			PER = {
				country_event = generic.20
			}
			hidden_effect = {
				add_to_variable = { SAU_puppet_check_var = 1 }
			}
		}
	}
}
SAU_dandilian_federation = {

    SAU_start_deferation = {

		available = {
			is_subject = no
			has_government = democratic
			custom_trigger_tooltip = {
				tooltip = SAU_puppet_check_variable_tt
				count_triggers = {
					amount = 3
					PER = {
						is_subject_of = ROOT
					}
					UAE = {
						is_subject_of = ROOT
					}
					QAT = {
						is_subject_of = ROOT
					}
					KUW = {
						is_subject_of = ROOT
					}
					IRQ = {
						is_subject_of = ROOT
					}
					OMA = {
						is_subject_of = ROOT
					}
					YEM = {
						is_subject_of = ROOT
					}
				}
			}
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
		}

		cost = 25
        days_remove = 60
        fire_only_once = yes

		ai_will_do = {
			factor = 500 # do this
		}

		complete_effect = {
			add_political_power = 100
            set_cosmetic_tag = sau_united_arab
		}

		modifier = {
			political_power_gain = 0.05
			political_power_factor = 0.2
		}
	}
    SAU_IRQ_annex = {

		available = {
			is_faction_leader = yes
            IRQ = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = IRQ
			IRQ = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = IRQ transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = IRQ
				}
				add_core_of = SAU
			}
		}
	}

	SAU_PER_annex = {

		available = {
			is_faction_leader = yes
            PER = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = PER
            PER = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
			always = no
		}

		complete_effect = {
            annex_country = { target = PER transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = PER
				}
				add_core_of = SAU
			}
		}
	}

	SAU_OMA_annex = {

		available = {
			is_faction_leader = yes
            OMA = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = OMA
            OMA = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = OMA transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = OMA
				}
				add_core_of = SAU
			}
		}
	}

	SAU_QAT_annex = {

		available = {
			is_faction_leader = yes
            QAT = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = QAT
            QAT = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = QAT transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = QAT
				}
				add_core_of = SAU
			}
		}
	}

	SAU_KUW_annex = {

		available = {
			is_faction_leader = yes
            KUW = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = KUW
            KUW = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = KUW transfer_troops = yes }
			every_state = {
			    limit = {
					is_core_of = KUW
				}
				add_core_of = SAU
			}
		}
	}

	SAU_UAE_annex = {

		available = {
			is_faction_leader = yes
            UAE = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = UAE
            UAE = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = UAE transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = UAE
				}
				add_core_of = SAU
			}
		}
	}

	SAU_YEM_annex = {

		available = {
			is_faction_leader = yes
            YEM = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = YEM
            YEM = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = YEM transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = YEM
				}
				add_core_of = SAU
			}
		}
	}

	SAU_JOR_annex = {

		available = {
			is_faction_leader = yes
            JOR = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = JOR
            JOR = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = JOR transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = JOR
				}
				add_core_of = SAU
			}
		}
	}

	SAU_PAL_annex = {

		available = {
			is_faction_leader = yes
            PAL = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = PAL
            PAL = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = PAL transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = PAL
				}
				add_core_of = SAU
			}
		}
	}

	SAU_SYR_annex = {

		available = {
			is_faction_leader = yes
            SYR = { 
				is_puppet_of = ROOT
			}
		}

		cost = 125

		ai_will_do = {
			factor = 300
		}

		visible = {
			has_completed_focus = SAU_unite_arabia_under_one_nation
			has_government = democratic
            country_exists = SYR
            SYR = { 
				is_puppet_of = ROOT
			}
            has_cosmetic_tag = sau_united_arab
		}

		complete_effect = {
            annex_country = { target = SYR transfer_troops = yes }
			every_state = {
				limit = {
					is_core_of = SYR
				}
				add_core_of = SAU
			}
		}
	}
}

SAU_dominance_in_the_gulf = {
	SAU_dominance_in_the_arab_sea_mission = {

		icon = GFX_decision_generic_operation

		ai_will_do = {
			base = 0
			modifier = {
				add = 0.01
				is_major = yes
				OR = {
					has_war = no
					alliance_strength_ratio > 1
				}
			}
		}

		allowed = {
			original_tag = SAU
		}

		available = { #GOAL
			NOT = {
				any_state = {
					SAU_state_is_in_the_arab_sea = yes
					controller = {
						NOT = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
				}
			}
		}

		activation = {
			has_completed_focus = SAU_secure_the_persian_gulf_and_arabian_sea
		}
		
		visible = {
			has_completed_focus = SAU_secure_the_persian_gulf_and_arabian_sea
		}

		highlight_states = {
			highlight_states_trigger = { 
				SAU_state_is_in_the_arab_sea = yes
				controller = {
					NOT = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
			}
		}

		days_mission_timeout = 730

		fire_only_once = yes

		is_good = no
		
		timeout_effect = { #FAIL
			add_stability = -0.1
			add_war_support = -0.1
			add_political_power = -100
			every_state = {
				limit = {
					has_state_flag = SAU_dominance_in_the_gulf_claim_flag
				}
				remove_claim_by = ROOT
				clr_state_flag = SAU_dominance_in_the_gulf_claim_flag
			}
			mark_focus_tree_layout_dirty = yes
		}

		complete_effect = { #SUCCESS
			add_stability = 0.1
			add_war_support = 0.1
			if = {
				limit = {
					has_idea = SAU_supremacy_on_the_gulf
				}
				modify_timed_idea = {
					idea = SAU_supremacy_on_the_gulf
					days = 360
				}
			}
			navy_experience = 100
			add_tech_bonus = {
				name = uk_battleship_focus
				bonus = 1.0
				uses = 1
				category = bb_tech
			}
			add_tech_bonus = {
				name = bc_bonus
				bonus = 1.0
				uses = 1
				category = bc_tech
			}
			add_tech_bonus = {
				name = GER_u_boat_effort
				bonus = 1.0
				uses = 1
				category = ss_tech
			}
			add_tech_bonus = {
				name = dd_bonus
				bonus = 1.0
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = cr_bonus
				bonus = 1.0
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_doctrine_cost_reduction = {
				name = naval_doctrine
				cost_reduction = 1.0
				uses = 1
				category = naval_doctrine
			}
			mark_focus_tree_layout_dirty = yes
		}
	}
}

SAU_the_seeds_of_revolution = {

	SAU_integrate_commune_1 = {

		name = SPR_integrate_commune

		icon = generic_nationalism

		allowed = {
			original_tag = SAU
		}

		available = {
			FROM = {
				compliance > 50
				OR = {
					is_island_state = yes
					any_neighbor_state = {
						is_core_of = ROOT
					}
				}
			}
		}

		state_target = yes

		on_map_mode = map_only

		#targets = {  }

		target_array = controlled_states

		target_trigger = {
			has_completed_focus = SAU_global_defense_council
			FROM = {
				NOT = {
					is_core_of = ROOT
				}
				OR = {
					is_island_state = yes
					any_neighbor_state = {
						is_core_of = ROOT
					}
				}
				OR = {
					NOT = {
						is_owned_by = ROOT
					}
					NOT = {
						state = 855
						state = 854
						state = 857
						state = 679
						state = 292
						state = 856
						state = 858
						state = 678
						state = 859
					}
				}
				compliance > 35
			}
		}

		cost = 50

		fire_only_once = yes

		days_remove = 60

		modifier = {
			political_power_gain = -1
		}

		visible = {
			tag = SAU
			has_completed_focus = SAU_global_defense_council
			always = yes
		}

		complete_effect = {

		}

		remove_effect = {
			FROM = {
				add_core_of = ROOT
			}
			transfer_state = FROM
		}
	}

	SAU_integrate_commune_2 = {

		name = SPR_integrate_commune

		icon = generic_nationalism

		allowed = {
			original_tag = SAU
		}

		available = {
			FROM = {
				compliance > 50
				NOT = {
					is_island_state = yes
					any_neighbor_state = {
						is_core_of = ROOT
					}
				}
			}
		}

		state_target = yes

		on_map_mode = map_only

		#targets = {  }

		target_array = controlled_states

		target_trigger = {
			has_completed_focus = SAU_global_defense_council
			FROM = {
				NOT = {
					is_core_of = ROOT
				}
				NOT = {
					is_island_state = yes
					any_neighbor_state = {
						is_core_of = ROOT
					}
				}
				OR = {
					NOT = {
						is_owned_by = ROOT
					}
					NOT = {
						state = 855
						state = 854
						state = 857
						state = 679
						state = 292
						state = 856
						state = 858
						state = 678
						state = 859
					}
				}
				compliance > 35
			}
		}

		cost = 150

		fire_only_once = yes

		days_remove = 90

		modifier = {
			political_power_gain = -1
		}

		visible = {
			tag = SAU
			has_completed_focus = SAU_global_defense_council
			always = yes
		}

		complete_effect = {

		}

		remove_effect = {
			FROM = {
				add_core_of = ROOT
			}
			transfer_state = FROM
		}
	}

	SAU_ignite_uprising = {

		icon = generic_ignite_civil_war

		allowed = {
			original_tag = SAU
		}

		available = {
			FROM = {
				has_civil_war = no
				any_controlled_state = {
					is_in_home_area = yes
					is_capital = no
				}
			}
			has_equipment = {
			    infantry_equipment > 19999
			}
			any_controlled_state = {
				NOT = { has_state_flag = anarchist_uprising }
			}
		}

		target_trigger = {
			FROM = {
				exists = yes
				has_war_with = ROOT
				any_controlled_state = {
					is_in_home_area = yes
					any_neighbor_state = {
						is_controlled_by = ROOT
					}
				}
			}
		}

		cost = 150

		fire_only_once = yes

		days_remove = 90

		modifier = {
			
		}

		visible = {
			tag = SAU
			has_completed_focus = SAU_plant_the_seeds_of_revolution
			FROM = {
				exists = yes
			}
		}

		complete_effect = {
			add_equipment_to_stockpile = {
			    type = infantry_equipment
			    amount = -20000
			}
			hidden_effect = {
				FROM = {
					set_country_flag = SAU_ignite_uprising_timer_flag
					activate_mission = SAU_ignite_uprising_timer_mission
				}
			}
		}

		remove_effect = {
			if = {
				limit = {
					FROM = {
						any_controlled_state = {
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
					}
				}
				random_state = {
					limit = {
						is_controlled_by = FROM
						is_in_home_area = yes
						is_capital = no
						NOT = { has_state_flag = anarchist_uprising }
						any_state = {
							is_controlled_by = ROOT
							NOT = { has_state_flag = anarchist_uprising }
							distance_to = {
								target = PREV
								value < 750
							}
						}
					}
					set_state_flag = anarchist_uprising
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			else_if = {
				limit = {
					FROM = {
						any_controlled_state = {
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
					}
				}
				random_state = {
					limit = {
						is_controlled_by = FROM
						is_in_home_area = yes
						is_capital = no
						NOT = { has_state_flag = anarchist_uprising }
						any_state = {
							is_controlled_by = ROOT
							NOT = { has_state_flag = anarchist_uprising }
							distance_to = {
								target = PREV
								value < 1500
							}
						}
					}
					set_state_flag = anarchist_uprising
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			else = {
				random_state = {
					limit = {
						is_controlled_by = FROM
						is_in_home_area = yes
						is_capital = no
						NOT = { has_state_flag = anarchist_uprising }
						any_state = {
							is_controlled_by = ROOT
							NOT = { has_state_flag = anarchist_uprising }
						}
					}
					set_state_flag = anarchist_uprising
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
				}
			}

			if = {
				limit = {
					FROM = { num_of_controlled_states > 4 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 750
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 1500
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			if = {
				limit = {
					FROM = { num_of_controlled_states > 7 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 750
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 1500
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			if = {
				limit = {
					FROM = { num_of_controlled_states > 11 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 750
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 1500
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			if = {
				limit = {
					FROM = { num_of_controlled_states > 19 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 750
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 750
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								any_state = {
									is_controlled_by = ROOT
									NOT = { has_state_flag = anarchist_uprising }
									distance_to = {
										target = PREV
										value < 1500
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
								distance_to = {
									target = PREV
									value < 1500
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							any_state = {
								is_controlled_by = ROOT
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
		}

	}

	SAU_ignite_uprising_timer_mission = {

		icon = generic_ignite_civil_war

		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 90

		fire_only_once = yes

		activation = {
			always = no
		}

		visible = {
			has_country_flag = SAU_ignite_uprising_timer_flag
		}

		cancel_if_not_visible = no

		is_good = yes

		timeout_effect = {
			clr_country_flag = SAU_ignite_uprising_timer_flag
			custom_effect_tooltip = SAU_ignite_uprising_timer_mission_tt
		}
	}

}

SAU_expand_resource_extraction = {

	expand_khali_steel_works = { #678
		
		icon = steel

		allowed = {

		}

		highlight_states = {
            highlight_state_targets = {
			    state = 678
		    } 
        }

		available = {
			has_tech = construction3
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 678
			controls_state = 678
		}

		visible = {
			owns_state = 678
			controls_state = 678
			678 = {
				NOT = {
					has_state_flag = khali_steel_developed
				}
			}
			OR = {
				has_completed_focus = SAU_communal_autarky
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 90

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			678 = { set_state_flag = khali_steel_developed }
			678 = {
				add_resource = {
					type = steel
					amount = 8
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	expand_hejaz_steel_works = { #679
		
		icon = steel

		allowed = {

		}

		highlight_states = {
            highlight_state_targets = {
			    state = 679
		    } 
        }

		available = {
			has_tech = construction3
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 679
			controls_state = 679
		}

		visible = {
			owns_state = 679
			controls_state = 679
			679 = {
				NOT = {
					has_state_flag = hejaz_steel_developed
				}
			}
			OR = {
				has_completed_focus = SAU_communal_autarky
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 90

		modifier = {
			civilian_factory_use = 3
		}

		remove_effect = {
			679 = { set_state_flag = hejaz_steel_developed }
			679 = {
				add_resource = {
					type = steel
					amount = 8
				}
			}
		}

		ai_will_do = {
			factor = 1
		}
	}

	develop_khali_tungsten_deposits = { #678
		
		icon = tungsten

		allowed = {
			
		}

		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 678
			controls_state = 678
		}

		highlight_states = {
            highlight_state_targets = {
			    state = 678
		    } 
        }

		visible = {
			owns_state = 678
			controls_state = 678
			678 = {
				NOT = {
					has_state_flag = khali_tungsten_developed
				}
			}
			OR = {
				has_completed_focus = SAU_communal_autarky
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		remove_effect = {
			678 = { set_state_flag = khali_tungsten_developed }
			678 = {
				add_resource = {
					type = tungsten
					amount = 12
				}
			}
		}
	}

	develop_hejaz_tungsten_deposits = { #679
		
		icon = tungsten

		allowed = {
			
		}

		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 679
			controls_state = 679
		}

		highlight_states = {
            highlight_state_targets = {
			    state = 679
		    } 
        }

		visible = {
			owns_state = 679
			controls_state = 679
			679 = {
				NOT = {
					has_state_flag = hejaz_tungsten_developed
				}
			}
			OR = {
				has_completed_focus = SAU_communal_autarky
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		remove_effect = {
			679 = { set_state_flag = hejaz_tungsten_developed }
			679 = {
				add_resource = {
					type = tungsten
					amount = 14
				}
			}
		}
	}

	expand_nejd_bauxite_mines = { #292
		
		icon = aluminium

		allowed = {
			
		}

		highlight_states = {
            highlight_state_targets = {
			    state = 292
		    } 
        }

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 2
			owns_state = 292
			controls_state = 292
		}

		visible = {
			owns_state = 292
			controls_state = 292
			292 = {
				NOT = {
					has_state_flag = nejd_aluminium_developed
				}
			}
			OR = {
				has_completed_focus = SAU_communal_autarky
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = { 
			292 = { set_state_flag = nejd_aluminium_developed } 
			292 = {
				add_resource = {
					type = aluminium
					amount = 8
				}
			}
		}
	}

}