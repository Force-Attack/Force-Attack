### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_POLITICAL_CHARACTER}
### search_filters = {FOCUS_FILTER_MILITARY_CHARACTER}

### COPY PASTE TEMPLATE
###focus = {
###		id = TAG_focus_title
###		icon = GFX_focus_PLACEHOLDER
###		prerequisite = { focus = TAG_focus_title }
###		x = 0
###		y = 0
###		relative_position_id = TAG_focus_title
###		cost = 10
###		mutually_exclusive = { focus = TAG_focus_title }
###		
###		available = {
###
###		}
###
###		bypass = {
###
###		}
###
###		allow_branch = {
###
###		}
###
###		ai_will_do = {
###			factor = 0
###		}
###
###		search_filters = {
###
###		}
###
###		completion_reward = {
###
###		}
###	}

focus_tree = {
	id = persian_focus_tree
	
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = PER
			has_dlc = "Graveyard of Empires"
		} 
	}

	default = no

	continuous_focus_position = { x = 200 y = 2000 }

	initial_show_position = {
		x = 25
		y = 0
	}

	#################################
	###### INDUSTRIAL BRANCH ########
	#################################

	focus = { #INDUSTRIAL
		id = PER_modernizing_iran
		icon = GFX_focus_PER_modernizing_iran
		x = 50
		y = 0
		cost = 5

		ai_will_do = {
			factor = 15
		}

		offset = {
		    x = -50
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_legacy_of_greatness
		    }
		}

		offset = {
		    x = -50
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_stand_with_giants
		    }
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_modernizing_iran_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_adult_literacy
		icon = GFX_focus_generic_university_1
		prerequisite = { focus = PER_modernizing_iran }
		x = -8
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_adult_literacy_idea
				days = 365
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_national_museum
		icon = GFX_focus_PER_national_museum
		prerequisite = { focus = PER_adult_literacy }
		x = 0
		y = 1
		relative_position_id = PER_adult_literacy
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = PER_andre_godard

			custom_effect_tooltip = CHL_skip_one_line_tt

			266 = { #Tehran
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_university_of_isfahan
		icon = GFX_focus_PER_university_of_isfahan
		prerequisite = { focus = PER_national_museum }
		x = -1
		y = 1
		relative_position_id = PER_national_museum
		mutually_exclusive = { focus = PER_shiraz_university }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_university_of_isfahan_bonus
			bonus = 0.5
			uses = 2
			category = support_tech
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_shiraz_university
		icon = GFX_focus_PER_shiraz_university
		prerequisite = { focus = PER_national_museum }
		x = 1
		y = 1
		relative_position_id = PER_national_museum
		mutually_exclusive = { focus = PER_university_of_isfahan }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_shiraz_university_bonus
			bonus = 0.5
			uses = 2
			category = electronics
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_educational_reforms
		icon = GFX_focus_research
		prerequisite = { focus = PER_university_of_isfahan focus = PER_shiraz_university }
		x = 1
		y = 1
		relative_position_id = PER_university_of_isfahan
		cost = 10

		available = {
			num_of_owned_factories > 25
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = { #INDUSTRIAL
		id = PER_trans_iranian_railway
		icon = GFX_focus_generic_railroad
		prerequisite = { focus = PER_modernizing_iran }
		x = -3
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_trans_iranian_railway_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_expand_tabriz_masshad
		icon = GFX_focus_PER_expand_tabriz_masshad
		prerequisite = { focus = PER_trans_iranian_railway }
		x = -2
		y = 1
		relative_position_id = PER_trans_iranian_railway
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			build_railway = {
				path = { 5029 1957 5073 12748 12704 12818 10837 7969 4553 12793 1896 }
			}
			1000 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 1896
					instant_build = yes
				}
			}

			416 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 5029
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_expand_tehran_emam
		icon = GFX_focus_PER_expand_tehran_emam
		prerequisite = { focus = PER_trans_iranian_railway }
		x = 0
		y = 1
		relative_position_id = PER_trans_iranian_railway
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			build_railway = {
				path = { 10837 10922 5067 2026 4928 5089 }
			}
			413 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 5089
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_expand_tehran_abbas
		icon = GFX_focus_PER_expand_tehran_abbas
		prerequisite = { focus = PER_trans_iranian_railway }
		x = 2
		y = 1
		relative_position_id = PER_trans_iranian_railway
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
 			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			build_railway = {
				path = { 10837 10922 5067 8074 1963 8031 12780 12863 7982 }
			}
			412 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 7982
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_trains_from_germany
		icon = GFX_focus_generic_german_trade
		prerequisite = { focus = PER_expand_tabriz_masshad focus = PER_expand_tehran_emam focus = PER_expand_tehran_abbas }
		x = 1
		y = 1
		relative_position_id = PER_expand_tabriz_masshad
		mutually_exclusive = { focus = PER_trains_from_britain }
		cost = 5
		
		available = {
			GER = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			GER = {
				exists = no
			}
		}

		ai_will_do = {
			factor = 25
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			GER = {
				add_opinion_modifier = {
					target = ROOT
					modifier  = huge_increase
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}

				add_equipment_subsidy = {
					cic = 2000
					equipment_type = train_equipment
					seller_tags = { GER } 
				}

				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 15
					producer = GER
				}
			}

			ELSE = {
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 20
					producer = GER
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_trains_from_britain
		icon = GFX_focus_generic_british_trade
		prerequisite = { focus = PER_expand_tabriz_masshad focus = PER_expand_tehran_emam focus = PER_expand_tehran_abbas }
		x = -1
		y = 1
		relative_position_id = PER_expand_tehran_abbas
		mutually_exclusive = { focus = PER_trains_from_germany }
		cost = 5

		ai_will_do = {
			factor = 5
		}

		available = {
			ENG = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			ENG = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			ENG = {
				add_opinion_modifier = {
					target = ROOT
					modifier  = huge_increase
				}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}

				add_equipment_subsidy = {
				cic = 2000
				equipment_type = train_equipment
				seller_tags = { ENG } 
				}

				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 15
					producer = ENG
				}
			}

			ELSE = {
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 20
					producer = ENG
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_feat_of_engineering
		icon = GFX_focus_PER_feat_of_engineering
		prerequisite = { focus = PER_trains_from_britain focus = PER_trains_from_germany }
		x = 1
		y = 1
		relative_position_id = PER_trains_from_germany
		cost = 10
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {

			swap_ideas = {
				remove_idea = PER_trans_iranian_railway_idea
  				add_idea = PER_feat_of_engineering_idea 	
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_tech_bonus = {
			name = PER_feat_of_engineering_bonus
			bonus = 0.5
			uses = 2
			category = train_tech
			}

		}
	}

	focus = { #INDUSTRIAL
		id = PER_white_revolution
		icon = GFX_focus_PER_white_revolution
		prerequisite = { focus = PER_modernizing_iran }
		x = 3
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 10
		
		available = {
			#NOT = {
			#	has_completed_focus = PER_writing_on_wall
			#}

			num_of_owned_factories > 15
		}

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_white_revolution_idea
				days = 365
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			266 = { #Tehran
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #INDUSTRIAL
		id = PER_national_bank
		icon = GFX_focus_PER_national_bank
		prerequisite = { focus = PER_white_revolution }
		x = 0
		y = 1
		relative_position_id = PER_white_revolution
		cost = 10

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = available_industrial_concern
			show_ideas_tooltip = PER_national_bank_iran_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_price_stabilization
		icon = GFX_focus_mex_privatisation
		prerequisite = { focus = PER_national_bank }
		x = -1
		y = 1
		relative_position_id = PER_national_bank
		cost = 10
		

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_price_stabilization_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_abolish_feudalism
		icon = GFX_focus_PER_abolish_feudalism
		prerequisite = { focus = PER_national_bank }
		x = 1
		y = 1
		relative_position_id = PER_national_bank
		cost = 10
	

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			IF  = {
				limit = {
					has_idea = PER_rural_feudalism_ns
				}

				remove_ideas = PER_rural_feudalism_ns
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
			limit = {
				infrastructure < 5
				is_owned_and_controlled_by = ROOT
			}

			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
				}
			}

			random_core_state = {
			limit = {
				infrastructure < 5
				is_owned_and_controlled_by = ROOT
			}
			
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_women_vote
		icon = GFX_focus_generic_universal_suffrage
		prerequisite = { focus = PER_price_stabilization focus = PER_abolish_feudalism }
		x = 0
		y = 1
		relative_position_id = PER_price_stabilization
		cost = 5

		available = {
			NOT = {
				OR = {
					has_government = fascism
					#has_completed_focus = PER_writing_on_wall
				} 
			}
		}

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = PER_fakhrafagh_parsa

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_stability = -0.05
			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #INDUSTRIAL
		id = PER_food_for_all
		icon = GFX_focus_generic_agricultural_subsidies
		prerequisite = { focus = PER_price_stabilization focus = PER_abolish_feudalism }
		x = 0
		y = 1
		relative_position_id = PER_abolish_feudalism
		cost = 10

		ai_will_do = {
			factor = 2
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			add_ideas = PER_food_for_all_idea
		}
	}

	focus = { #INDUSTRIAL
		id = PER_rapid_industrialization
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = PER_modernizing_iran }
		x = 7
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			266 = { #Tehran
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_tehran_power_plant
		icon = GFX_focus_ARG_develop_the_electricity_sector
		prerequisite = { focus = PER_rapid_industrialization }
		x = 0
		y = 1
		relative_position_id = PER_rapid_industrialization
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {

			add_ideas = PER_tehran_power_grid_idea

			custom_effect_tooltip = CHL_skip_one_line_tt

			266 = { #Tehran
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_tech_bonus = {
			name = PER_tehran_power_grid_bonus
			bonus = 0.5
			uses = 2
			category = electronics
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_develop_cities
		icon = GFX_focus_generic_low_cost_housing
		prerequisite = { focus = PER_tehran_power_plant }
		x = 0
		y = 1
		relative_position_id = PER_tehran_power_plant
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			266 = { #Tehran
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}

			419 = { #Tabriz
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_metropolitan_iran
		icon = GFX_focus_generic_industry_3
		prerequisite = { focus = PER_develop_cities }
		x = 0
		y = 1
		relative_position_id = PER_develop_cities
		cost = 10

		available = {
			num_of_owned_factories > 30
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_metropolitan_iran_idea
				days = 365
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_develop_oil_fields
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = PER_rapid_industrialization }
		x = 3
		y = 1
		relative_position_id = PER_rapid_industrialization
		cost = 10

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			421 = {
				add_resource = {
					type = oil
					amount = 25
				}	
			}

			413 = {
				add_resource = {
					type = oil
					amount = 15
				}	
			}

			412 = {
				add_resource = {
					type = oil
					amount = 18
				}	
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_form_oil_company
		icon = GFX_focus_PER_form_oil_company
		prerequisite = { focus = PER_develop_oil_fields }
		x = 0
		y = 1
		relative_position_id = PER_develop_oil_fields
		cost = 5

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = available_industrial_concern
			show_ideas_tooltip = PER_iranian_oil_company_idea
			IF = {
				limit = {
					has_idea = PER_anglo_iranian_oil_ns
				}
				remove_ideas = PER_anglo_iranian_oil_ns
			}
		}
	}

	focus = { #INDUSTRIAL
		id = PER_oil_baron
		icon = GFX_focus_PER_oil_baron
		prerequisite = { focus = PER_form_oil_company }
		x = -1
		y = 1
		relative_position_id = PER_form_oil_company
		mutually_exclusive = { focus = PER_profit_from_war }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_oil_baron_idea
			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #INDUSTRIAL
		id = PER_profit_from_war
		icon = GFX_focus_SWI_issue_war_bonds
		prerequisite = { focus = PER_form_oil_company }
		x = 1
		y = 1
		relative_position_id = PER_form_oil_company
		mutually_exclusive = { focus = PER_oil_baron }
		cost = 5
		
		available = {
			is_subject = no
		}

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = PER_profit_from_war_tt

		}
	}

	################################
	######### ARMY BRANCH ##########
	################################

	focus = { #ARMY
		id = PER_restructure_army
		icon = GFX_focus_PER_restructure_army
		x = 32
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			army_experience = 25

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 0
					include_locked = yes
					}

				is_owned_and_controlled_by = ROOT

			}

			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
	}
}

	focus = { #ARMY
		id = PER_expand_imperial_guard
		icon = GFX_focus_PER_expand_imperial_guard
		prerequisite = { focus = PER_restructure_army }
		x = -6
		y = 1
		relative_position_id = PER_restructure_army
		cost = 10

		ai_will_do = {
			factor = 0
		}

		available = {
			has_government = neutrality
			NOT = {
				has_completed_focus = PER_islamic_revolution
			}
		}

		search_filters = { FOCUS_FILTER_MANPOWER }

		completion_reward = {

			custom_effect_tooltip = PER_expand_imperial_guard_tt

			hidden_effect = {
			
				division_template = {
					name = "Iranian Imperial Guard"		
					is_locked = no
					template_counter = 4
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
    				    infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
				
					support = {
    				    engineer = { x = 0 y = 0 }
    				    artillery = { x = 0 y = 1 }
					}
					#division_cap = 0
					override_model = PER_militia_alt_1_entity
				}

				random_owned_state = {
					prioritize = { 266 } 
					create_unit = {
					    division = "name = \"1st Imperial Guard\" division_template = \"Iranian Imperial Guard\" start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
					    division = "name = \"2nd Imperial Guard\" division_template = \"Iranian Imperial Guard\" start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
				}
		}
	}
}
	

	focus = { #ARMY
		id = PER_expand_military_facilities
		icon = GFX_focus_generic_reorient_production
		prerequisite = { focus = PER_restructure_army }
		x = -3
		y = 1
		relative_position_id = PER_restructure_army
		cost = 10
		
		available = {
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 2
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 2
					    include_locked = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_czech_tanks
		icon = GFX_focus_PER_czech_tanks
		prerequisite = { focus = PER_expand_military_facilities }
		x = -1
		y = 1
		relative_position_id = PER_expand_military_facilities
		mutually_exclusive = { focus = PER_german_tanks }
		cost = 10
		
		available = {
			CZE = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			CZE = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CZE_skoda_armor_organization
				mio:CZE_skoda_armor_organization = {
					add_mio_size = 1
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CZE_skoda_armor
			}
		}
	}

	focus = { #ARMY
		id = PER_german_tanks
		icon = GFX_focus_BRA_acquire_german_tanks
		prerequisite = { focus = PER_expand_military_facilities }
		x = 1
		y = 1
		relative_position_id = PER_expand_military_facilities
		mutually_exclusive = { focus = PER_czech_tanks }
		cost = 10
		
		available = {
			GER = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			GER = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = GER_henschel_organization
				mio:GER_henschel_organization = {
					add_mio_size = 1
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = henschel
			}
		}
	}

	focus = { #ARMY
		id = PER_future_of_war
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = PER_german_tanks focus = PER_czech_tanks }
		x = 1
		y = 1
		relative_position_id = PER_czech_tanks
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			add_ideas = PER_future_of_war_idea
		}
	}

	focus = { #ARMY
		id = PER_reverse_engineer_tanks
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = PER_german_tanks focus = PER_czech_tanks }
		x = -1
		y = 1
		relative_position_id = PER_czech_tanks
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_tank_specialization_bonus
				bonus = 0.5
				uses = 4
				category = armor
			}
		}
	}

	focus = { #ARMY
		id = PER_establish_tehran_armor
		icon = GFX_focus_PER_establish_tehran_armor
		prerequisite = { focus = PER_reverse_engineer_tanks }
		x = 0
		y = 1
		relative_position_id = PER_reverse_engineer_tanks
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = PER_tehran_armor_organization
				mio:PER_tehran_armor_organization = {
					add_mio_size = 2
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = PER_tehran_armor_manufacturer
			}
		}
	}

	focus = { #ARMY
		id = PER_expand_tehran_armor
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = PER_establish_tehran_armor }
		x = 0
		y = 1
		relative_position_id = PER_establish_tehran_armor
		cost = 10

		available = {
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 2
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 2
					    include_locked = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}

				266 = { #Tehran
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}

				custom_effect_tooltip = CHL_skip_one_line_tt
	
				mio:PER_tehran_armor_organization = {
					add_mio_size = 1
				}
			}

			ELSE = {
				266 = { #Tehran
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_train_tank_commanders
		icon = GFX_focus_ETH_ecole_militaire_haile_selassie_1er
		prerequisite = { focus = PER_future_of_war }
		x = 0
		y = 2
		relative_position_id = PER_future_of_war
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			custom_effect_tooltip = PER_add_panzer_leader_trait_tt 
			hidden_effect = {
				random_army_leader = {
					add_unit_leader_trait = panzer_leader	
				}
				random_army_leader = {		
					add_unit_leader_trait = panzer_leader
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_foreign_retraining
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = PER_restructure_army }
		x = 3
		y = 1
		relative_position_id = PER_restructure_army
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MILITARY_CHARACTER FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_foreign_retraining_idea
				days = 730
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = JUNO_army_academy_random_generals_tt
			hidden_effect = {
				random_army_leader = {		
					add_planning = 1
				}
				random_army_leader = {			
					add_planning = 1
				} 
				random_army_leader = {			
					add_planning = 1
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_bolster_infantry
		icon = GFX_goal_generic_allies_build_infantry
		prerequisite = { focus = PER_foreign_retraining }
		x = -1
		y = 1
		relative_position_id = PER_foreign_retraining
		mutually_exclusive = { focus = PER_swedish_artillery }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_infantry_equipment_bonus
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}

			add_tech_bonus = {
				name = PER_support_technology_bonus
				bonus = 0.5
				uses = 2
				category = support_tech
			}
		}
	}

	focus = { #ARMY
		id = PER_establish_motor_arms
		icon = GFX_focus_generic_truck
		prerequisite = { focus = PER_bolster_infantry }
		x = -1
		y = 1
		relative_position_id = PER_bolster_infantry
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = PER_motorization_investments_idea
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_motorize_infantry
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = PER_establish_motor_arms }
		x = 0
		y = 1
		relative_position_id = PER_establish_motor_arms
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = motorized_bonus
				ahead_reduction = 2
				uses = 1
				category = motorized_equipment
			}
			add_tech_bonus = {
				name = PER_motorized_infantry_bonus
				bonus = 0.5
				uses = 2
				category = motorized_equipment
			}
		}
	}

	focus = { #ARMY
		id = PER_swedish_artillery
		icon = GFX_focus_PER_swedish_artillery
		prerequisite = { focus = PER_foreign_retraining }
		x = 1
		y = 1
		relative_position_id = PER_foreign_retraining
		mutually_exclusive = { focus = PER_bolster_infantry }
		cost = 10
		
		available = {
			SWE = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			SWE = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = SWE_bofors_organization
				mio:SWE_bofors_organization = {
					add_mio_size = 1
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = bofors
			}
		}
	}

	focus = { #ARMY
		id = PER_increase_heavy_arms
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = PER_swedish_artillery }
		x = 1
		y = 1
		relative_position_id = PER_swedish_artillery
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			
			add_doctrine_cost_reduction = {
				name = PER_superior_firepower
				cost_reduction = 0.5
				uses = 1
				category = cat_superior_firepower
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_our_own_artillery
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = PER_increase_heavy_arms }
		x = 0
		y = 1
		relative_position_id = PER_increase_heavy_arms
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_artillery_bonus
				bonus = 0.5
				uses = 2
				category = artillery
			}
		}
	}

	focus = { #ARMY
		id = PER_develop_qorkhaneh
		icon = GFX_focus_PER_develop_qorkhaneh
		prerequisite = { focus = PER_bolster_infantry focus = PER_swedish_artillery }
		x = 1
		y = 1
		relative_position_id = PER_bolster_infantry
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				mio:PER_qorkhaneh_organization = {
					add_mio_size = 2
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = PER_qorkhaneh
			}
		}
	}

	focus = { #ARMY
		id = PER_desert_training
		icon = GFX_focus_PER_desert_training
		prerequisite = { focus = PER_develop_qorkhaneh }
		x = 0
		y = 2
		relative_position_id = PER_develop_qorkhaneh
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			add_ideas = PER_desert_training_idea
		}
	}

	focus = { #ARMY
		id = PER_every_man_serves
		icon = GFX_focus_generic_limited_social_mobilization
		prerequisite = { focus = PER_desert_training focus = PER_train_tank_commanders }
		x = -1
		y = 1
		relative_position_id = PER_desert_training
		mutually_exclusive = { focus = PER_military_excellency }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			add_ideas = PER_conscription_idea
		}
	}

	focus = { #ARMY
		id = PER_military_excellency
		icon = GFX_focus_generic_full_social_mobilization
		prerequisite = { focus = PER_desert_training focus = PER_train_tank_commanders }
		x = 1
		y = 1
		relative_position_id = PER_train_tank_commanders
		mutually_exclusive = { focus = PER_every_man_serves }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {
			army_experience = 50
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_ideas = PER_military_excellency_idea
		}
	}

	focus = { #ARMY
		id = PER_special_units
		icon = GFX_goal_generic_special_forces
		prerequisite = { focus = PER_restructure_army }
		x = 12
		y = 1
		relative_position_id = PER_restructure_army
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_special_units_division_idea 
			}
		}
	}

	focus = { #ARMY
		id = PER_form_savak
		icon = GFX_focus_PER_form_savak
		prerequisite = { focus = PER_special_units }
		x = -2
		y = 1
		relative_position_id = PER_special_units
		cost = 5

		bypass = {
			
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = PER_savak_lar
				if = {
					limit = {
						has_intelligence_agency = no
					}

					create_intelligence_agency = {
						name = "SAVAK"
						icon = GFX_intelligence_agency_logo_PER_savak
					}
				}
				else = {
					add_stability = 0.05
				}
				PER_teymur_bakhtiar_operative = yes
				PER_hassan_pakravan_operative = yes	
			}
			else = {
				if = {
					limit = {
						NOT = { has_completed_focus = PER_form_savama }
					}
					add_ideas = PER_savak_idea_no_lar
				}
				else = {
					add_stability = 0.05
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_fund_state_intelligence
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = PER_form_savak }
		x = 0
		y = 1
		relative_position_id = PER_form_savak
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "La Resistance"
				}
				IF = {
					limit = { has_intelligence_agency = no }

					create_intelligence_agency = yes
				}

				ELSE = {

					IF = {
						limit = {
							NOT = {
								has_done_agency_upgrade = upgrade_economy_civilian 
							}
						}
						upgrade_intelligence_agency = upgrade_economy_civilian 
					}
					ELSE_IF = {
						limit = {
							NOT = {
								has_done_agency_upgrade = upgrade_training_centers 
							}
						}
						upgrade_intelligence_agency = upgrade_training_centers 
					}
					ELSE_IF = { #There are 4 of these, this is as good of a fallback as we canget without code support
						limit = {
							NOT = {
								has_done_agency_upgrade =upgrade_passive_defense
							}
						}
						upgrade_intelligence_agency = upgrade_passive_defense
					}	
				}
			}

			ELSE = {
				add_ideas = PER_fund_state_intelligence_idea
			}
		}
	}

	focus = { #ARMY
		id = PER_transfer_officers_to_intelligence
		icon = GFX_focus_SWI_embrace_rote_drei
		prerequisite = { focus = PER_form_savak }
		x = -2
		y = 1
		relative_position_id = PER_form_savak
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = PER_transfer_officer_idea_lar
				PER_nematollah_nassiri_operative = yes
				PER_nasser_moghaddam_operative = yes
			}
			ELSE = {
				add_ideas = PER_transfer_officer_idea_no_lar
			}
		}
	}

	focus = { #ARMY
		id = PER_special_forces_program
		icon = GFX_focus_PER_special_forces_program
		prerequisite = { focus = PER_special_units }
		x = 2
		y = 1
		relative_position_id = PER_special_units
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_potential_special_forces_tree = yes
				add_doctrine_cost_reduction = {
					name = PER_special_units_boost
					cost_reduction = 0.25
					uses = 1
					category = special_forces_doctrine
				}
			}
			ELSE = {
				custom_effect_tooltip = PER_modify_special_forces_ns_intro
				add_to_variable = {
					PER_special_units_special_forces = 	0.1 tooltip = special_forces_cap_tt
				}
				add_to_variable = {
					PER_spec_force_training = -0.1 	tooltip = special_forces_training_time_factor_tt
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_recruit_bakhtiari
		icon = GFX_focus_PER_recruit_bakhtiari
		prerequisite = { focus = PER_special_forces_program }
		x = 0
		y = 1
		relative_position_id = PER_special_forces_program
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = { NOT = { has_tech = tech_mountaineers }}
				set_technology = { tech_mountaineers = 1 }
			}
			ELSE_IF = {
				limit = { NOT = { has_tech = tech_mountaineers2 }}
				set_technology = { tech_mountaineers2 = 1 }
			}
			ELSE_IF = {
				limit = { NOT = { has_tech = tech_mountaineers3 }}
				set_technology = { tech_mountaineers3 = 1 }
			}
	
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_doctrine_cost_reduction = {
					name = PER_bakhtiari_boost
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_expand_unique_unit
		icon = GFX_focus_PER_expand_unique_unit
		prerequisite = { focus = PER_special_forces_program }
		x = 2
		y = 1
		relative_position_id = PER_special_forces_program
		cost = 10
		
		available = {
			has_completed_focus = PER_establish_special_unit
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = { FOCUS_FILTER_MANPOWER }

		completion_reward = {
			custom_effect_tooltip = PER_expand_immortal_legion_tt

				hidden_effect = {
	
					266 = { 
					create_unit = {
					    division = "name = \"Fourth Immortal Legion\" 	division_template = \"Immortal Legion\" 	start_experience_factor = 2.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
					    division = "name = \"Fifth Immortal Legion\" 	division_template = \"Immortal Legion\" 	start_experience_factor = 2.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
					    division = "name = \"Sixth Immortal Legion\" 	division_template = \"Immortal Legion\" 	start_experience_factor = 2.0 start_equipment_factor = 1"
					    owner = ROOT
					}
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_import_rocketry
		icon = GFX_focus_rocketry
		prerequisite = { focus = PER_special_units }
		x = 0
		y = 3
		relative_position_id = PER_special_units
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = secret_bonus
				ahead_reduction = 2
				category = rocketry
			}
			add_tech_bonus = {
				name = secret_bonus
				bonus = 0.5
				uses = 2
				category = rocketry
			}
		}
	}

	focus = {
		id = PER_cyrus_initiative
		icon = GFX_focus_PER_cyrus_initiative
		prerequisite = { focus = PER_import_rocketry }
		x = -2
		y = 1
		relative_position_id = PER_import_rocketry
		cost = 10
		
		available = {
	
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				limit = {
					NOT = { has_facility_specialization = specialization_land }
				}
				if = {
					limit = {
						266 = {
							is_fully_controlled_by = ROOT
							can_construct_building = land_facility
						}
					}
					266 = {
						add_building_construction = {
							type = land_facility
							level = 1
							instant_build = yes
							province = 10768
						}
					}
				}
				else = {
					random_owned_controlled_state = {
						limit = {
							can_construct_building = land_facility
						}
						construct_building_in_random_province = {
							land_facility = 1
						}
					}
				}
			}
		}
	}

	focus = { #ARMY
		id = PER_negotiate_with_america
		icon = GFX_focus_generic_befriend_usa
		prerequisite = { focus = PER_import_rocketry }
		prerequisite = { focus = PER_strategic_bombing }
		x = 2
		y = 1
		relative_position_id = PER_import_rocketry
		cost = 10

		available = {
			#PER = {
				#NOT = {
				#	has_completed_focus = PER_writing_on_wall
				#}
			#}

			USA = {
				has_government = democratic
				has_opinion = {
					target = ROOT
					value > 69
				}
				has_completed_focus = USA_manhattan_project 
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
				add_tech_bonus = {
					name = nuclear_bonus
					bonus = 0.5
					uses = 1
					category = nuclear
			}
		}
	}

	focus = { #ARMY
		id = PER_establish_nuclear_program
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = PER_negotiate_with_america }
		x = 0
		y = 1
		relative_position_id = PER_negotiate_with_america
		cost = 10

		available = {
			num_of_owned_factories > 50
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
				name = PER_nuclear_program
				bonus = 1
				uses = 1
				category = nuclear
			}
		}
	}

	################################
	####### AIRFORCE BRANCH ########
	################################

	focus = { #AIRFORCE
		id = PER_establish_airforce
		icon = GFX_focus_PER_establish_airforce
		x = 55
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			air_experience = 25

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
			limit = {
				air_base < 5
				is_owned_and_controlled_by = ROOT

			}

			add_building_construction = {
				type = air_base
				level = 1
				instant_build = yes
			}
		}
		}
	}

	focus = { #AIRFORCE
		id = PER_pilot_training
		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = PER_establish_airforce }
		x = -3
		y = 1
		relative_position_id = PER_establish_airforce
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			air_experience = 25
			add_dynamic_modifier = {
				modifier = PER_airforce_modifier
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_raf_planes
		icon = GFX_focus_PER_raf_planes
		prerequisite = { focus = PER_pilot_training }
		x = -1
		y = 1
		relative_position_id = PER_pilot_training
		mutually_exclusive = { focus = PER_luftwaffe_planes }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		completion_reward = {
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = small_plane_airframe
					seller_tags = { ENG } 
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = medium_plane_airframe
					seller_tags = { ENG } 
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = large_plane_airframe
					seller_tags = { ENG } 
				}

				custom_effect_tooltip = generic_skip_one_line_tt
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				add_equipment_to_stockpile = {
					type = small_plane_airframe_0
					amount = 25
					producer = ENG
				}	
				add_equipment_to_stockpile = {
					type = small_plane_cas_airframe_0
					amount = 25
					producer = ENG
				}	
				add_equipment_to_stockpile = {
					type = medium_plane_airframe_0
					amount = 25
					producer = ENG
				}	
			}
			else = {
				add_equipment_to_stockpile = {
					type = fighter_equipment_0
					amount = 25
					producer = ENG
				}
				add_equipment_to_stockpile = {
					type = CAS_equipment_1
					amount = 25
					producer = ENG
				}
				add_equipment_to_stockpile = {
					type = tac_bomber_equipment_0
					amount = 25
					producer = ENG
				}
			}
		}	
	}

	focus = { #AIRFORCE
		id = PER_luftwaffe_planes
		icon = GFX_focus_PER_luftwaffe_planes
		prerequisite = { focus = PER_pilot_training }
		x = 1
		y = 1
		relative_position_id = PER_pilot_training
		mutually_exclusive = { focus = PER_raf_planes }
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INTERNATIONAL_TRADE
		}

		completion_reward = {
			
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = small_plane_airframe
					seller_tags = { GER } 
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = medium_plane_airframe
					seller_tags = { GER } 
				}
				add_equipment_subsidy = {
					cic = 1000
					equipment_type = large_plane_airframe
					seller_tags = { GER } 
				}

				custom_effect_tooltip = generic_skip_one_line_tt
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				add_equipment_to_stockpile = {
					type = small_plane_airframe_0
					amount = 25
					producer = GER
				}	
				add_equipment_to_stockpile = {
					type = small_plane_cas_airframe_0
					amount = 25
					producer = GER
				}	
				add_equipment_to_stockpile = {
					type = medium_plane_airframe_0
					amount = 25
					producer = GER
				}	
			}
			else = {
				add_equipment_to_stockpile = {
					type = fighter_equipment_0
					amount = 25
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = CAS_equipment_1
					amount = 25
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = tac_bomber_equipment_0
					amount = 25
					producer = GER
				}
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_establish_air_academy
		icon = GFX_goal_generic_build_airforce
		prerequisite = { focus = PER_luftwaffe_planes focus = PER_raf_planes }
		x = 1
		y = 1
		relative_position_id = PER_raf_planes
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_ace_generation_chance_factor = 0.15 tooltip = air_ace_generation_chance_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_doctrine_cost_factor = -0.1 tooltip = air_doctrine_cost_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_own_plane_designs
		icon = GFX_goal_generic_air_production
		prerequisite = { focus = PER_luftwaffe_planes focus = PER_raf_planes }
		x = 1
		y = 1
		relative_position_id = PER_luftwaffe_planes
		cost = 5

		ai_will_do = {
			factor = 15
		}

		search_filters = { FOCUS_FILTER_INDUSTRY }

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_army_modifier_industrial_capacity_factory_airfoce = 0.05 tooltip = industrial_capacity_factory_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_strategic_bombing
		icon = GFX_focus_SWE_marauder_bombers
		prerequisite = {  focus = PER_establish_air_academy }
		x = 0
		y = 1
		relative_position_id = PER_establish_air_academy
		mutually_exclusive = { focus = PER_battlefield_support focus = PER_air_superiority }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_range_factor = 0.2 tooltip = air_range_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_strategic_bomber_bombing_factor = 0.2 tooltip = air_strategic_bomber_bombing_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_legacy_of_gilani
		icon = GFX_focus_PER_legacy_of_gilani
		prerequisite = { focus = PER_establish_air_academy }
		x = -2
		y = 1
		relative_position_id = PER_establish_air_academy
		cost = 5
		
		available = {
			#NOT = {
			#	has_completed_focus = PER_writing_on_wall
			#}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			set_rule = {
			can_generate_female_aces = yes
			}

			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_conscription_factor = 0.1 tooltip = conscription_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_ace_generation_chance_factor = 0.05 tooltip = air_ace_generation_chance_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_construct_air_bases
		icon = GFX_focus_generic_air_bases
		prerequisite = { focus = PER_establish_airforce }
		x = 3
		y = 1
		relative_position_id = PER_establish_airforce
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
			limit = {
				air_base < 5

				is_owned_and_controlled_by = ROOT
			}
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
			random_core_state = {
			limit = {
				air_base < 5
				is_owned_and_controlled_by = ROOT
			}
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_anti_air_development
		icon = GFX_focus_generic_air_defense
		prerequisite = { focus = PER_anti_air_research }
		x = 0
		y = 2
		relative_position_id = PER_construct_air_bases
		cost = 10

		available = {
		
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIR_XP FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			air_experience = 25
			add_tech_bonus = {
				name = radar_focus
				bonus = 1.0
				uses = 1
				category = radar_tech
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_anti_air_research
		icon = GFX_focus_SWE_let_fly_all_guns
		prerequisite = { focus = PER_construct_air_bases }
		x = 0
		y = 1
		relative_position_id = PER_construct_air_bases
		cost = 10

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_anti_air_research_boost
			bonus = 0.5
			uses = 2
			category = cat_anti_air
			}

			add_tech_bonus = {
			name = PER_anti_air_research_boost
			bonus = 0.5
			uses = 1
			category = radar_tech
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_air_superiority
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = PER_establish_air_academy focus = PER_anti_air_development }
		x = 0
		y = 2
		relative_position_id = PER_anti_air_research
		mutually_exclusive = { focus = PER_battlefield_support focus = PER_strategic_bombing }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_superiority_efficiency = 0.1 tooltip = air_superiority_efficiency_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_intercept_efficiency = 0.05 tooltip = air_intercept_efficiency_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_agility_factor = 0.1 tooltip = air_agility_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_battlefield_support
		icon = GFX_focus_generic_cas_aircraft
		prerequisite = { focus = PER_establish_air_academy }
		x = -3
		y = 2
		relative_position_id = PER_anti_air_research
		mutually_exclusive = { focus = PER_strategic_bombing focus = PER_air_superiority }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_superiority_efficiency = 0.05 tooltip = air_superiority_efficiency_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_cas_present_factor = 0.1 tooltip = air_cas_present_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_ground_attack_factor = 0.05 tooltip = ground_attack_factor_tt
			}
		}
	}

	focus = { #AIRFORCE
		id = PER_perfect_iranian_airforce
		icon = GFX_focus_PER_perfect_iranian_airforce
		prerequisite = { focus = PER_air_superiority focus = PER_strategic_bombing focus = PER_battlefield_support}
		x = 0
		y = 1
		relative_position_id = PER_battlefield_support
		cost = 10

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			air_experience = 50

			add_doctrine_cost_reduction = {
				name = SMB_air_doctrine
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
			custom_effect_tooltip = PER_modify_iranian_airforce_ns_intro
			add_to_variable = {
				PER_airforce_modifier_air_range_factor = 0.05 tooltip = air_range_factor_tt
			}
			add_to_variable = {
				PER_airforce_modifier_air_defence_factor = 0.15 tooltip = air_defence_factor_tt
			}
		}
	}

	################################
	######### NAVY BRANCH ##########
	################################

	focus = { #NAVY
		id = PER_establish_the_navy
		icon = GFX_focus_PER_establish_the_navy
		x = 63
		y = 0
		relative_position_id = PER_modernizing_iran
		cost = 5

		ai_will_do = {
			factor = 10
			modifier = {
				any_controlled_state = {
					is_coastal = no
				}
				factor = 0	
			}
		}

		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				is_coastal = yes
			}
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			navy_experience = 25

			random_core_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
	
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #NAVY
		id = PER_officers_to_italy
		icon = GFX_focus_generic_naval_discipline
		prerequisite = { focus = PER_establish_the_navy }
		x = -2
		y = 1
		relative_position_id = PER_establish_the_navy
		cost = 10
		
		available = {
			ITA = {
				exists = yes
				NOT = {
					has_war_with = ROOT
				}
			}
		}

		bypass = {
			ITA = {
				OR = {
					exists = no
					has_war_with = ROOT
				}
			}
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			custom_effect_tooltip = PER_naval_academy_random_admirals_tt
			navy_experience = 20
			hidden_effect = {
				random_navy_leader = {
					limit = {
						NOT = { has_character_flag = PER_officers_to_italy_boost }
					}
					add_coordination = 1
					set_character_flag = PER_officers_to_italy_boost
				}
				random_navy_leader = {
					limit = {
						NOT = { has_character_flag = PER_officers_to_italy_boost }
					}
					add_coordination = 1
					set_character_flag = PER_officers_to_italy_boost
				}
				random_navy_leader = {
					limit = {
						NOT = { has_character_flag = PER_officers_to_italy_boost }
					}
					add_coordination = 1
					set_character_flag = PER_officers_to_italy_boost
				}
			}
		}
	}

	focus = { 
		id = PER_persian_gulf_fleet
		icon = GFX_focus_PER_persian_gulf_fleet
		prerequisite = { focus = PER_officers_to_italy focus = PER_construct_naval_bases }
		x = 0
		y = 1
		relative_position_id = PER_officers_to_italy
		mutually_exclusive = { focus = PER_bolster_the_caspian }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = PER_sea_specialization
				cost_reduction = 0.5
				uses = 1
				category = cat_trade_interdiction
			}
		}
	}

	focus = { #NAVY
		id = PER_construct_naval_bases
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = PER_establish_the_navy }
		x = 2
		y = 1
		relative_position_id = PER_establish_the_navy
		cost = 10
		
		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				is_coastal = yes
			}
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
	
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}

		random_core_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
	
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { 
		id = PER_coastal_defense_initiative
		icon = GFX_focus_FIN_coastal_defense
		prerequisite = { focus = PER_construct_naval_bases }
		x = 2
		y = 1
		relative_position_id = PER_construct_naval_bases
		cost = 5

		ai_will_do = {
			factor = 15
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_coastal_fortifications_idea
				days = 365
			}
		}
	}

	focus = { 
		id = PER_bolster_the_caspian
		icon = GFX_focus_PER_bolster_the_caspian
		prerequisite = { focus = PER_construct_naval_bases focus = PER_officers_to_italy }
		x = 0
		y = 1
		relative_position_id = PER_construct_naval_bases
		mutually_exclusive = { focus = PER_persian_gulf_fleet }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = PER_sea_specialization
				cost_reduction = 0.5
				uses = 1
				category = cat_base_strike
			}
		}
	}

	focus = { #NAVY
		id = PER_purchase_foreign_ships
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = PER_bolster_the_caspian focus = PER_persian_gulf_fleet }
		x = 2
		y = 1
		relative_position_id = PER_persian_gulf_fleet
		cost = 10

		ai_will_do = {
			factor = 10
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = ETH_purchase_obsolete_ships_tt
			set_country_flag = generic_purchase_old_ships_flag
		}
	}

	focus = { #NAVY
		id = PER_found_iranian_shipyards
		icon = GFX_focus_POL_develop_polish_shipbuilding
		prerequisite = { focus = PER_purchase_foreign_ships }
		x = 0
		y = 1
		relative_position_id = PER_purchase_foreign_ships
		cost = 10

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = PER_iranian_shipyards_organization
				mio:PER_iranian_shipyards_organization = {
					add_mio_size = 2
				}
			}
			else = {
				if = {
					limit = {
						has_idea = PER_iranian_shipyards
					}
					swap_ideas = {
						remove_idea = PER_iranian_shipyards
						add_idea = PER_iranian_shipyards_improved
					}
				}
				else = {
					effect_tooltip = {
						swap_ideas = {
							remove_idea = PER_iranian_shipyards
							add_idea = PER_iranian_shipyards_improved
						}
					}
				}
			}
		}
	}

	focus = { #NAVY
		id = PER_expand_dockyards
		icon = GFX_focus_generic_refit_civilian_ships
		prerequisite = { focus = PER_found_iranian_shipyards }
		x = 0
		y = 1
		relative_position_id = PER_found_iranian_shipyards
		cost = 10

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = { 
					is_coastal = yes 
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					#has_state_flag = SMB_expanded_naval_bases
				}
				IF = {
					limit = { naval_base < 8 }
					add_building_construction = {
						type = naval_base
						level = 1
						instant_build = yes
							province = {
								all_provinces = yes
								limit_to_coastal = yes
						    }
					}
				}
				IF = {
					limit = { 
						dockyard < 8
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					
				}
			}
		}
	}

	focus = { #NAVY
		id = PER_merchant_navy
		icon = GFX_focus_generic_merchant_fleet
		prerequisite = { focus = PER_expand_dockyards }
		x = -2
		y = 1
		relative_position_id = PER_expand_dockyards
		mutually_exclusive = { focus = PER_expert_raiders }
		cost = 10

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			add_ideas = POR_convoy_build_efficiency
		}
	}

	focus = { #NAVY
		id = PER_expert_raiders
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = PER_expand_dockyards }
		x = 2
		y = 1
		relative_position_id = PER_expand_dockyards
		mutually_exclusive = { focus = PER_merchant_navy }
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		search_filters = {

		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				name = PER_raiding_fleet_boost
				cost_reduction = 0.5
				uses = 2
				category = trade_interdiction_tree
			}
		}
	}

	################################
	###### HISTORICAL BRANCH #######
	################################

	focus = { #HISTORICAL
		id = PER_the_pahlavi_imperium
		icon = GFX_focus_PER_the_pahlavi_imperium
		x = -35
		y = 0
		relative_position_id = PER_modernizing_iran
		mutually_exclusive = { focus = PER_rally_the_reformers }
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_rally_the_reformers
				}
			}
		}

		offset = {
		    x = 8
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_legacy_of_greatness
		    }
		}

		offset = {
		    x = 18
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_stand_with_giants
		    }
		}

		ai_will_do = {
			factor = 80
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_HISTORICAL
		}

		completion_reward = {
			add_political_power = 80
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_stand_with_giants
		icon = GFX_focus_PER_stand_with_giants
		prerequisite = { focus = PER_the_pahlavi_imperium }
		x = -6
		y = 1
		relative_position_id = PER_the_pahlavi_imperium
		mutually_exclusive = { focus = PER_legacy_of_greatness }
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_legacy_of_greatness
					has_completed_focus = PER_rally_the_reformers
				}
			}
		}

		offset = {
		    x = 6
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_stand_with_giants
		    }
		}

		ai_will_do = {
			factor = 80
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_HISTORICAL
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_stand_with_giants_modifier
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_forced_secularization
		icon = GFX_focus_PER_forced_secularization
		prerequisite = { focus = PER_stand_with_giants focus = PER_legacy_of_greatness }
		x = 0
		y = 2
		relative_position_id = PER_the_pahlavi_imperium
		cost = 10
		
		available = {
			NOT = {
				has_completed_focus = PER_the_unification_initiative
			}
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		offset = {
		    x = -4
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_legacy_of_greatness
		    }
		}

		offset = {
		    x = 5
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_stand_with_giants
		    }
		}

		ai_will_do = {
			factor = 80
		}

		search_filters = {
			FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = PER_islamic_traditions_ns
  				add_idea = PER_secularized_state_idea 
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_increase_education_funding
		icon = GFX_focus_generic_university_2
		prerequisite = { focus = PER_stand_with_giants }
		x = -5
		y = 1
		relative_position_id = PER_stand_with_giants
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_research = 0.02
				tooltip = research_speed_factor_tt
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_tech_bonus = {
			name = PER_increase_education_funding_bonus
			bonus = 0.25
			uses = 2
			category = electronics
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_open_abadan
		icon = GFX_focus_research
		prerequisite = { focus = PER_increase_education_funding }
		x = 0
		y = 1
		relative_position_id = PER_increase_education_funding
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = { #HISTORICAL
		id = PER_trial_fifty_three
		icon = GFX_focus_GER_end_european_communism
		prerequisite = { focus = PER_stand_with_giants }
		x = -3
		y = 1
		relative_position_id = PER_stand_with_giants
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_trial_fifty_three_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_ideas = PER_trial_fifty_three_idea
		}
	}

	focus = { #HISTORICAL
		id = PER_persian_german_trade
		icon = GFX_goal_generic_positive_trade_relations
		prerequisite = { focus = PER_stand_with_giants }
		x = -1
		y = 1
		relative_position_id = PER_stand_with_giants
		cost = 5
		
		available = {
			has_government = neutrality
			GER = {
				has_government = fascism
				exists = yes
			}
		}

		bypass = {
			GER = {
				OR = {
					NOT = {
					has_government = fascism
				}
				exists = no
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			GER = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			PER = {
				add_opinion_modifier = {
				target = GER
				modifier = large_increase
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_ideas = PER_persian_german_trade_idea
			GER = {
				add_ideas = PER_persian_german_trade_idea_2
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_increase_military_funding
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = PER_stand_with_giants }
		x = 1
		y = 1
		relative_position_id = PER_stand_with_giants
		cost = 10
		
		available = {
			has_government = neutrality
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 2
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 2
					    include_locked = yes
					}
				}
			}
		}

		ai_will_do = {
			factor = 50
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			army_experience = 50

			custom_effect_tooltip = CHL_skip_one_line_tt

			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_royal_visit_germany
		icon = GFX_focus_generic_monarchy_2
		prerequisite = { focus = PER_persian_german_trade }
		x = 0
		y = 1
		relative_position_id = PER_persian_german_trade
		cost = 5
		
		available = {
			has_government = neutrality
			GER = {
				has_government = fascism
				exists = yes
			}
		}

		bypass = {
			GER = {
				OR = {
					NOT = {
					has_government = fascism
				}
				exists = no
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {

			GER = {
				country_event = {
					id = PER_imperial_events.70
					hours = 1
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_acceptance_ger_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_pp = 0.02
				tooltip = political_power_factor_tt
			}
			add_to_variable = { 
				PER_giants_stability = 0.02
				tooltip = stability_factor_tt
			}		
		}
	}

	focus = { #HISTORICAL
		id = PER_military_high_schools
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = PER_increase_military_funding }
		x = 0
		y = 1
		relative_position_id = PER_increase_military_funding
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_ARMY_XP
			FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			custom_effect_tooltip = PER_add_organizer_trait_tt 
			hidden_effect = {
				random_army_leader = {
					add_unit_leader_trait = organizer	
				}
				random_army_leader = {		
					add_unit_leader_trait = organizer
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

				army_experience = 50
		}
	}

	focus = { #HISTORICAL
		id = PER_wether_the_storm
		icon = GFX_focus_PER_wether_the_storm
		prerequisite = { focus = PER_royal_visit_germany focus = PER_military_high_schools }
		x = 1
		y = 2
		relative_position_id = PER_royal_visit_germany
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_idea = extensive_conscription
						has_idea = service_by_requirement
						has_idea = all_adults_serve
						has_idea = scraping_the_barrel
					}
				}
				add_ideas = extensive_conscription
			}
			else = {
				add_political_power = 150
			}
			add_war_support = 0.05
		}
	}

	focus = { #HISTORICAL
		id = PER_question_of_resources
		icon = GFX_focus_generic_resource_extraction
		prerequisite = { focus = PER_wether_the_storm }
		x = -2
		y = 1
		relative_position_id = PER_wether_the_storm
		mutually_exclusive = { focus = PER_stand_our_ground }
		cost = 5
		
		available = {
			has_government = neutrality
			has_war = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			IF = {
				limit = {
					has_idea = PER_anglo_iranian_oil_ns
				}
				remove_ideas = PER_anglo_iranian_oil_ns
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			add_ideas = limited_exports
		}
	}

	focus = { #HISTORICAL
		id = PER_prepare_for_worst
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = PER_question_of_resources }
		x = 1
		y = 1
		relative_position_id = PER_question_of_resources
		cost = 10
		
		available = {
			has_government = neutrality
			has_war = no
			any_state = {
				is_owned_by = ROOT
				is_controlled_by = ROOT
				free_building_slots = {
				    building = arms_factory
				    size > 1
				    include_locked = yes
				}
			}
		}

		bypass = {
			NOT = {
				any_state = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
					free_building_slots = {
					    building = arms_factory
					    size > 1
					    include_locked = yes
					}
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {

			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt	

			1004 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 7573
					instant_build = yes
				}
			}

			410 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 13082
					instant_build = yes
				}
			}

			custom_effect_tooltip = CHL_skip_one_line_tt	

			420 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 10454
					}
					instant_build = yes
				}
			}

			1000 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 4755
					}
					instant_build = yes
				}
			}

			419 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 1636
					}
					instant_build = yes
				}
			}

			266 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 7602
					}
					instant_build = yes
				}
			}

			416 = {
				add_building_construction = {
					type = bunker
					level = 1
					province = {
						id = 5029
					}
					instant_build = yes
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_plant_resistance_cells
		icon = GFX_focus_ETH_freedom_at_gunpoint
		prerequisite = { focus = PER_question_of_resources }
		x = -1
		y = 1
		relative_position_id = PER_question_of_resources
		cost = 10
		
		available = {
			has_government = neutrality
			has_war = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_resistance_decisions_tt
		}
	}

	focus = { #HISTORICAL
		id = PER_preemptive_strike
		icon = GFX_focus_generic_total_war
		prerequisite = { focus = PER_plant_resistance_cells focus = PER_prepare_for_worst }
		x = 1
		y = 1
		relative_position_id = PER_plant_resistance_cells
		cost = 5
		
		available = {	
			has_government = neutrality
			has_war = no
			IRQ = {
				exists = yes
			}

			SOU = {
				exists = yes
			}
		}

		bypass = {
			IRQ = {
				exists = no
			}

			SOU = {
				exists = no
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {

			add_timed_idea = {
				idea = PER_preemtive_strike_idea
				days = 730
			}

			custom_effect_tooltip = CHL_skip_one_line_tt

			create_wargoal = {
					type = puppet_wargoal_focus
					target = IRQ
				}

			create_wargoal = {
					type = take_state
					target = SOU
					generator = { 229 230 231 584 }
				}
			}
		}

	focus = { #HISTORICAL
		id = PER_establish_northern_buffer_states
		icon = GFX_focus_PER_establish_northern_buffer_states
		prerequisite = { focus = PER_preemptive_strike }
		x = 0
		y = 1
		relative_position_id = PER_preemptive_strike
		cost = 5
		
		available = {
			has_government = neutrality
			PER = {
				controls_state = 229
				controls_state = 230
				controls_state = 231
				controls_state = 584
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
	
			SOU = {
					country_event = {
						id = PER_imperial_events.110
						hours = 1
					}
				}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_buffer_state_tt
			custom_effect_tooltip = CHL_skip_one_line_tt

			hidden_effect = {
				420 = {
					remove_core_of = AZR
				}

				1000 = {
					remove_core_of = AZR
				}

				419 = {
					remove_core_of = AZR
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_stand_our_ground
		icon = GFX_goal_generic_defence
		prerequisite = { focus = PER_wether_the_storm }
		x = 2
		y = 1
		relative_position_id = PER_wether_the_storm
		mutually_exclusive = { focus = PER_question_of_resources }
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_conscription = 0.05
				tooltip = conscription_factor_tt
			}
			add_to_variable = { 
				PER_giants_factory_efficiency = 0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			add_to_variable = { 
				PER_giants_industrial_capacity_factory = 0.05
				tooltip = industrial_capacity_factory_tt
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_bolster_civilian_industry
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = PER_stand_our_ground }
		x = -1
		y = 1
		relative_position_id = PER_stand_our_ground
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
						}
	
					is_owned_and_controlled_by = ROOT
	
				}
	
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_upscale_military_production
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = PER_stand_our_ground }
		x = 1
		y = 1
		relative_position_id = PER_stand_our_ground
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
						}
	
					is_owned_and_controlled_by = ROOT
	
				}
	
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_preparatory_mobilization
		icon = GFX_focus_generic_limited_social_mobilization
		prerequisite = { focus = PER_upscale_military_production focus = PER_bolster_civilian_industry }
		x = 1
		y = 1
		relative_position_id = PER_bolster_civilian_industry
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY 
		}

		completion_reward = {
			custom_effect_tooltip = PER_stand_with_giants_tt
	
			add_to_variable = { 
				PER_giants_mils = 0.05
				tooltip = production_speed_arms_factory_factor_tt
			}
			add_to_variable = { 
				PER_giants_training_time = -0.05
				tooltip = training_time_factor_tt
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_we_will_survive
		icon = GFX_focus_PER_we_will_survive
		prerequisite = { focus = PER_preparatory_mobilization }
		x = 0
		y = 1
		relative_position_id = PER_preparatory_mobilization
		cost = 5
		
		available = {
			has_government = neutrality
			has_war = yes
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			add_country_leader_trait = PER_savior_of_iran
		}
	}

	################################
	######## SAADABAD PACT #########
	################################

	shared_focus = SSB_the_saadabad_pact

	################################
	####### DEFENCE OF IRAN ########
	################################

	focus = { #DEFENCE
		id = PER_fight_for_iran
		icon = GFX_focus_PER_fight_for_iran
		x = -52
		y = 1
		relative_position_id = PER_modernizing_iran
		cost = 0
		
		available = {
			has_defensive_war = yes
			has_civil_war = no
		}

		cancel_if_invalid = yes

		bypass = {

		}

		allow_branch = {

		}

        offset = {
            x = 11
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_rally_the_reformers
            }
        }

        offset = {
            x = 13
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                OR = {
                	has_completed_focus = PER_rally_behind_mosaddegh
                	has_completed_focus = PER_iranian_culture
                	has_completed_focus = PER_united_progressive_parties
                }
            }
        }

        offset = {
            x = 15
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_legacy_of_greatness
            }
        }

        offset = {
            x = 23
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_stand_with_giants
            }
        }


		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			add_timed_idea = {
 				idea = PER_homeland_not_fall_idea
 				days = 180
 			}
 			custom_effect_tooltip = CHL_skip_one_line_tt
 			add_manpower = 10000
		}
	}

	focus = { #DEFENCE
		id = PER_force_them_back
		icon = GFX_focus_generic_provoke_border_clashes
		x = -2
		y = 1
		prerequisite = { focus = PER_fight_for_iran }
		mutually_exclusive =  { focus = PER_dig_and_defend }
		relative_position_id = PER_fight_for_iran
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		cancel_if_invalid = yes

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = { has_completed_focus = PER_dig_and_defend }
				
			}
		}

		offset = {
			x = 2
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
				has_completed_focus = PER_force_them_back 
			}
		}

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_offensive_tactics_modifier
			}

			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #DEFENCE
		id = PER_dig_and_defend
		icon = GFX_goal_generic_more_territorial_claims
		x = 2
		y = 1
		prerequisite = { focus = PER_fight_for_iran }
		mutually_exclusive =  { focus = PER_force_them_back }
		relative_position_id = PER_fight_for_iran
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		cancel_if_invalid = yes

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = { has_completed_focus = PER_force_them_back }
				
			}
		}

		offset = {
			x = -2
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
				has_completed_focus = PER_dig_and_defend
			}
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_defensive_maneuvers_modifier
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #DEFENCE
		id = PER_push_to_deserts
		icon = GFX_focus_PER_push_to_deserts
		x = -1
		y = 1
		prerequisite = { focus = PER_force_them_back }
		mutually_exclusive = { focus = PER_push_to_mountains }
		relative_position_id = PER_force_them_back
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {

		}

		completion_reward = {
			every_state = {
 				limit = {
 					OR = {
	 					state = 1003
			 			state = 418
			 			state = 416
			 			state = 1004
			 			state = 420
			 			state = 1000
			 			state = 419
			 		}
	 			}
	 			add_dynamic_modifier = {
	 				modifier = ETH_state_local_offensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_push_to_mountains
		icon = GFX_focus_PER_push_to_mountains
		x = 1
		y = 1
		prerequisite = { focus = PER_force_them_back }
		mutually_exclusive = { focus = PER_push_to_deserts }
		relative_position_id = PER_force_them_back
		cost = 5
		
		available = {
			has_defensive_war = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			every_state = {
 				limit = {
 					OR = {
	 					state = 413
			 			state = 411
			 			state = 412
			 			state = 1002
			 			state = 414
			 			state = 410
			 		}
	 			}
	 			add_dynamic_modifier = {
	 				modifier = ETH_state_local_offensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_capital_protect
		icon = GFX_goal_generic_fortify_city
		x = -1
		y = 1
		prerequisite = { focus = PER_dig_and_defend }
		mutually_exclusive = { focus = PER_secure_coastline }
		relative_position_id = PER_dig_and_defend
		cost = 5
		
		available = {
			266 = {
				is_owned_and_controlled_by = PER
			}
			has_defensive_war = yes
		}

		bypass = {
			266 = { NOT = { is_controlled_by = ROOT } }
			410 = { NOT = { is_controlled_by = ROOT } }
			412 = { NOT = { is_controlled_by = ROOT } }
			413 = { NOT = { is_controlled_by = ROOT } }
		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			every_state = {
 				limit = {
 					state = 266
	 			}
	 			add_dynamic_modifier = {
	 				modifier = PER_state_local_defensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
				add_building_construction = {
					type = bunker
					level = 2
					province = {
						id = 10837
					}
					instant_build = yes
				}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_secure_coastline
		icon = GFX_focus_FIN_coastal_defense
		x = 1
		y = 1
		prerequisite = { focus = PER_dig_and_defend }
		mutually_exclusive = { focus = PER_capital_protect }
		relative_position_id = PER_dig_and_defend
		cost = 5
		
		available = {
			has_defensive_war = yes
			count_triggers = {
				amount = 1 # Add triggers to count below
				410 = { is_owned_and_controlled_by = ROOT }
				412 = { is_owned_and_controlled_by = ROOT }
				413 = { is_owned_and_controlled_by = ROOT }
			}
		}

		bypass = {
			266 = { NOT = { is_controlled_by = ROOT } }
			410 = { NOT = { is_controlled_by = ROOT } }
			412 = { NOT = { is_controlled_by = ROOT } }
			413 = { NOT = { is_controlled_by = ROOT } }
		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			every_state = {
 				limit = {
 					OR = {
 						state = 410
 						state = 412
 						state = 413
 					}
	 			}
	 			add_dynamic_modifier = {
	 				modifier = PER_state_local_defensive_dynamic_modifier
	 				scope = PER
	 				days = 90
	 			}
	 		}
		}
	}

	focus = { #DEFENCE
		id = PER_demand_war_reparations
		icon = GFX_goal_generic_demand_territory
		x = 0
		y = 1
		prerequisite = { focus = PER_push_to_deserts focus = PER_push_to_mountains }
		mutually_exclusive = { focus = PER_force_white_peace }
		relative_position_id = PER_push_to_deserts
		cost = 5
		
		available = {
			has_defensive_war = yes
			any_war_score > 79
			surrender_progress < 0.05
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			
		}

		completion_reward = {
			custom_effect_tooltip = PER_reparations_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			every_enemy_country = {
				limit = {
					OR = {
						is_faction_leader = yes
						is_in_faction = no
					}
				}
				IF = {
					limit = {
						OR = {
							tag = AFG
							tag = IRQ
							tag = TUR
							tag = RAJ
							tag = SOU
							tag = ENG
						}
					}
					country_event = {
						id = PER_imperial_events.160
						hours = 1
					}
				}
				ELSE = {
					country_event = {
						id = PER_imperial_events.170
						hours = 1
					}
				}
			}
		}
	}

	focus = { #DEFENCE
		id = PER_force_white_peace
		icon = GFX_goal_generic_major_alliance
		x = 2
		y = 1
		prerequisite = { focus = PER_push_to_deserts focus = PER_push_to_mountains }
		mutually_exclusive = { focus = PER_demand_war_reparations }
		relative_position_id = PER_push_to_deserts
		cost = 5
		
		available = {
			has_defensive_war = yes
			any_war_score > 59
			surrender_progress < 0.15
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_white_peace_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			every_enemy_country = {
				limit = {
					OR = {
						is_faction_leader = yes
						is_in_faction = no
					}
				}
				country_event = {
					id = PER_imperial_events.150
					hours = 1
				}
			}
		}
	}

	focus = { #DEFENCE
		id = PER_swear_fealty
		icon = GFX_focus_CZE_german_puppet
		x = 0
		y = 1
		prerequisite = { focus = PER_capital_protect focus = PER_secure_coastline }
		mutually_exclusive = { focus = PER_push_negotiations }
		relative_position_id = PER_capital_protect
		cost = 5
		
		available = {
			has_defensive_war = yes
			surrender_progress > 0.15
		}

		bypass = {
			is_subject = yes
		}

		cancel_if_invalid = yes
		available_if_capitulated = yes 

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_swear_fealty_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			IF = {
				limit = {
					is_subject = no
				}
				every_enemy_country = {
					IF = {
						limit = {
							has_country_flag = PER_invading_country_flag
							NOT = { 
								OR = {
									has_global_flag = SOV_soviet_invasion_of_iran_flag
									has_global_flag = SOV_agreed_anglo_soviet_invasion_of_iran_flag
								}
							 }
						}
						country_event = {
							id = PER_imperial_events.180
							hours = 12
						}
					}
					ELSE_IF = {
						limit = {
							#has_country_flag = PER_operation_countenance_flag
							has_war_with = PER
							original_tag = ENG
						}
						country_event = {
							id = PER_imperial_events.120
							hours = 2
						}
					}
					ELSE_IF = {
						limit = {
							#has_country_flag = PER_operation_countenance_flag
							has_war_with = PER
							original_tag = SOV
						}
						country_event = {
							id = PER_imperial_events.130
							hours = 2
						}
					}
					ELSE_IF = {
						limit = {
							#has_country_flag = PER_operation_countenance_flag
							has_war_with = PER
							original_tag = SOV
							has_global_flag = SOV_soviet_invasion_of_iran_flag
						}
						country_event = {
							id = PER_imperial_events.120
							hours = 2
						}
					}
				}
			}
		}
	}

	focus = { #DEFENCE
		id = PER_push_negotiations
		icon = GFX_goal_generic_forceful_treaty
		x = 2
		y = 1
		prerequisite = { focus = PER_capital_protect focus = PER_secure_coastline }
		mutually_exclusive = { focus = PER_swear_fealty }
		relative_position_id = PER_capital_protect
		cost = 5
		
		available = {
			has_defensive_war = yes
			any_war_score > 39
			surrender_progress < 0.1
		}

		bypass = {

		}

		cancel_if_invalid = yes

		allow_branch = {

		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 20
				surrender_progress > 0.05
			}
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_push_negotiations_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			every_enemy_country = {
					limit = {
						OR = {
							is_faction_leader = yes
							is_in_faction = no
						}
					}
					country_event = {
						id = PER_imperial_events.190
						hours = 1
					}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_rebuilding_iran
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = PER_swear_fealty }
		x = 0
		y = 1
		relative_position_id = PER_swear_fealty
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				OR = {
					PER = {
						is_subject = yes
					}
					has_completed_focus = PER_rebuilding_iran
				}
			}
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_timed_idea = {
				idea = ETH_rebuilding_the_country_idea
				days = 128
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_declare_loyalty_to_britain
		icon = GFX_goal_tripartite_pact
		prerequisite = { focus = PER_rebuilding_iran }
		x = -2
		y = 1
		relative_position_id = PER_rebuilding_iran
		mutually_exclusive = { focus = PER_azadi }
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 5
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_autonomy_score = { 
				value = -500 
				localization = PER_declared_loyalty
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_ideas = PER_compliant_subject_idea
		}
	}

	focus = { #HISTORICAL
		id = PER_reinstate_qajars
		icon = GFX_focus_generic_monarchy_2
		prerequisite = { focus = PER_declare_loyalty_to_britain }
		x = -3
		y = 1
		relative_position_id = PER_declare_loyalty_to_britain
		cost = 10
		
		available = {
			PER = {
				is_subject_of = ENG
			}
		}

		bypass = {

		}

		allow_branch = {
			OR = {
				PER = {
					is_subject_of = ENG
				}
				has_completed_focus = PER_reinstate_qajars
			}
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_reinstate_qajars_tt
			PER = {
				country_event = {
					id = PER_imperial_events.230
					hours = 1
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_invite_british_investors
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = PER_declare_loyalty_to_britain }
		x = -1
		y = 1
		relative_position_id = PER_declare_loyalty_to_britain
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_political_power = 120
			add_offsite_building = { type = industrial_complex level = 2 }
		}
	}

	focus = { #HISTORICAL
		id = PER_request_british_equipment
		icon = GFX_focus_generic_commonwealth_build_infantry
		prerequisite = { focus = PER_declare_loyalty_to_britain }
		x = 1
		y = 1
		relative_position_id = PER_declare_loyalty_to_britain
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			IF = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_equipment_subsidy = {
					cic = 1500
					equipment_type = infantry_equipment
					seller_tags  = { overlord }
				}
				add_equipment_subsidy = {
					cic = 700
					equipment_type = artillery_equipment
					seller_tags  = { overlord }
				}
			}
			ELSE = {
				add_equipment_to_stockpile = { 
					type = infantry_equipment_1 
					amount = 2500  
					producer = PER
				}
				add_equipment_to_stockpile = { 
					type = artillery_equipment 
					amount = 500  
					producer = PER
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_our_place_in_empire
		icon = GFX_focus_PER_our_place_in_empire
		prerequisite = { focus = PER_request_british_equipment focus = PER_invite_british_investors }
		x = 1
		y = 1
		relative_position_id = PER_invite_british_investors
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {

			IF = {
				limit = {
					has_completed_focus = PER_reinstate_qajars
				}
				set_cosmetic_tag = PER_viceroyalty_of_persia
			}
			ELSE = {
				set_cosmetic_tag = PER_viceroyalty_of_iran
			}
			
			custom_effect_tooltip = CHL_skip_one_line_tt

			every_character = {
				limit = {
					is_country_leader = yes
				}
				if = {
					limit = {
						has_trait = PER_heistant_king_trait
					}
					remove_country_leader_trait = PER_heistant_king_trait
				}
				add_country_leader_trait = PER_complient_king
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_retake_north_iran
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = PER_our_place_in_empire focus = PER_iran_for_iranians }
		x = 1
		y = 1
		relative_position_id = PER_our_place_in_empire
		cost = 10
		
		available = {
			NOT = {
				has_war_with = SOU
			}
		}

		bypass = {

		}

		allow_branch = {
			has_global_flag = SOV_agreed_anglo_soviet_invasion_of_iran_flag
			has_completed_focus = PER_swear_fealty
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
					type = take_state
					target = SOU
					generator = { 420 419 416 1000 1001 1004 }
				}
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_timed_idea = {
				idea = PER_anti_soviet_idea
				days = 1095
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_azadi
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = PER_rebuilding_iran }
		x = 2
		y = 1
		relative_position_id = PER_rebuilding_iran
		mutually_exclusive = { focus = PER_declare_loyalty_to_britain }
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 95
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_autonomy_score = { 
				value = 200 
				localization = PER_azadi_autonomy_effect
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_ideas = PER_azadi_idea
			custom_effect_tooltip = CHL_skip_one_line_tt
			OVERLORD = {
				add_opinion_modifier = {
					target = ROOT 
					modifier = ETH_uncooperative_subject
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_reinforce_iranian_identity
		icon = GFX_focus_PER_reinforce_iranian_identity
		prerequisite = { focus = PER_azadi }
		x = -1
		y = 1
		relative_position_id = PER_azadi
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			add_political_power = 100
			add_war_support = 0.1
			add_stability = 0.05
			add_autonomy_ratio = {
				value = 0.2
				localization = PER_reinforced_identity
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_rally_bakhtiari_and_qashqai
		icon = GFX_focus_generic_full_social_mobilization
		prerequisite = { focus = PER_azadi }
		x = 1
		y = 1
		relative_position_id = PER_azadi
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {

		}

		completion_reward = {

			custom_effect_tooltip = PER_recruit_rebels_tt

			division_template = {
					name = "Bakhtiari Rebels"		
					is_locked = no
					template_counter = 4
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
    				    infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
				
					support = {
    				    engineer = { x = 0 y = 0 }
					}
					#division_cap = 0
					override_model = PER_militia_alt_1_entity
				}

				division_template = {
					name = "Qashqai Rebels"		
					is_locked = no
					template_counter = 4
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
    				    infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
				
					support = {
    				    engineer = { x = 0 y = 0 }
					}
					#division_cap = 0
					override_model = PER_militia_alt_1_entity
				}
				hidden_effect = {
					random_core_state = { 
					create_unit = {
						allow_spawning_on_enemy_provs = yes
					    division = "name = \"Bakhtiari Rebel Group 1\" 	division_template = \"Bakhtiari Rebels\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
						allow_spawning_on_enemy_provs = yes
					    division = "name = \"Bakhtiari Rebel Group 2\" 	division_template = \"Bakhtiari Rebels\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
						allow_spawning_on_enemy_provs = yes
					    division = "name = \"Qashqai Rebels Rebel Group 1\" 	division_template = \"Qashqai Rebels\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
						allow_spawning_on_enemy_provs = yes
					    division = "name = \"Qashqai Rebels Rebel Group 2\" 	division_template = \"Qashqai Rebels\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_iran_for_iranians
		icon = GFX_focus_PER_iran_for_iranians
		prerequisite = { focus = PER_rally_bakhtiari_and_qashqai focus = PER_reinforce_iranian_identity }
		x = 1
		y = 1
		relative_position_id = PER_reinforce_iranian_identity
		cost = 10
		
		available = {
			PER = {
				is_subject = yes
			}
		}

		bypass = {
			is_subject = no
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = ETH_negusa_nagast_tt
			IF = {
				limit = {
					is_subject = yes
				}
				OVERLORD = {
					country_event = {
						id = PER_imperial_events.140
						hours = 1 
					}
				}
			}
		}
	}

	focus = { #HISTORICAL
		id = PER_consolidate_british_territory
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = PER_iran_for_iranians }
		x = -1
		y = 1
		relative_position_id = PER_iran_for_iranians
		cost = 10
		
		available = {
			765 = {
				is_owned_and_controlled_by = PER
			}

			658 = {
				is_owned_and_controlled_by = PER
			}

			656 = {
				is_owned_and_controlled_by = PER
			}
		}

		bypass = {

		}

		allow_branch = {
			has_global_flag = SOV_agreed_anglo_soviet_invasion_of_iran_flag
			has_completed_focus = PER_swear_fealty
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			765 = {
				add_core_of = PER
			}

			658 = {
				add_core_of = PER
			}

			656 = {
				add_core_of = PER
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	################################
	####### IMPERIAL BRANCH ########
	################################

	focus = { #IMPERIAL
		id = PER_legacy_of_greatness
		icon = GFX_focus_PER_legacy_of_greatness
		prerequisite = { focus = PER_the_pahlavi_imperium }
		x = 6
		y = 1
		relative_position_id = PER_the_pahlavi_imperium
		mutually_exclusive = { focus = PER_stand_with_giants }
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {
			IF = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = { has_completed_focus = PER_stand_with_giants }
				NOT = { has_completed_focus = PER_rally_the_reformers }
			}
		}

		offset = {
		    x = -6
		    y = 0
		    trigger = {
		        has_game_rule = {
		            rule = obsolete_focus_branches_visibility
		            option = HIDE
		        }
		        has_completed_focus = PER_legacy_of_greatness
		    }
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_dynamic_modifier = {
				modifier = PER_legacy_of_greatness_modifier
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_civil_unrest_tt
		}
	}

	focus = { #IMPERIAL
		id = PER_assassinate_reza_shah
		icon = GFX_focus_PER_assassinate_reza_shah
		prerequisite = { focus = PER_legacy_of_greatness }
		x = -1
		y = 1
		relative_position_id = PER_legacy_of_greatness
		mutually_exclusive = { focus = PER_root_out_conspiracies }
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 30
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			PER = {
				country_event = {
					id = PER_imperial_events.20
					hours = 1
				}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_new_shah_tt
			
			PER_mohammed_reza_pahlavi = { 
					promote_leader = yes 
				}
			hidden_effect = {
				retire_character = PER_reza_shah_pahlavi
				IF = {
					limit = {
						has_idea = PER_mohammed_reza_pahlavi
					}
					remove_ideas = PER_mohammed_reza_pahlavi
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_root_out_conspiracies
		icon = GFX_focus_generic_conspiracy
		prerequisite = { focus = PER_legacy_of_greatness }
		x = 1
		y = 1
		relative_position_id = PER_legacy_of_greatness
		mutually_exclusive = { focus = PER_assassinate_reza_shah }
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			add_stability = 0.02
			custom_effect_tooltip = CHL_skip_one_line_tt
			PER = {
				country_event = {
					id = PER_imperial_events.50
					hours = 1
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_his_fathers_footsteps
		icon = GFX_focus_PER_his_fathers_footsteps
		prerequisite = { focus = PER_assassinate_reza_shah }
		x = 0
		y = 1
		relative_position_id = PER_assassinate_reza_shah
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 30
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_research = 0.02
				tooltip = research_speed_factor_tt
			}
			add_to_variable = { 
				PER_legacy_stability = 0.01
				tooltip = stability_factor_tt
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_third_persian_empire
		icon = GFX_focus_PER_third_persian_empire
		prerequisite = { focus = PER_his_fathers_footsteps }
		x = 0
		y = 1
		relative_position_id = PER_his_fathers_footsteps
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 30
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			set_cosmetic_tag = PER_persian_empire
			add_stability = 0.05
		}
	}

	focus = { #IMPERIAL
		id = PER_choose_a_shahbanu
		icon = GFX_focus_PER_choose_a_shahbanu
		prerequisite = { focus = PER_third_persian_empire }
		x = -2
		y = 1
		relative_position_id = PER_third_persian_empire
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
		custom_effect_tooltip = PER_shahbanu_tt
			
			hidden_effect = {
				PER = {
					country_event = {
						id = PER_imperial_events.40
						hours = 1
					}
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_embrace_opulence
		icon = GFX_focus_PER_embrace_opulence
		prerequisite = { focus = PER_choose_a_shahbanu }
		x = -1
		y = 1
		relative_position_id = PER_choose_a_shahbanu
		mutually_exclusive = { focus = PER_emperor_for_people }
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_civ = 0.02
				tooltip = production_speed_industrial_complex_factor_tt
			}
			add_to_variable = { 
				PER_legacy_consumer_goods = -0.05
				tooltip = consumer_goods_factor_tt
			}
			add_to_variable = { 
				PER_legacy_industrial_capacity_factory = 0.03
				tooltip = industrial_capacity_factory_tt
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_emperor_for_people
		icon = GFX_focus_PER_emperor_for_people
		prerequisite = { focus = PER_choose_a_shahbanu }
		x = 1
		y = 1
		relative_position_id = PER_choose_a_shahbanu
		mutually_exclusive = { focus = PER_embrace_opulence }
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_infra = 0.05
				tooltip = production_speed_infrastructure_factor_tt
			}
			add_to_variable = { 
				PER_legacy_factory_efficiency = 0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
			random_owned_state = {
				limit = {
					infrastructure < 5
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_fund_imperial_excellency
		icon = GFX_focus_PER_fund_imperial_excellency
		prerequisite = { focus = PER_embrace_opulence }
		x = 0
		y = 1
		relative_position_id = PER_embrace_opulence
		cost = 5

		available = {
			has_government = neutrality
			has_completed_focus = PER_expand_imperial_guard
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			hidden_effect = {
				266 = { 
					create_unit = {
					    division = "name = \"3rd Imperial Guard\" 	division_template = \"Iranian Imperial Guard\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
				}
			}
			custom_effect_tooltip = PER_imperial_excellency_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_uphold_civil_rights
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = PER_emperor_for_people }
		x = 0
		y = 1
		relative_position_id = PER_emperor_for_people
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_conscription = 0.01
				tooltip = conscription_tt
			}
			add_to_variable = { 
				PER_legacy_stability = 0.02
				tooltip = stability_factor_tt
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_absolute_monarchy
		icon = GFX_focus_generic_monarchy_2
		prerequisite = { focus = PER_root_out_conspiracies }
		x = 0
		y = 1
		relative_position_id = PER_root_out_conspiracies
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_research = 0.02
				tooltip = research_speed_factor_tt
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			if = {
				limit = {
					NOT = { has_idea = limited_conscription }
 					NOT = { has_idea = extensive_conscription }
 					NOT = { has_idea = service_by_requirement }
					NOT = { has_idea = all_adults_serve }
					NOT = { has_idea = scraping_the_barrel }
				}
				add_ideas = limited_conscription #Will represent the change to a more militaristic force in flavour text
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_first_iranian_empire
		icon = GFX_focus_PER_first_iranian_empire
		prerequisite = { focus = PER_absolute_monarchy }
		x = 0
		y = 1
		relative_position_id = PER_absolute_monarchy
		cost = 5
		
		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 30
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			set_cosmetic_tag = PER_iranian_empire
			add_war_support = 0.05
		}
	}

	focus = { #IMPERIAL
		id = PER_take_regional_tour
		icon = GFX_focus_PER_take_regional_tour
		prerequisite = { focus = PER_first_iranian_empire }
		x = 2
		y = 1
		relative_position_id = PER_first_iranian_empire
		cost = 5
		
		available = {
			has_government = neutrality
			NOT = {
				has_war_with = AFG
				has_war_with = IRQ
			}
		}

		bypass = {
			OR = {
				has_war_with = AFG
				has_war_with = IRQ
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			AFG = {
				add_opinion_modifier = {
				target = PER
				modifier = huge_increase
				}
			}
			IRQ = {
				add_opinion_modifier = {
				target = PER
				modifier = huge_increase
				}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
		}
	}

	focus = { #IMPERIAL
		id = PER_limit_foreign_influence
		icon = GFX_focus_PER_limit_foreign_influence
		prerequisite = { focus = PER_take_regional_tour }
		x = -1
		y = 1
		relative_position_id = PER_take_regional_tour
		mutually_exclusive = { focus = PER_embrace_industrial_powers }
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = limited_exports
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_consumer_goods = -0.05
				tooltip = consumer_goods_factor_tt
			}
			add_to_variable = { 
				PER_legacy_pp = 0.02
				tooltip = political_power_factor_tt
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_embrace_industrial_powers
		icon = GFX_SOV_aristocratic_investments_ccp_2d_sov_compatibility
		prerequisite = { focus = PER_take_regional_tour }
		x = 1
		y = 1
		relative_position_id = PER_take_regional_tour
		mutually_exclusive = { focus = PER_limit_foreign_influence }
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_tech_bonus = {
			name = PER_embrace_industrial_powers_bonus
			bonus = 0.5
			uses = 1
			category = industry
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_subserviant_to_noone
		icon = GFX_focus_PER_subserviant_to_noone
		prerequisite = { focus = PER_limit_foreign_influence }
		x = 0
		y = 1
		relative_position_id = PER_limit_foreign_influence
		cost = 5
		
		available = {
			has_government = neutrality
			NOT = {
				has_completed_focus = PER_form_oil_company
			}
		}

		bypass = {
			has_completed_focus = PER_form_oil_company
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			remove_ideas = PER_anglo_iranian_oil_ns
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_modernize_iran_economy
		icon = GFX_focus_generic_modernize_industry
		prerequisite = { focus = PER_embrace_industrial_powers }
		x = 0
		y = 1
		relative_position_id = PER_embrace_industrial_powers
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_civ = 0.05
				tooltip = production_speed_industrial_complex_factor_tt
			}
			add_to_variable = { 
				PER_legacy_factory_efficiency = 0.05
				tooltip = production_factory_efficiency_gain_factor_tt
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_last_thousand_years
		icon = GFX_focus_PER_last_thousand_years
		prerequisite = { focus = PER_subserviant_to_noone focus = PER_fund_imperial_excellency focus = PER_uphold_civil_rights focus = PER_modernize_iran_economy }
		x = -2
		y = 2
		relative_position_id = PER_subserviant_to_noone
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_RESEARCH FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			custom_effect_tooltip = PER_legacy_of_greatness_tt
			add_to_variable = { 
				PER_legacy_conscription = 0.01
				tooltip = conscription_tt
			}
			add_to_variable = { 
				PER_legacy_stability = 0.05
				tooltip = stability_factor_tt
			}
			add_to_variable = {
				PER_legacy_research = 0.03
				tooltip = research_speed_factor_tt
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			IF = {
				limit = {
					has_completed_focus = PER_assassinate_reza_shah
				}
				set_cosmetic_tag = PER_great_persian_empire
			}
			ELSE_IF = {
				limit = {
					has_completed_focus = PER_root_out_conspiracies
				}
				set_cosmetic_tag = PER_great_iranian_empire
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_shahanshah
		icon = GFX_focus_PER_shahanshah
		prerequisite = { focus = PER_third_persian_empire focus = PER_first_iranian_empire }
		x = 1
		y = 1
		relative_position_id = PER_third_persian_empire
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_POLITICAL_CHARACTER FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			add_country_leader_trait = PER_shahanshah_trait
		}
	}

	focus = { #IMPERIAL
		id = PER_rally_ancient_history
		icon = GFX_focus_PER_rally_ancient_history
		prerequisite = { focus = PER_shahanshah }
		x = 0
		y = 1
		relative_position_id = PER_shahanshah
		cost = 5

		available = {
			has_government = neutrality
			NOT = {
				has_war_with = USA
				has_war_with = ENG
				has_war_with = FRA
				has_war_with = GER
				has_war_with = SOV
				has_war_with = JAP
				has_war_with = ITA
			}
		}

		bypass = {
			OR = {
				has_war_with = USA
				has_war_with = ENG
				has_war_with = FRA
				has_war_with = GER
				has_war_with = SOV
				has_war_with = JAP
				has_war_with = ITA
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			PER = {
				country_event = {
					id = PER_imperial_events.30
					hours = 1
				}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_timed_idea = {
				idea = PER_celebration_idea
				days = 365
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			USA = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			ENG = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			GER = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			FRA = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			SOV = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			JAP = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			ITA = {
				add_opinion_modifier = {
				target = PER
				modifier = large_increase
				}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			add_stability = -0.1
		}
	}

	focus = { #IMPERIAL
		id = PER_rebuild_persepolis
		icon = GFX_focus_PER_rebuild_persepolis
		prerequisite = { focus = PER_rally_ancient_history }
		x = 0
		y = 1
		relative_position_id = PER_rally_ancient_history
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_ideas = PER_persepolis_idea
		}
	}

	focus = { #IMPERIAL
		id = PER_imperial_funded_universities
		icon = GFX_focus_PER_imperial_funded_universities
		prerequisite = { focus = PER_legacy_of_greatness }
		x = 5
		y = 1
		relative_position_id = PER_legacy_of_greatness
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = { #HISTORICAL
		id = PER_assessing_the_opposition
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = PER_legacy_of_greatness }
		x = 10
		y = 1
		relative_position_id = PER_legacy_of_greatness
		cost = 10
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_assessing_the_opposition_tt
		}
	}

	focus = { #IMPERIAL
		id = PER_the_unification_initiative
		icon = GFX_goal_generic_major_alliance
		prerequisite = { focus = PER_assessing_the_opposition }
		x = -2
		y = 1
		relative_position_id = PER_assessing_the_opposition
		cost = 5
		
		available = {
			has_government = neutrality
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_unification_initiative_idea
				days = 365
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_clamp_kurdish_dissidence
		icon = GFX_focus_PER_clamp_kurdish_dissidence
		prerequisite = { focus = PER_the_unification_initiative }
		x = -1
		y = 1
		relative_position_id = PER_the_unification_initiative
		cost = 5

		ai_will_do = {
			factor = 15
		}

		available = {
			has_government = neutrality
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			remove_ideas = PER_kurdistan_resistance_idea
		}
	}

	focus = { #IMPERIAL
		id = PER_clamp_azerbaijani_dissidence
		icon = GFX_focus_PER_clamp_azerbaijani_dissidence
		prerequisite = { focus = PER_the_unification_initiative }
		x = 1
		y = 1
		relative_position_id = PER_the_unification_initiative
		cost = 5

		ai_will_do = {
			factor = 15
		}

		available = {
			has_government = neutrality
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			remove_ideas = PER_azerbaijan_resistance_idea
		}
	}

	focus = { #IMPERIAL
		id = PER_state_atheism
		icon = GFX_focus_PER_state_atheism
		prerequisite = { focus = PER_clamp_azerbaijani_dissidence focus = PER_clamp_kurdish_dissidence }
		x = 1
		y = 1
		relative_position_id = PER_clamp_kurdish_dissidence
		mutually_exclusive = { focus = PER_venerate_islam focus = PER_revive_old_ways }
		cost = 10

		ai_will_do = {
			factor = 20
		}

		available = {
			has_government = neutrality
		}

		search_filters = { 
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = {
					has_completed_focus = PER_forced_secularization
				}

				swap_ideas = {
				remove_idea = PER_secularized_state_idea
  				add_idea = PER_state_atheism_idea 
				}
			}
			ELSE = {
				swap_ideas = {
				remove_idea = PER_islamic_traditions_ns
  				add_idea = PER_state_atheism_idea 
				}
			}
			add_stability = -0.1
		}
	}

	focus = { #IMPERIAL
		id = PER_venerate_islam
		icon = GFX_focus_TUR_turanist_ambition
		prerequisite = { focus = PER_clamp_azerbaijani_dissidence focus = PER_clamp_kurdish_dissidence }
		x = -1
		y = 1
		relative_position_id = PER_clamp_kurdish_dissidence
		mutually_exclusive = { focus = PER_state_atheism focus = PER_revive_old_ways }
		cost = 10

		ai_will_do = {
			factor = 15
		}

		available = {
			has_government = neutrality
			NOT = {
				has_completed_focus = PER_forced_secularization
			}
		}

		search_filters = {
			FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = {
					has_completed_focus = PER_forced_secularization
				}

				swap_ideas = {
				remove_idea = PER_secularized_state_idea
  				add_idea = PER_venerated_islam_idea 
				}
			}
			ELSE = {
				swap_ideas = {
				remove_idea = PER_islamic_traditions_ns
  				add_idea = PER_venerated_islam_idea 
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_revive_old_ways
		icon = GFX_focus_PER_revive_old_ways
		prerequisite = { focus = PER_clamp_azerbaijani_dissidence focus = PER_clamp_kurdish_dissidence }
		x = 3
		y = 1
		relative_position_id = PER_clamp_kurdish_dissidence
		mutually_exclusive = { focus = PER_state_atheism focus = PER_venerate_islam }
		cost = 10

		ai_will_do = {
			factor = 10
		}

		available = {
			has_government = neutrality
			NOT = {
				has_completed_focus = PER_forced_secularization
			}
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			swap_ideas = {
			remove_idea = PER_islamic_traditions_ns
  			add_idea = PER_old_ways_idea 
			}
			
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_clergy_revolt_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			
			country_event = {
				id = PER_revolution_events.1
				hours = 1
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_imperial_expansionism
		icon = GFX_focus_PER_imperial_expansionism
		prerequisite = { focus = PER_assessing_the_opposition }
		x = 4
		y = 1
		relative_position_id = PER_assessing_the_opposition
		cost = 10

		ai_will_do = {
			factor = 25
		}

		available = {
			has_government = neutrality
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			add_ideas = PER_imperial_expansionism_idea
			custom_effect_tooltip = CHL_skip_one_line_tt
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_tehran_moscow_pact
		icon = GFX_focus_PER_tehran_moscow_pact
		prerequisite = { focus = PER_imperial_expansionism }
		x = 0
		y = 1
		relative_position_id = PER_imperial_expansionism
		cost = 5
		
		available = {
			has_government = neutrality
			NOT = { has_war_with = SOU }
			is_subject = no
			NOT = {
				any_other_country = {
					is_in_faction_with = SOU
					has_war_with = PER	
				}
			}
			SOU = {
				is_subject = no
				exists = yes
			}
		}

		bypass = {
			OR = {
				SOU = {
					OR = {
						exists = no
						is_subject = yes
					}
				}
				has_war_with = SOU 
				any_other_country = {
					is_in_faction_with = SOU
					has_war_with = PER	
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_acceptance_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			SOU = {
				country_event = {
					id = PER_imperial_events.1
					hours = 1
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_establish_special_unit
		icon = GFX_focus_PER_establish_special_unit
		prerequisite = { focus = PER_imperial_expansionism }
		x = 2
		y = 1
		relative_position_id = PER_imperial_expansionism
		cost = 5

		ai_will_do = {
			factor = 30
		}

		available = {
			has_government = neutrality
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_establish_immortal_legion_tt

				hidden_effect = {
					division_template = {
						name = "Immortal Legion"		
						is_locked = yes
						template_counter = 107 
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
    				    	infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
							infantry = { x = 2 y = 0 }
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
							artillery_brigade = { x = 3 y = 0 }
						}

						support = {
    					    engineer = { x = 0 y = 0 }
    					    artillery = { x = 0 y = 1 }
						}

						override_model = PER_infantry_alt_0_entity
					}
	
					266 = { 
					create_unit = {
					    division = "name = \"First Immortal Legion\" 	division_template = \"Immortal Legion\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
					    division = "name = \"Second Immortal Legion\" 	division_template = \"Immortal Legion\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
					create_unit = {
					    division = "name = \"Third Immortal Legion\" 	division_template = \"Immortal Legion\" 	start_experience_factor = 1.0 start_equipment_factor = 1"
					    owner = ROOT
					}
				}
			}
		}
	}

	focus = {
		id = PER_demand_iraqi_territory
		icon = GFX_focus_PER_demand_iraqi_territory
		prerequisite = { focus = PER_tehran_moscow_pact }
		x = -1
		y = 2
		relative_position_id = PER_tehran_moscow_pact
		cost = 10
		
		available = {
			has_government = neutrality
			IRQ = {
				exists = yes
				is_subject = no
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					owns_state = 1011
					owns_state = 676
				}
			}
		}

		bypass = {
			IRQ = {
				OR = {
					exists = no
					is_subject = yes
					has_war_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			1011 = {
				add_claim_by = ROOT
			}
			676 = {
				add_claim_by = ROOT
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_territory_demands_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			IRQ = {
				country_event = {
					id = PER_imperial_events.210
					hours = 1
				}
			}
		}
	}

	focus = {
		id = PER_demand_afghan_territory
		icon = GFX_focus_PER_demand_afghan_territory
		prerequisite = { focus = PER_tehran_moscow_pact }
		x = 1
		y = 2
		relative_position_id = PER_tehran_moscow_pact
		cost = 10
		
		available = {
			has_government = neutrality
			AFG = {
				exists = yes
				is_subject = no
				NOT = {
					has_war_with = ROOT
				}
				OR = {
					owns_state = 415
					owns_state = 1009
				}
			}
		}

		bypass = {
			AFG = {
				OR = {
					exists = no
					is_subject = yes
					has_war_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			415 = {
				add_claim_by = ROOT
			}
			1009 = {
				add_claim_by = ROOT
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_territory_demands_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			AFG = {
				country_event = {
					id = PER_imperial_events.210
					hours = 1
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_war_plan_darius
		icon = GFX_focus_PER_war_plan_darius
		prerequisite = { focus = PER_demand_iraqi_territory }
		prerequisite = { focus = PER_demand_afghan_territory }
		x = 1
		y = 1
		relative_position_id = PER_demand_iraqi_territory
		cost = 5
		
		available = {
			has_government = neutrality
			is_subject = no
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_war_plan_darius_idea
				days = 730
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_foothold_in_indus
		icon = GFX_focus_PER_foothold_in_indus
		prerequisite = { focus = PER_war_plan_darius }
		x = -1
		y = 1
		relative_position_id = PER_war_plan_darius
		cost = 10
		
		available = {
			has_government = neutrality
			is_subject = no
			NOT = {
				has_war_with = RAJ
				ROOT = {
					is_in_faction_with = RAJ
				}
			}
			RAJ = {
				controls_state = 988
				controls_state = 444
			}
		}

		bypass = {
			OR = {
				has_war_with = RAJ
				NOT = {
					OR = {
						RAJ = {
							controls_state = 988
							controls_state = 444
						}
					}
				}
				ROOT = {
					is_in_faction_with = RAJ
				}
			}

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			custom_effect_tooltip = PER_foothold_in_indus_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			RAJ = {
				country_event = {
					id = PER_imperial_events.10
					hours = 1
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_usurp_afghanistan
		icon = GFX_focus_PER_usurp_afghanistan
		prerequisite = { focus = PER_war_plan_darius }
		x = 1
		y = 1
		relative_position_id = PER_war_plan_darius
		cost = 5
		will_lead_to_war_with = AFG
		
		available = {
			has_government = neutrality
			is_subject = no
			AFG = {
				exists = yes
				is_subject = no
			}
			NOT = {
				has_war_with = AFG
				is_in_faction_with = AFG
			}
		}

		bypass = {

			AFG = {
				OR = {
					exists = no
					is_subject = yes
					has_war_with = ROOT
				}
			}
			
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {

			every_state = {
				limit = {
					is_core_of = AFG
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			ROOT = {
				create_wargoal = {
					target = AFG
					type = annex_everything
				}
			}

		}
	}

	focus = { #IMPERIAL
		id = PER_invasion_of_india
		icon = GFX_focus_attack_india
		prerequisite = { focus = PER_foothold_in_indus }
		prerequisite = { focus = PER_usurp_afghanistan }
		x = 1
		y = 1
		relative_position_id = PER_foothold_in_indus
		cost = 5
		will_lead_to_war_with = RAJ
		
		available = {
			has_government = neutrality
			is_subject = no
			RAJ = {
				exists = yes
			}
			NOT = {
				has_war_with = RAJ
				is_in_faction_with = RAJ
			}
		}

		bypass = {
			OR = {
				is_in_faction_with = RAJ
				has_war_with = RAJ
				RAJ = {
					exists = no
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			every_state = {
				limit = {
					is_core_of = RAJ
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			ROOT = {
				create_wargoal = {
					target = RAJ
					type = annex_everything
				}
			}

		}
	}

	focus = { #IMPERIAL
		id = PER_glory_of_cyrus
		icon = GFX_focus_PER_glory_of_cyrus
		prerequisite = { focus = PER_invasion_of_india }
		prerequisite = { focus = PER_reintegrate_anatolia }
		prerequisite = { focus = PER_march_to_nile }
		x = 0
		y = 2
		relative_position_id = PER_invasion_of_india
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 20
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL_CHARACTER FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			add_country_leader_trait = {
				trait = PER_glory_of_cyrus_trait
			}
			every_state = {
				limit = {
					is_core_of = AFG
				}
				add_core_of = ROOT
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_war_plan_xerxes
		icon = GFX_focus_PER_war_plan_xerxes
		prerequisite = { focus = PER_demand_iraqi_territory }
		prerequisite = { focus = PER_demand_afghan_territory }
		x = -2
		y = 1
		relative_position_id = PER_demand_iraqi_territory
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
			is_subject = no
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = { 
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_war_plan_xerxes_idea
				days = 730
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_reclaim_turkish_peninsula
		icon = GFX_focus_generic_attack_turkey
		prerequisite = { focus = PER_war_plan_xerxes }
		x = 0
		y = 1
		relative_position_id = PER_war_plan_xerxes
		cost = 5
		will_lead_to_war_with = TUR
		
		available = {
			has_government = neutrality
			is_subject = no
			TUR = {
				exists = yes
				is_subject = no
			}
			NOT = {
				has_war_with = TUR
				is_in_faction_with = TUR
			}
		}

		bypass = {

			TUR = {
				OR = {
					exists = no
					is_subject = yes
					has_war_with = ROOT
				}
			}
			
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = { FOCUS_FILTER_ANNEXATION }

		completion_reward = {

			every_state = {
				limit = {
					is_core_of = TUR
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			ROOT = {
				create_wargoal = {
					target = TUR
					type = annex_everything
				}
			}

		}
	}

	focus = { #IMPERIAL
		id = PER_reintegrate_anatolia
		icon = GFX_focus_PER_reintegrate_anatolia
		prerequisite = { focus = PER_reclaim_turkish_peninsula }
		x = 0
		y = 1
		relative_position_id = PER_reclaim_turkish_peninsula
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
			is_subject = no
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {

		}

		completion_reward = {
			custom_effect_tooltip = PER_reintegrate_anatolia_tt
		}
	}

	focus = { #IMPERIAL
		id = PER_clash_of_titans
		icon = GFX_focus_PER_clash_of_titans
		prerequisite = { focus = PER_reclaim_turkish_peninsula }
		x = -2
		y = 1
		relative_position_id = PER_reclaim_turkish_peninsula
		cost = 5
		
		available = {
			has_government = neutrality
			is_subject = no
			GRE = {
				exists = yes
			}
			NOT = {
				has_war_with = GRE
			}
		}

		bypass = {
			has_war_with = GRE
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}

		will_lead_to_war_with = GRE #To give Greece a headsup that PER might be about to attack

		completion_reward = {
			PER = {
				create_wargoal = {
					target = GRE
					type = annex_everything
				}
			}

			if = {
				limit = {
					GRE = {
						has_country_flag = GRE_byz_unified_flag
					}
				}
				add_timed_idea = {
					idea = PER_clash_of_titans_idea
					days = 720
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_absorb_byzantines
		icon = GFX_focus_PER_absorb_byzantines
		prerequisite = { focus = PER_clash_of_titans }
		x = 0
		y = 1
		relative_position_id = PER_clash_of_titans
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
			is_subject = no
			NOT = {
				has_country_flag = {
					flag = PER_currently_doing_war_plan
				}
			}
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_absorb_byzantines_tt
		}
	}

	focus = { #IMPERIAL
		id = PER_war_plan_cambyses
		icon = GFX_focus_PER_war_plan_cambyses
		prerequisite = { focus = PER_demand_iraqi_territory }
		prerequisite = { focus = PER_demand_afghan_territory }
		x = 2
		y = 1
		relative_position_id = PER_demand_afghan_territory
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
			is_subject = no
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_war_plan_cambyses_idea
				days = 730
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_path_through_iraq
		icon = GFX_focus_PER_path_through_iraq
		prerequisite = { focus = PER_war_plan_cambyses }
		x = 0
		y = 1
		relative_position_id = PER_war_plan_cambyses
		cost = 5
		will_lead_to_war_with = IRQ
		
		available = {
			has_government = neutrality
			is_subject = no
			IRQ = {
				exists = yes
				is_subject = no
			}
			NOT = {
				has_war_with = IRQ
				is_in_faction_with = IRQ
			}
		}

		bypass = {

			IRQ = {
				OR = {
					exists = no
					is_subject = yes
					has_war_with = ROOT
				}
			}
			
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {

			every_state = {
				limit = {
					is_core_of = IRQ
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			ROOT = {
				create_wargoal = {
					target = IRQ
					type = annex_everything
				}
			}

		}
	}

	focus = { #IMPERIAL
		id = PER_demand_west_asia
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = PER_war_plan_cambyses }
		x = 2
		y = 1
		relative_position_id = PER_war_plan_cambyses
		cost = 10
		will_lead_to_war_with = SYR
		will_lead_to_war_with = LEB
		
		available = {
			has_government = neutrality
			is_subject = no
			SYR = {
				exists = yes
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}

			LEB = {
				exists = yes
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}

		bypass = {
			SYR = {
				OR = {
					exists = no
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
			
			LEB = {
				OR = {
					exists = no
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_ANNEXATION
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {

			every_state = {
				limit = {
					is_core_of = SYR
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			every_state = {
				limit = {
					is_core_of = LEB
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			IF = {
				limit = {
					SYR = {
						exists = yes
						NOT = {
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
				ROOT = {
					create_wargoal = {
						target = SYR
						type = annex_everything
					}
				}
			}
			
			IF = {
				limit = {
					LEB = {
						exists = yes
						NOT = {
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
				ROOT = {
					create_wargoal = {
						target = LEB
						type = annex_everything
					}
				}
			}
		}
	}

	focus = { #IMPERIAL
		id = PER_march_to_nile
		icon = GFX_focus_PER_march_to_nile
		prerequisite = { focus = PER_path_through_iraq }
		x = 0
		y = 1
		relative_position_id = PER_path_through_iraq
		cost = 5
		will_lead_to_war_with = JOR
		will_lead_to_war_with = PAL
		will_lead_to_war_with = EGY

		available = {

			has_government = neutrality
			is_subject = no

			OR = {
				JOR = {
					exists = yes
					NOT = {
						is_in_faction_with = ROOT
						has_war_with = ROOT
					}
				}

				PAL = {
					exists = yes
					NOT = {
						is_in_faction_with = ROOT
						has_war_with = ROOT
					}
				}

				ENG = {
					exists = yes
					NOT = {
						is_in_faction_with = ROOT
						has_war_with = ROOT
					}
				}
			}

		}

		bypass = {
			JOR = {
				OR = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
					exists = no
				}
			}

			PAL = {
				OR = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
					exists = no
				}
			}

			ENG = {
				OR = {
					is_in_faction_with = ROOT
					has_war_with = ROOT
					exists = no
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			every_state = {
				limit = {
					is_core_of = JOR
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			every_state = {
				limit = {
					is_core_of = PAL
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			every_state = {
				limit = {
					is_core_of = EGY
				}
				add_claim_by = ROOT
			}

			custom_effect_tooltip = generic_skip_one_line_tt

			IF = {
				limit = {
					JOR = {
						exists = yes
						NOT = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
						}
					}
				}
				ROOT = {
					create_wargoal = {
						target = JOR
						type = annex_everything
					}
				}
			}
			
			IF = {
				limit = {
					PAL = {
						exists = yes
						NOT = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
						}
					}
				}
				ROOT = {
					create_wargoal = {
						target = PAL
						type = annex_everything
					}
				}
			}

			IF = {
				limit = {
					EGY = {
						exists = yes
						NOT = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
						}
					}
				}
				ROOT = {
					create_wargoal = {
						target = EGY
						type = annex_everything
					}
				}
			}
			ELSE_IF = {
				limit = {
					907 = {
						is_owned_and_controlled_by = ENG
					}
				}
				ROOT = {
					create_wargoal = {
						target = ENG
						type = annex_everything
					}
				}
			}

		}
	}

	focus = { #IMPERIAL
		id = PER_the_memphis_initiative
		icon = GFX_focus_PER_the_memphis_initiative
		prerequisite = { focus = PER_march_to_nile }
		x = 2
		y = 1
		relative_position_id = PER_march_to_nile
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
			is_subject = no
		}

		ai_will_do = {
			factor = 15
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_memphis_initiative_tt
		}
	}

	################################
	###### FASCIST SUB-BRANCH ######
	################################

	focus = { #FASCIST
		id = PER_stand_with_germany
		icon = GFX_focus_chi_mission_to_germany
		prerequisite = { focus = PER_embrace_industrial_powers }
		x = 2
		y = 1
		relative_position_id = PER_embrace_industrial_powers
		cost = 5
		
		available = {
			has_government = neutrality
			NOT = {
				has_war_with = GER
			}
			GER = {
				exists = yes
				has_government = fascism
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = CHL_skip_one_line_tt
			custom_effect_tooltip = PER_acceptance_ger_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			GER = {
				country_event = {
					id = PER_imperial_events.60
					hours = 1
				}
			}
		}
	}

	focus = { #FASCIST
		id = PER_align_with_axis
		icon = GFX_goal_support_fascism
		prerequisite = { focus = PER_stand_with_germany }
		x = 0
		y = 1
		relative_position_id = PER_stand_with_germany
		cost = 5

		allow_branch = {

		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		available = {
			is_subject = no
			has_government = neutrality
			is_in_faction = no
		}

		bypass = {
			is_subject = yes
			is_in_faction_with = GER
		}

		completion_reward = {
			custom_effect_tooltip = PER_acceptance_ger_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			GER = {
				country_event = generic.2
			}
		}
	}

	focus = { #FASCIST
		id = PER_spoils_of_war
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = PER_align_with_axis }
		x = 0
		y = 1
		relative_position_id = PER_align_with_axis
		cost = 10

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_spoils_of_war_idea
				days = 730
			}
		}	
	}

	focus = { #FASCIST
		id = PER_donate_oil_fields
		icon = GFX_focus_PER_donate_oil_fields
		prerequisite = { focus = PER_align_with_axis }
		x = -2
		y = 1
		relative_position_id = PER_align_with_axis
		cost = 5
		
		available = {
			has_government = neutrality
			OR = {
				411 = { is_owned_and_controlled_by = ROOT }
				412 = { is_owned_and_controlled_by = ROOT }
				413 = { is_owned_and_controlled_by = ROOT }
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		cancel_if_invalid = yes

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			hidden_effect = {
				ENG = {
					if = {
						limit = {
							ROOT = { controls_state = 413 }
						}
						remove_resource_rights = 413
					}
					if = {
						limit = {
							ROOT = { controls_state = 412 }
						}
						remove_resource_rights = 412
					}
					if = {
						limit = {
							ROOT = { controls_state = 411 }
						}
						remove_resource_rights = 411
					}
				}
			}
			add_war_support = 0.1
			ROOT = {
				if = {
					limit = {
						controls_state = 413
					}
					give_resource_rights = {
						receiver = GER
						state = 413
					}
				}
				if = {
					limit = {
						controls_state = 412
					}
					give_resource_rights = {
						receiver = GER
						state = 412
					}
				}
				if = {
					limit = {
						controls_state = 411
					}
					give_resource_rights = {
						receiver = GER
						state = 411
					}
				}
			}
		}
	}

	focus = { #FASCIST
		id = PER_middle_east_protectorate
		icon = GFX_focus_PER_middle_east_protectorate
		prerequisite = { focus = PER_spoils_of_war }
		x = 0
		y = 1
		relative_position_id = PER_spoils_of_war
		cost = 5

		allow_branch = {

		}

		available = {
			has_government = neutrality
		}

		ai_will_do = {
			factor = 10
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			IF = {
				limit = {
					is_in_faction = yes
				}
				leave_faction = yes
				custom_effect_tooltip = CHL_skip_one_line_tt
				add_war_support = 0.05
				custom_effect_tooltip = CHL_skip_one_line_tt
				create_faction = PER_middle_east_protectorate_faction	
	
				hidden_effect = {
					set_rule = { can_send_volunteers = yes }
					set_rule = { can_create_factions = yes }
					set_rule = { can_join_factions = no }
				}
			}
			ELSE_IF = {
				limit = {
					is_in_faction = no
				}
				add_war_support = 0.05
				custom_effect_tooltip = CHL_skip_one_line_tt
				create_faction = PER_middle_east_protectorate_faction	
	
				hidden_effect = {
					set_rule = { can_send_volunteers = yes }
					set_rule = { can_create_factions = yes }
					set_rule = { can_join_factions = no }
				}
			}
		}
	}

	################################
	###### DEMOCRATIC BRANCH #######
	################################

	#focus = { #DEMOCRATIC
	#	id = PER_separate_crown
	#	icon = GFX_focus_PLACEHOLDER
	#	x = -50
	#	y = 0
	#	relative_position_id = PER_modernizing_iran
	#	mutually_exclusive = { focus = PER_the_pahlavi_imperium }
	#	cost = 5
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
#
	#	}
	#}	

	focus = { #DEMOCRATIC
		id = PER_rally_the_reformers
		icon = GFX_goal_generic_national_unity
		#prerequisite = { focus = PER_separate_crown }
		x = -70
		y = 0
		relative_position_id = PER_modernizing_iran
		mutually_exclusive = { focus = PER_the_pahlavi_imperium }
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {
			NOT = {
				has_completed_focus = PER_the_pahlavi_imperium
			}
		}

        offset = {
            x = 45
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_rally_the_reformers
            }
        }

        offset = {
            x = 7
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                OR = {
                	has_completed_focus = PER_rally_behind_mosaddegh
                	has_completed_focus = PER_united_progressive_parties
                	has_completed_focus = PER_iranian_culture
                }
            }
        }

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_rally_the_reformers_tt
			add_dynamic_modifier = { modifier = PER_opposition_modifier }
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	#focus = { #DEMOCRATIC
	#	id = PER_rally_suppressed_opposition
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_rally_the_reformers }
	#	x = -1
	#	y = 1
	#	relative_position_id = PER_rally_the_reformers
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
#
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_lobby_military_dissidents
	#	icon = GFX_focus_generic_military_mission
	#	prerequisite = { focus = PER_strengthen_the_tudeh }
	#	x = -3
	#	y = 1
	#	relative_position_id = PER_strengthen_the_tudeh
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		custom_effect_tooltip = PER_modify_opposition_tt
	#		add_to_variable = {
	#			var = PER_army_core_defence_factor
	#			value = 0.1
	#			tooltip = army_core_defence_factor_tt
	#		}
	#		add_to_variable = {
	#			var = PER_army_core_attack_factor
	#			value = 0.1
	#			tooltip = army_core_attack_factor_tt
	#		}
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_exclude_religion
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_rally_suppressed_opposition focus = #PER_lobby_military_dissidents }
	#	x = 2
	#	y = 1
	#	relative_position_id = PER_rally_suppressed_opposition
	#	mutually_exclusive = { focus = PER_promise_clergy_power }
	#	cost = 5
	#	available = {
	#	}
	#	bypass = {
	#	}
	#	allow_branch = {
	#	}
	#	ai_will_do = {
	#		factor = 0
	#	}
	#	search_filters = {
	#	}
	#	completion_reward = {
	#		custom_effect_tooltip = PER_modify_opposition_tt
	#		add_to_variable = {
	#			var = PER_opposition_communism_drift
	#			value = 0.03
	#			tooltip = communism_drift_tt
	#		}
	#		add_to_variable = {
	#			var = PER_opposition_democratic_drift
	#			value = 0.03
	#			tooltip = democratic_drift_tt
	#		}
	#		add_to_variable = {
	#			var = PER_opposition_stability_factor
	#			value = -0.05
	#			tooltip = stability_factor_tt
	#		}
	#	}
	#}

	focus = { #DEMOCRATIC
		id = PER_stage_mass_protests
		icon = GFX_focus_PER_stage_mass_protests
		prerequisite = { focus = PER_rally_the_reformers }
		x = -1
		y = 1
		relative_position_id = PER_rally_the_reformers
		cost = 5
		
		available = {
			has_country_flag = PER_opposition_hq_established
		}

		bypass = {
			OR = {
				has_completed_focus = PER_iranian_socialist_revolution
				has_completed_focus = PER_strengthen_iranian_parliament
				has_completed_focus = PER_force_abdication
				has_completed_focus = PER_march_on_saadabad
			}
		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_the_pahlavi_imperium
				}
			}
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_stage_mass_protests_tt
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_propagate_political_literature
		icon = GFX_focus_generic_workers
		prerequisite = { focus = PER_rally_the_reformers }
		x = 1
		y = 1
		relative_position_id = PER_rally_the_reformers
		cost = 5
		
		available = {
			has_country_flag = PER_opposition_hq_established
		}

		bypass = {
			OR = {
				has_completed_focus = PER_iranian_socialist_revolution
				has_completed_focus = PER_strengthen_iranian_parliament
				has_completed_focus = PER_force_abdication
				has_completed_focus = PER_march_on_saadabad
			}
		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_the_pahlavi_imperium
				}
			}
			
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_propagate_political_literature_tt
			hidden_effect = {
				set_variable = {
					ROOT.PER_opposition_increment_cost = 20
				}
				set_variable = {
					ROOT.PER_opposition_decision_cost = ROOT.PER_opposition_increment_cost
				}
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	#focus = { #DEMOCRATIC
	#	id = PER_allow_britain_access
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_expand_oil_production }
	#	x = -1
	#	y = 1
	#	relative_position_id = PER_expand_oil_production
	#	mutually_exclusive = { focus = PER_increase_oil_sales }
	#	cost = 5
	#	
	#	available = {
	#	}
	#	bypass = {
	#	}
	#	allow_branch = {
	#	}
	#	ai_will_do = {
	#		factor = 0
	#	}
	#	search_filters = {
	#	}
	#	completion_reward = {
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_follow_the_tudeh
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_stage_mass_protests }
	#	x = 2
	#	y = 1
	#	relative_position_id = PER_stage_mass_protests
	#	#mutually_exclusive = { focus = PER_rally_behind_mosaddegh focus = #PER_constitutional_monarchy focus = PER_iranian_culture }
	#	cost = 5
	#	
	#	available = {
	#		communism > 0.35
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		custom_effect_tooltip = PER_modify_opposition_tt
	#		add_to_variable = {
	#			var = PER_opposition_communism_drift
	#			value = 0.03
	#			tooltip = communism_drift_tt
	#		}
	#		set_variable = {
	#			var = PER_opposition_democratic_drift
	#			value = 0
	#			tooltip = democratic_drift_tt
	#		}
	#	}
	#}

	focus = { #DEMOCRATIC
		id = PER_rally_behind_mosaddegh
		icon = GFX_focus_PER_rally_behind_mosaddegh
		prerequisite = { focus = PER_stage_mass_protests focus = PER_propagate_political_literature }
		x = 1
		y = 1
		relative_position_id = PER_stage_mass_protests
		mutually_exclusive = { focus = PER_united_progressive_parties focus = PER_iranian_culture }
		cost = 5
		
		available = {
			#democratic > 0.35
		}

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_united_progressive_parties
					has_completed_focus = PER_iranian_culture
					has_completed_focus = PER_the_pahlavi_imperium
				}
			}
		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_democratic_drift
				value = 0.03
				tooltip = democratic_drift_tt
			}
			set_variable = {
				var = PER_opposition_communism_drift
				value = 0
				tooltip = communism_drift_tt
			}
			set_variable = {
				var = PER_opposition_fascism_drift
				value = 0
				tooltip = fascism_drift_tt
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_embrace_national_front
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = PER_rally_behind_mosaddegh }
		mutually_exclusive = { focus = PER_constitutional_monarchy }
		x = 1
		y = 1
		relative_position_id = PER_rally_behind_mosaddegh
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_democratic_drift
				value = 0.05
				tooltip = democratic_drift_tt
			}
			set_variable = {
				var = PER_opposition_research_speed_factor
				value = 0.02
				tooltip = research_speed_factor_tt
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_constitutional_monarchy
		icon = GFX_focus_PER_constitutional_monarchy
		prerequisite = { focus = PER_rally_behind_mosaddegh }
		#prerequisite = { focus = PER_exclude_religion }
		x = -1
		y = 1
		relative_position_id = PER_rally_behind_mosaddegh
		mutually_exclusive = { focus = PER_embrace_national_front}
		cost = 5
		
		available = {
			democratic > 0.25
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_democratic_drift
				value = 0.03
				tooltip = democratic_drift_tt
			}
			set_variable = {
				var = PER_opposition_communism_drift
				value = 0
				tooltip = communism_drift_tt
			}
			add_country_leader_trait = PER_diminished_authority
		}
	}

	focus = { #DEMOCRATIC
		id = PER_strengthen_iranian_parliament
		icon = GFX_focus_POL_complete_april_constitution
		prerequisite = { focus = PER_constitutional_monarchy }
		x = 0
		y = 1
		relative_position_id = PER_constitutional_monarchy
		cost = 10
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			effect_tooltip = {
				set_politics = { 
					ruling_party = democratic
					elections_allowed = yes
				}
				add_ideas = PER_constitutional_shah

				custom_effect_tooltip = PER_strengthen_iranian_parliament_tt
			}

			custom_effect_tooltip = generic_skip_one_line_tt
			remove_dynamic_modifier = { modifier = PER_opposition_modifier }
			hidden_effect = {
				IF = {
					limit = {
						democratic < 0.3
					}
					start_civil_war = {
						ruling_party = democratic
						ideology = neutrality #SPLITTING TAG
						size = party_popularity@neutrality
						states = all  #these will be filtered, not to worry!
						states_filter = { #only states that do not have this modifier 	goes to 		non-communist
							OR = {
								#state = 64
								NOT = {
									has_dynamic_modifier = {
										modifier = PER_opposition_cell
									}
								}
							}	
						}
					}
					hidden_effect = {
						set_global_flag = PER_civil_war_happened
					}
				}
				ELSE = {
					set_politics = { 
						ruling_party = democratic
						elections_allowed = yes
					}
					add_ideas = PER_constitutional_shah
				}
			}

			custom_effect_tooltip = generic_skip_one_line_tt
			remove_ideas = PER_azerbaijan_resistance_idea
			remove_ideas = PER_kurdistan_resistance_idea
		}
	}

	focus = { #DEMOCRATIC
		id = PER_force_abdication
		icon = GFX_focus_rom_abdicate
		prerequisite = { focus = PER_embrace_national_front }
		x = 0
		y = 1
		relative_position_id = PER_embrace_national_front
		cost = 10
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_MANPOWER
		}

		completion_reward = {
			IF = {
				limit = {
					neutrality > 0.5
				}
				start_civil_war = {
					ruling_party = democratic
					ideology = neutrality #SPLITTING TAG
					size = party_popularity@neutrality
					states = all  #these will be filtered, not to worry!
					states_filter = { #only states that do not have this modifier goes to 		non-communist
						OR = {
							#state = 64
							NOT = {
								has_dynamic_modifier = {
									modifier = PER_opposition_cell
								}
							}
						}	
					}
				}
				hidden_effect = {
					set_global_flag = PER_civil_war_happened
				}
				set_party_name = {
					ideology = democratic
					name = PER_provisional_government
					long_name = PER_provisional_government_long
				}
			}
			ELSE = {
				set_party_name = {
					ideology = democratic
					name = PER_provisional_government
					long_name = PER_provisional_government_long
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
			}
			remove_dynamic_modifier = { modifier = PER_opposition_modifier }
		}
	}

	focus = { #DEMOCRATIC
		id = PER_promise_clergy_power
		icon = GFX_focus_TUR_loosen_the_laws_on_secularism
		prerequisite = { focus = PER_constitutional_monarchy }
		x = -2
		y = 1
		relative_position_id = PER_constitutional_monarchy
		cost = 5
		
		available = {
			#has_dynamic_modifier = { modifier = PER_opposition_modifier }
		}

		bypass = {
			#NOT = {
			#	has_dynamic_modifier = { modifier = PER_opposition_modifier }
			#}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			IF = {
				limit = {
					has_dynamic_modifier = { modifier = PER_opposition_modifier }
				}
				custom_effect_tooltip = PER_modify_opposition_tt
				add_to_variable = {
					var = PER_opposition_stability_factor
					value = 0.05
					tooltip = stability_factor_tt
				}
			}
			ELSE = {
				add_stability = 0.05
			}
			add_political_power = 50
			custom_effect_tooltip = available_political_advisor 
			show_ideas_tooltip = PER_generic_non_aligned

		}
	}

	focus = { #DEMOCRATIC
		id = PER_free_elections
		icon = GFX_goal_support_democracy
		prerequisite = { focus = PER_force_abdication focus = PER_strengthen_iranian_parliament}
		x = -1
		y = 1
		relative_position_id = PER_force_abdication
		cost = 5
		
		available = {
			has_government = democratic
			has_civil_war = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			custom_effect_tooltip = PER_free_elections_tt
			custom_effect_tooltip = CHL_skip_one_line_tt
			PER = { 
				country_event = {
					id = PER_imperial_events.220
					hours = 1
				}
			}
			hidden_effect = {
				IF = {
					limit = {
						has_completed_focus = PER_strengthen_iranian_parliament
					}
					set_cosmetic_tag = PER_constitutional_iran
				}

				IF = {
					limit = {
						has_completed_focus = PER_force_abdication
					}
					set_cosmetic_tag = PER_iranian_republic
				}
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_continue_westernization
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = PER_free_elections }
		x = 2
		y = 1
		relative_position_id = PER_free_elections
		mutually_exclusive = { focus = PER_islamic_restoration }
		cost = 10
		
		available = {
			has_government = democratic
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_islamic_restoration
		icon = GFX_focus_AUS_disregard_the_treaties
		prerequisite = { focus = PER_free_elections }
		prerequisite = { focus = PER_promise_clergy_power }

		mutually_exclusive = { focus = PER_continue_westernization }
		x = -2
		y = 1
		relative_position_id = PER_free_elections
		cost = 10
		
		available = {
			has_government = democratic
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_WAR_SUPPORT
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_ideas = PER_resist_gharbzadegi_idea
			custom_effect_tooltip = generic_skip_one_line_tt
			set_party_name = {
				ideology = neutrality
				long_name = PER_islamic_rep_party_long
				name = PER_islamic_rep_party
			} 
		}
	}

	focus = { #DEMOCRATIC
		id = PER_ally_bazaari
		icon = GFX_focus_PER_ally_bazaari
		prerequisite = { focus = PER_islamic_restoration }
		x = 0
		y = 1
		relative_position_id = PER_islamic_restoration
		cost = 10
		
		available = {
			has_government = democratic
		}

		bypass = {
			has_idea = limited_exports
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_ideas = limited_exports
		}
	}


	focus = { #DEMOCRATIC
		id = PER_royal_college_funding
		icon = GFX_focus_research
		prerequisite = { focus = PER_islamic_restoration focus = PER_continue_westernization }
		x = 1
		y = 2
		relative_position_id = PER_free_elections
		cost = 10
		
		available = {
			controls_state = 266 #Tehran
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1 
			custom_effect_tooltip = {
				localization_key = available_scientist_one_line_tt
				CHARACTER = PER_kazem_hasibi
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_entice_foreign_investment
		icon = GFX_focus_usa_reestablish_the_gold_standard
		prerequisite = { focus = PER_continue_westernization }
		x = 1
		y = 1
		relative_position_id = PER_continue_westernization
		cost = 10
		
		available = {
			has_government = democratic
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_ideas = PER_invite_foreign_investors
		}
	}

	focus = { #DEMOCRATIC
		id = PER_increase_faculty_staffing_budget
		icon = GFX_focus_generic_university_2
		prerequisite = { focus = PER_royal_college_funding }
		prerequisite = { focus = PER_entice_foreign_investment }
		x = 1
		y = 1
		relative_position_id = PER_royal_college_funding
		cost = 5
		
		available = {
			has_government = democratic
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			if = {
				limit = {
					NOT = { 
						has_dynamic_modifier = {
							modifier = PER_technological_modifier
						}
					}
				}
				add_dynamic_modifier = {
					modifier = PER_technological_modifier
				}
				log = "Added modifier"
			}
			else = {
				custom_effect_tooltip = PER_increase_faculty_staffing_budget_tt
				log = "Modifies modifier"
			}

			add_to_variable = { PER_technological_modifier_research_speed_factor = 0.03 tooltip = research_speed_factor_tt }
			add_to_variable = { PER_technological_modifier_special_project_speed_factor = 0.05 tooltip = special_project_speed_factor_tt}


			custom_effect_tooltip = {
				localization_key = available_scientist_one_line_tt
				CHARACTER = PER_ahmad_zirakzadeh
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_invest_in_univerity_facilities
		icon = GFX_focus_research2
		prerequisite = { focus = PER_royal_college_funding }
		prerequisite = { focus = PER_entice_foreign_investment }
		x = 3
		y = 1
		relative_position_id = PER_royal_college_funding
		cost = 10
		
		available = {
			has_government = democratic
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH
		}

		completion_reward = {

			if = {
				limit = {
					NOT = { 
						has_dynamic_modifier = {
							modifier = PER_technological_modifier
						}
					}
				}
				add_dynamic_modifier = {
					modifier = PER_technological_modifier
				}
				log = "Added modifier"
			}
			else = {
				custom_effect_tooltip = PER_increase_faculty_staffing_budget_tt
				log = "modifies modifier"
			}

			add_to_variable = { PER_technological_modifier_production_cost_air_facility_factor = 0.1 tooltip = production_speed_air_facility_factor_tt }
			add_to_variable = { PER_technological_modifier_production_cost_land_facility_factor = 0.1 tooltip = production_speed_land_facility_factor_tt}
			add_to_variable = { PER_technological_modifier_production_cost_naval_facility_factor = 0.1 tooltip = production_speed_naval_facility_factor_tt }
			add_to_variable = { PER_technological_modifier_production_cost_nuclear_facility_factor = 0.1 tooltip = production_speed_nuclear_facility_factor_tt}

			add_breakthrough_progress = {
				specialization = specialization_air
				value = 0.1
			}
			add_breakthrough_progress = {
				specialization = specialization_land
				value = 0.1
			}
			add_breakthrough_progress = {
				specialization = specialization_nuclear
				value = 0.1
			}
			add_breakthrough_progress = {
				specialization = specialization_naval
				value = 0.1
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_expand_oil_production
		icon = GFX_focus_generic_resource_extraction
		prerequisite = { focus = PER_ally_bazaari focus = PER_entice_foreign_investment }
		x = 0
		y = 3
		relative_position_id = PER_free_elections
		cost = 10
		
		available = {
			OR = {
				has_government = democratic
				has_government = neutrality
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = fuel_silo
					level = 1
					instant_build = yes
				}
			}
			411 = {
				add_resource = {
					type = oil
					amount = 6
				}
			}
			412 = {
				add_resource = {
					type = oil
					amount = 3
				}
			}
			413 = {
				add_resource = {
					type = oil
					amount = 5
				}
			}
		}
	}

	focus = { 
		id = PER_islamic_revolution
		icon = GFX_focus_TUR_turanist_ambition
		prerequisite = { focus = PER_ally_bazaari }
		x = -3
		y = 3
		relative_position_id = PER_free_elections
		cost = 10
		
		available = {
			OR = {
				has_government = democratic
				has_government = neutrality 
			}
			neutrality > 0.2

			NOT = {
				has_global_flag = PER_civil_war_happened
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
				long_name = PER_islamic_council
				name = PER_islamic_council_long
			}
			retire_country_leader = yes
			
			custom_effect_tooltip = generic_skip_one_line_tt
			
			PER_abol_ghasem_kashani = { 
				promote_leader = yes 
				add_country_leader_role = {
					country_leader = {
						ideology = despotism
						expire = "1965.1.1.1"
						traits = {
							supreme_leader
						}
					}
				}
			}

						
			hidden_effect = {
				retire_country_leader = yes
				retire_country_leader = yes
			}
			remove_ideas = PER_constitutional_shah
			set_cosmetic_tag = PER_islamic_republic
		}
	}

	focus = { #DEMOCRATIC
		id = PER_nationalize_oil_fields
		icon = GFX_focus_PER_nationalize_oil_fields
		prerequisite = { focus = PER_expand_oil_production }
		x = -2
		y = 1
		relative_position_id = PER_expand_oil_production
		mutually_exclusive = { focus = PER_increase_oil_sales }
		cost = 10
		
		available = {
			OR = {
				has_government = democratic
				has_government = neutrality 
			}
			OR = {
				411 = { is_owned_and_controlled_by = ROOT }
				412 = { is_owned_and_controlled_by = ROOT }
				413 = { is_owned_and_controlled_by = ROOT }
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			add_war_support = 0.1
			IF = {
				limit = {
					has_idea = PER_anglo_iranian_oil_ns
				}
				remove_ideas = PER_anglo_iranian_oil_ns
			}
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_islamic_solidarity
		icon = GFX_focus_PER_islamic_solidarity
		prerequisite = { focus = PER_nationalize_oil_fields }
		x = 0
		y = 1
		relative_position_id = PER_nationalize_oil_fields
		cost = 10
		
		available = {
			#has_government = democratic
			is_subject = no
			is_in_faction = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_rule = {
				can_create_factions = yes				
			}
			create_faction = PER_islamic_faction
		}
	}

	#focus = { #DEMOCRATIC
	#	id = PER_promote_resistance_levant
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_islamic_solidarity }
	#	x = 0
	#	y = 1
	#	relative_position_id = PER_islamic_solidarity
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		custom_effect_tooltip = "TODO: decisions to stir resistance in Jordan, egypt and #Palestine"
	#	}
	#}

	focus = { #DEMOCRATIC
		id = PER_increase_oil_sales
		icon = GFX_focus_PER_increase_oil_sales
		prerequisite = { focus = PER_expand_oil_production }
		x = 2
		y = 1
		relative_position_id = PER_expand_oil_production
		mutually_exclusive = { focus = PER_nationalize_oil_fields }
		cost = 5
		
		available = {
			has_government = democratic
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			417 = {
				add_resource = {
					type = oil
					amount = 8
				}
			}
			add_tech_bonus = {
				name = PER_increase_oil_sales
				bonus = 0.5
				uses = 2
				category = synth_resources
			}
		}
	}

	focus = { 
		id = PER_request_membership_allies
		icon = GFX_focus_ARG_join_the_allies
		prerequisite = { focus = PER_increase_oil_sales }
		x = 0
		y = 1
		relative_position_id = PER_increase_oil_sales
		cost = 10
		
		available = {
			is_subject = no
			has_government = democratic
			is_in_faction = no
		}

		bypass = {
			OR = {
				is_subject = yes
				OR = {
					AND = {
						is_in_faction_with = ENG
						ENG = { 
							has_government = democratic 
							is_faction_leader = yes
						}
					}
					AND = {
						is_in_faction_with = USA
						USA = {
							has_government = democratic
							is_faction_leader = yes
						}
					}
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			IF = {
				limit = {
					ENG = {
						has_government = democratic 
						is_faction_leader = yes
					}
				}
				ENG = {
					country_event = { id = generic.2 hours = 4 }
					#custom_effect_tooltip = AFG_ideology_on_the_rise_tt
				}
				every_other_country = {
					limit = {
						is_major = yes
						NOT = {
							OR = {
								tag = ENG
								is_in_faction_with = ENG
							}
						}
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = large_decrease
					}
				}
			}
			ELSE_IF = {
				limit = {
					USA = {
						has_government = democratic 
						is_faction_leader = yes
					}
				}
				USA = {
					country_event = { id = generic.2 hours = 4 }
					#custom_effect_tooltip = AFG_ideology_on_the_rise_tt
				}
				every_other_country = {
					limit = {
						is_major = yes
						NOT = {
							OR = {
								tag = USA
								is_in_faction_with = USA
							}
						}
					}
					add_opinion_modifier = {
						target = ROOT
						modifier = large_decrease
					}
				}
			}

		}
	}

	focus = { #DEMOCRATIC
		id = PER_secure_iraq
		icon = GFX_focus_PER_secure_iraq
		prerequisite = { focus = PER_request_membership_allies }
		x = -1
		y = 1
		relative_position_id = PER_request_membership_allies
		cost = 5
		
		available = {
			has_government = democratic
			IRQ = {
				exists = yes
				NOT = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}

		bypass = {
			IRQ = {
				OR = {
					exists = no
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = IRQ
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_secure_afghanistan
		icon = GFX_focus_PER_secure_afghanistan
		prerequisite = { focus = PER_request_membership_allies }
		x = 1
		y = 1
		relative_position_id = PER_request_membership_allies
		cost = 5
		
		available = {
			has_government = democratic
			AFG = {
				exists = yes
				NOT = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}

		bypass = {
			AFG = {
				OR = {
					exists = no
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = AFG
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_post_war_spoils
		icon = GFX_focus_generic_welfare
		prerequisite = { focus = PER_secure_iraq focus = PER_secure_afghanistan }
		x = 1
		y = 1
		relative_position_id = PER_secure_iraq
		cost = 10
		
		available = {
			has_government = democratic
			OR = {
				owns_state = 415
				owns_state = 1009
				owns_state = 1008
				owns_state = 1006
				owns_state = 1005
				owns_state = 267
				owns_state = 1007
				owns_state = 676
				owns_state = 291
				owns_state = 1011
				owns_state = 675
				owns_state = 1010
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			415 = { add_core_of = ROOT }
			1009 = { add_core_of = ROOT }
			1008 = { add_core_of = ROOT }
			1006 = { add_core_of = ROOT }
			1005 = { add_core_of = ROOT }
			267 = { add_core_of = ROOT }
			1007 = { add_core_of = ROOT }
			676 = { add_core_of = ROOT }
			291 = { add_core_of = ROOT }
			1011 = { add_core_of = ROOT }
			675 = { add_core_of = ROOT }
			1010 = { add_core_of = ROOT }
		}
	}

	#focus = { #DEMOCRATIC
	#	id = PER_defend_our_sovereignty
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_nationalize_oil_fields }
	#	x = 0
	#	y = 1
	#	relative_position_id = PER_nationalize_oil_fields
	#	#mutually_exclusive = { focus = PER_compromise_with_britain }
	#	cost = 5
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		add_timed_idea = {
	#			idea = PER_eng_war_bonus
	#			days = 730
	#		}
	#		add_war_support = 0.1
#
	#	}
	#}

	#focus = { #DEMOCRATIC
	#	id = PER_concessions_from_britain
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_defend_our_sovereignty }
	#	x = 0
	#	y = 1
	#	relative_position_id = PER_defend_our_sovereignty
	#	cost = 5
	#	
	#	available = {
	#		has_war_with = ENG
	#		has_capitulated = no
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
	#		656 = { add_claim_by = ROOT } 
	#		765 = { add_claim_by = ROOT }
	#		658 = { add_claim_by = ROOT }
	#		custom_effect_tooltip = "TODO: Add event chain with UK"
	#		custom_effect_tooltip = if_they_accept_tt
	#		effect_tooltip = {
	#			IF = {
	#				limit = {
	#					OR = {
	#						444 = { OWNER = { is_subject_of = ENG } }
	#						988 = { OWNER = { is_subject_of = ENG } }
	#					}
	#				}
	#				444 = { set_demilitarized_zone = yes }
	#				988 = { set_demilitarized_zone = yes }
	#			}
	#			IF = {
	#				limit = {
	#					OR = {
	#						656 = { 
	#							OR = { 
	#								is_owned_and_controlled_by = ENG 
	#								OWNER = { is_subject_of = ENG }
	#							}
	#						}
	#						765 = { 
	#							OR = { 
	#								is_owned_and_controlled_by = ENG 
	#								OWNER = { is_subject_of = ENG }
	#							}
	#						}
	#						658 = { 
	#							OR = { 
	#								is_owned_and_controlled_by = ENG 
	#								OWNER = { is_subject_of = ENG }
	#							}
	#						}
	#					}
	#				}
	#				ENG = {
	#					every_owned_state = {
	#						limit = {
	#							OR = {
	#								state = 656
	#								state = 765
	#								state = 658
	#							}
	#						}
	#						set_state_owner_to = ROOT
	#					}
	#				}
	#			}
	#		}
	#	}
	#}

	################################
	##### COMMUNIST SUB-BRANCH #####
	################################

	focus = { #COMMUNIST
		id = PER_united_progressive_parties
		icon = GFX_focus_SWE_socialist_reforms
		#prerequisite = { focus = PER_force_abdication }
		prerequisite = { focus = PER_stage_mass_protests focus = PER_propagate_political_literature }
		mutually_exclusive = { focus = PER_rally_behind_mosaddegh focus = PER_iranian_culture }
		x = -8
		y = 1
		relative_position_id = PER_stage_mass_protests
		cost = 5
		
		available = {
			
		}

		bypass = {
			has_government = communism
		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_rally_behind_mosaddegh
					has_completed_focus = PER_iranian_culture
					has_completed_focus = PER_the_pahlavi_imperium
				}
			}
		}

        offset = {
            x = 9
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_united_progressive_parties
            }
        }

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_party_name = {
				ideology = communism
				name = PER_upp
				long_name = PER_upp_long
			}
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_communism_drift
				value = 0.03
				tooltip = communism_drift_tt
			}
			set_variable = {
				var = PER_opposition_democratic_drift
				value = 0
				tooltip = democratic_drift_tt
			}
			set_variable = {
				var = PER_opposition_fascism_drift
				value = 0
				tooltip = fascism_drift_tt
			}

			custom_effect_tooltip = generic_skip_one_line_tt
			show_unit_leaders_tooltip = PER_jafar_kavian
			show_unit_leaders_tooltip = PER_ghulam_yahya_daneshian
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #DEMOCRATIC
		id = PER_reach_to_seperatists
		icon = GFX_focus_GER_support_the_proletarian_uprising
		prerequisite = { focus = PER_united_progressive_parties }
		x = 0
		y = 1
		relative_position_id = PER_united_progressive_parties
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_reach_to_seperatists_tt
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_communism_drift
				value = 0.03
				tooltip = communism_drift_tt
			}
			hidden_effect = {
				every_owned_state = {
					limit = {
						OR = {
							is_core_of = AZR
							is_core_of = KUR
						}
					}
					set_state_flag = PER_state_supports_communists
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_strengthen_the_tudeh
		icon = GFX_focus_PER_strengthen_the_tudeh
		prerequisite = { focus = PER_reach_to_seperatists }
		x = -1
		y = 1
		relative_position_id = PER_reach_to_seperatists
		mutually_exclusive = { focus = PER_elevate_the_iran_party }
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
			set_party_name = {
				ideology = communism
				name = PER_communism_party
				long_name = PER_communism_party_long
			}

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = PER_abdolsamad_kambakhsh
		}
	}

	focus = { #COMMUNIST
		id = PER_iranian_socialist_revolution
		icon = GFX_focus_generic_workers_and_farmers_rise
		prerequisite = { focus = PER_strengthen_the_tudeh focus = PER_elevate_the_iran_party }
		x = 1
		y = 1
		relative_position_id = PER_strengthen_the_tudeh
		cost = 10
		
		available = {
			communism > 0.35
			is_subject = no
		}

		bypass = {
			has_government = communism
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			remove_dynamic_modifier = { modifier = PER_opposition_modifier }
			IF = {
				limit = {	
					communism < 0.5
				}
				start_civil_war = {
					ruling_party = communism
					ideology = neutrality #SPLITTING TAG
					size = party_popularity@neutrality
					states = all  #these will be filtered, not to worry!
					states_filter = { #only states that do not have this modifier goes to 		non-communist
						OR = {
							#state = 64
							NOT = {
								has_dynamic_modifier = {
									modifier = PER_opposition_cell
								}
								has_state_flag = PER_state_supports_communists
							}
						}	
					}
				}
				hidden_effect = {
					set_global_flag = PER_civil_war_happened
				}
				every_state = {
					limit = {
						has_dynamic_modifier = { modifier = PER_opposition_cell }
					}
					remove_dynamic_modifier = { modifier = PER_opposition_cell }
				}
			}
			ELSE = {
				set_politics = { 
					ruling_party = communism
					elections_allowed = no
				}

				hidden_effect = {
					set_country_flag = PER_civil_war_was_bypassed
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_soviet_alignment
		icon = GFX_focus_chi_mission_to_the_soviet_union
		prerequisite = { focus = PER_iranian_socialist_revolution }
		prerequisite = { focus = PER_strengthen_the_tudeh }
		x = -1
		y = 2
		relative_position_id = PER_strengthen_the_tudeh
		cost = 5
		
		available = {
			is_subject = no
			has_civil_war = no
			has_government = communism
			is_in_faction = no
		}

		bypass = {
			OR = {
				is_subject = yes
				is_in_faction = yes
				SOU = {
					NOT = {
						has_government = communism
					}
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			IF = {
				limit = {
					SOU = {
						is_faction_leader = yes
					}
				}
				SOU = {
					country_event = { id = generic.2 hours = 4 }
					#custom_effect_tooltip = AFG_ideology_on_the_rise_tt
					add_ai_strategy = { 
						type = alliance 
						id = ROOT
						value = 300
					}
				}
			}
			ELSE_IF = {
				limit = {
					SOU = {
						has_rule = can_join_factions
					}
				}
				set_rule = {
					can_create_factions = yes
				}
				create_faction = eurasian_communist_bloc
				custom_effect_tooltip = PER_soviet_alignment_tt
				hidden_effect = {
					SOU = {
						country_event = {
							id = generic.5
							hours = 12
						}
					}
				}
			}

			ELSE = {
				add_opinion_modifier = {
					target = SOU
					modifier = large_increase
				}

				SOU = {
					add_opinion_modifier = {
						target = ROOT
						modifier = large_increase
					}
				}
			}

			add_political_power = 75
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			every_other_country = {
				limit = {
					is_major = yes
					NOT = {
						OR = {
							tag = SOU
							is_in_faction_with = SOU
						}
					}
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = large_decrease
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_industrial_aid
		icon = GFX_focus_generic_communist_industry
		prerequisite = { focus = PER_soviet_alignment }
		x = -2
		y = 1
		relative_position_id = PER_soviet_alignment
		cost = 10
		
		available = {
			is_in_faction_with = SOV
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_elevate_the_iran_party
		icon = GFX_focus_PER_elevate_the_iran_party
		prerequisite = { focus = PER_reach_to_seperatists }
		x = 1
		y = 1
		relative_position_id = PER_reach_to_seperatists
		mutually_exclusive = { focus = PER_strengthen_the_tudeh }
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_party_name = {
				ideology = communism
				name = PER_communism_iran_party
				long_name = PER_communism_iran_party_long
			}
			add_political_power = 100
		}
	}

	focus = { #COMMUNIST
		id = PER_appease_the_seperatists
		icon = GFX_focus_GER_strengthen_the_proletarian_international
		prerequisite = { focus = PER_iranian_socialist_revolution }
		x = -1
		y = 2
		relative_position_id = PER_elevate_the_iran_party
		cost = 10
		
		available = {
			has_civil_war = no
			has_government = communism
			has_idea = PER_azerbaijan_resistance_idea
			has_idea = PER_kurdistan_resistance_idea
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_appease_the_seperatists_tt
			IF = {
				limit = {
					AZR = {
						exists = no
					}
					any_owned_state = {
						is_core_of = AZR
					}
				}
				release_puppet = AZR
				set_autonomy = {
					target = AZR
					autonomous_state = autonomy_satellite
					freedom_level = 0.2
				}
			}
			ELSE = {
				create_dynamic_country = {
					original_tag = AZR
					IF = {
						limit = {
							419 = { OWNER = { tag = ROOT } }
						}
						419 = {
							transfer_state_to = PREV
						}
					}
					IF = {
						limit = {
							1000 = { OWNER = { tag = ROOT } }
						}
						1000 = {
							transfer_state_to = PREV
						}
					}
					set_popularities = {
						democratic = ROOT.party_popularity_100@democratic
						neutrality = ROOT.party_popularity_100@neutrality
						fascism = ROOT.party_popularity_100@fascism
						communism = ROOT.party_popularity_100@communism
					}
					set_politics = {
						ruling_party = communism
					}
					ROOT = {
						puppet = PREV
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_satellite
							freedom_level = 0.2
						}
					}
				}
			}
			IF = {
				limit = {
					KUR = {
						exists = no
					}
					any_owned_state = {
						is_core_of = KUR
					}
				}
				release_puppet = KUR
				set_autonomy = {
					target = KUR
					autonomous_state = autonomy_satellite
					freedom_level = 0.2
				}
			}
			ELSE = {
				create_dynamic_country = {
					original_tag = KUR
					IF = {
						limit = {
							1001 = { OWNER = { tag = ROOT } }
						}
						1001 = {
							transfer_state_to = PREV
						}
					}
					IF = {
						limit = {
							421 = { OWNER = { tag = ROOT } }
						}
						421 = {
							transfer_state_to = PREV
						}
					}
					set_popularities = {
						democratic = ROOT.party_popularity_100@democratic
						neutrality = ROOT.party_popularity_100@neutrality
						fascism = ROOT.party_popularity_100@fascism
						communism = ROOT.party_popularity_100@communism
					}
					set_politics = {
						ruling_party = communism
					}
					ROOT = {
						puppet = PREV
						set_autonomy = {
							target = PREV
							autonomous_state = autonomy_satellite
							freedom_level = 0.2
						}
					}
				}
			}
			remove_ideas = PER_azerbaijan_resistance_idea
			remove_ideas = PER_kurdistan_resistance_idea
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_education_reform
		icon = GFX_focus_NOR_moscows_education_centers
		prerequisite = { focus = PER_iranian_socialism focus = PER_soviet_alignment }
		x = 0
		y = 1
		relative_position_id = PER_appease_the_seperatists
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1 
			remove_ideas = PER_islamic_traditions_ns
		}
	}

	focus = { #COMMUNIST
		id = PER_the_new_economy
		icon = GFX_goal_generic_soviet_construction
		#prerequisite = { focus = PER_workers_army }
		prerequisite = { focus = PER_communist_education_reform focus = PER_communist_propaganda focus = PER_communist_industrialization }
		x = 0
		y = 1
		relative_position_id = PER_communist_education_reform
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_MILITARY_CHARACTER
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_ideas = PER_the_new_economy_idea
		}
	}

	focus = { #COMMUNIST
		id = PER_oil_and_rubber_industry
		icon = GFX_focus_generic_rubber
		prerequisite = { focus = PER_the_new_economy }
		x = 1
		y = 1
		relative_position_id = PER_the_new_economy
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_tech = fuel_silos
					}
				}
				set_technology = { fuel_silos = 1 }
			}

			IF = {
				limit = {
					NOT = { has_tech = synth_oil_experiments }
				}
				set_technology = { synth_oil_experiments = 1 }
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
		}	
	}

	focus = { #COMMUNIST
		id = PER_workers_army
		icon = GFX_focus_SOV_builder_of_the_red_army
		prerequisite = { focus = PER_the_new_economy }
		x = -1
		y = 1
		relative_position_id = PER_the_new_economy
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_MILITARY_CHARACTER
			FOCUS_FILTER_ARMY_XP
		}

		completion_reward = {
			add_command_power = 10
			army_experience = 25
			PER_ahmad_amir_ahmadi = {
				add_trait = { trait = politically_connected }
			}
			PER_ali_akbar_derakhshani = {
				add_trait = { trait = politically_connected }
			}
			PER_jafar_kavian = {
				add_trait = { trait = politically_connected }
			}
			IF = {
				limit = {
					has_character = PER_ali_akbar_derakhshani
					PER_ali_akbar_derakhshani = {
						is_field_marshal = no
					}
				}
				custom_effect_tooltip = generic_skip_one_line_tt
				PER_ali_akbar_derakhshani = {
					promote_leader = yes
				}
			}
			IF = {
				limit = {
					has_character = PER_jafar_kavian
					PER_jafar_kavian = {
						is_field_marshal = no
					}
				}
				custom_effect_tooltip = generic_skip_one_line_tt
				PER_jafar_kavian = {
					promote_leader = yes
				}
			}
			custom_effect_tooltip = CHL_skip_one_line_tt
			IF = {
				limit = {
					has_character = PER_bahram_aryana
					has_character = PER_gholam_ali_oveissi
				}
				retire_character = PER_bahram_aryana
				retire_character = PER_gholam_ali_oveissi
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_the_peoples_airforce
		icon = GFX_focus_PER_the_peoples_airforce
		prerequisite = { focus = PER_workers_army }
		x = -1
		y = 1
		relative_position_id = PER_workers_army
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						state = 413
						state = 410
						state = 412
					}
				}

				add_building_construction = {
					type = air_base
					level = 4
					instant_build = yes
				}
			}
			air_experience = 25
			add_doctrine_cost_reduction = {
				name = PER_the_peoples_airforce
				cost_reduction = 0.75
				uses = 1
				category = air_doctrine
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_air_defense
		icon = GFX_focus_FIN_foreign_anti_air
		prerequisite = { focus = PER_the_peoples_airforce }
		x = -2
		y = 1
		relative_position_id = PER_the_peoples_airforce
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			set_technology = { interwar_antiair = 1 }
			every_owned_state = {
				limit = {
					is_fully_controlled_by = ROOT
					OR = {
						has_state_category = town
						has_state_category = large_town
						has_state_category = city
						has_state_category = large_city
						has_state_category = megalopolis
						has_state_category = metropolis
					} 
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_basic_plane_design
		icon = GFX_focus_generic_air_bases
		prerequisite = { focus = PER_the_peoples_airforce }
		x = 0
		y = 1
		relative_position_id = PER_the_peoples_airforce
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_AIR_XP
		}

		completion_reward = {
			IF = {
				limit = { has_dlc = "By Blood Alone"}
				set_technology = { iw_small_airframe = 1 }
				set_technology = { aa_lmg = 1 }
				set_technology = { early_bombs = 1 }
				air_experience = 15
			}
			ELSE = {
				add_tech_bonus = {
					name = PER_tech_share_bonus
					bonus = 0.5
					uses = 2
					category = light_air
				}
				air_experience = 25	
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_naval_bomber_design
		icon = GFX_goal_generic_air_naval_bomber
		prerequisite = { focus = PER_communist_basic_plane_design }
		x = -1
		y = 1
		relative_position_id = PER_communist_basic_plane_design
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = { air_torpedoe_1 = 1 }
				SOU = { 
					country_event = {
						id = PER_communist_events.14
						hours = 1
					}
				}
				create_soviet_iranian_joint_nav_bomber = yes
					SOU = {
						## Torpedoes
						IF = {
							limit = {
								has_tech = air_torpedoe_3
							}
							ROOT = {
								set_technology = { air_torpedoe_3 = 1 }
							}
							air_experience = 25
						}
						ELSE_IF = {
							limit = {
								has_tech = air_torpedoe_2
							}
							set_technology = { air_torpedoe_3 = 1 }
							ROOT = {
								set_technology = { air_torpedoe_1 = 1 }
								set_technology = { air_torpedoe_2 = 1 }
								set_technology = { air_torpedoe_3 = 1 }
							}
						}
						ELSE = {
							set_technology = { air_torpedoe_2 = 1 }
							ROOT = {
								set_technology = { air_torpedoe_2 = 1 }
							}
						}

						## Airframes
						IF = {
							limit = {
								has_tech = advanced_small_airframe
							}
							ROOT = {
								set_technology = { advanced_small_airframe = 1 }
							}
						}
						ELSE_IF = {
							limit = {
								has_tech = improved_small_airframe
							}
							ROOT = { set_technology = { improved_small_airframe = 1 } }

						}
					}
				#}
			}
			else = {
				set_technology = { naval_bomber1 = 1 }
				SOU = { 
					country_event = {
						id = PER_communist_events.14
						hours = 1
					}
				}
				SOU = {
					## Torpedoes
					IF = {
						limit = {
							has_tech = naval_bomber3
						}
						ROOT = {
							set_technology = { naval_bomber3 = 1 }
						}
						air_experience = 25
					}
					ELSE_IF = {
						limit = {
							has_tech = naval_bomber2
						}
						set_technology = { naval_bomber3 = 1 }
						ROOT = {
							set_technology = { naval_bomber1 = 1 }
							set_technology = { naval_bomber2 = 1 }
							set_technology = { naval_bomber3 = 1 }
						}
					}
					ELSE = {
						set_technology = { naval_bomber2 = 1 }
						ROOT = {
							set_technology = { naval_bomber2 = 1 }
						}
					}
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_challenge_the_royal_navy
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = PER_communist_basic_plane_design focus = PER_communist_naval_designs }
		x = 1
		y = 1
		relative_position_id = PER_communist_basic_plane_design
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			IF = {
				limit = {
					has_completed_focus = PER_communist_naval_bomber_design
				}
				air_experience = 50
				add_doctrine_cost_reduction = {
					name = PER_challenge_the_royal_navy
					cost_reduction = 0.75
					uses = 1
					category = air_doctrine
				}
			}
			ELSE = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = PER_challenge_the_royal_navy
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
	}


	focus = { #COMMUNIST
		id = PER_the_peoples_navy
		icon = GFX_focus_PER_the_peoples_navy
		prerequisite = { focus = PER_workers_army }
		x = 1
		y = 1
		relative_position_id = PER_workers_army
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			navy_experience = 25
			add_doctrine_cost_reduction = {
				name = PER_the_peoples_navy
				cost_reduction = 0.75
				uses = 1
				category = naval_doctrine
			}
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					naval_base > 0
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_shore_defense
		icon = GFX_focus_FIN_coastal_defense
		prerequisite = { focus = PER_the_peoples_navy }
		x = 2
		y = 1
		relative_position_id = PER_the_peoples_navy
		cost = 5
		
		available = {	
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						state = 413
						state = 410
						state = 412
						state = 1011
						state = 656
						state = 859
						state = 678
						state = 765
						state = 658
						state = 294
					}
				}
				add_building_construction = { #Persian Gulf Coast
					type = coastal_bunker
					level = 2
					instant_build = yes
					province =  {
						all_provinces = yes
						limit_to_coastal = yes
					}
				}
			} 
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_naval_designs
		icon = GFX_focus_SWE_coastal_support
		prerequisite = { focus = PER_the_peoples_navy }
		x = 0
		y = 1
		relative_position_id = PER_the_peoples_navy
		cost = 5
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			IF = {
				limit = { has_dlc = "Man the Guns" }
				add_tech_bonus = {
					name = PER_tech_share_bonus
					bonus = 0.5
					uses = 1
					category = ss_tech
				}
				set_technology = { basic_torpedo = 1 }
				navy_experience = 15
			}
			ELSE = {
				add_tech_bonus = {
					name = PER_tech_share_bonus
					bonus = 0.5
					uses = 2
					category = ss_tech
				}
				navy_experience = 25				
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_submarine_design
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = PER_communist_naval_designs }
		x = 1
		y = 1
		relative_position_id = PER_communist_naval_designs
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP
		}

		completion_reward = {
			effect_tooltip = {
				navy_experience = 25
				#IF = {
				#	limit = {
				#		has_dlc = "Man the Guns"
				#	}
				#	SOU = {
				#		IF = {
				#			limit = {
				#				has_tech = advanced_ship_hull_submarine
				#			}
				#			PREV = {
				#				set_technology = { advanced_ship_hull_submarine = 1 #}
				#			}
				#		}
				#		ELSE = {
				#			set_technology =  { improved_ship_hull_submarine = 1 }
				#		}
				#	}
				#}
				#ELSE = {
				#	SOU = {
				#		IF = {
				#			limit = {
				#				has_tech = advanced_submarine
				#			}
				#			PREV = {
				#				set_technology = { advanced_submarine = 1 }
				#			}
				#		}
				#		ELSE = {
				#			PREV = {
				#				set_technology = { improved_submarine = 1 }
				#			}
				#		}
				#	}
				#}
			}
			SOU = {
				country_event = {
					id = PER_communist_events.14
					hours = 1
				}
			}
			create_soviet_iranian_joint_submarine = yes
		}
	}

	focus = { #COMMUNIST
		id = PER_iranian_socialism
		icon = GFX_focus_SWE_refuge_for_revolutionaries
		prerequisite = { focus = PER_iranian_socialist_revolution }
		prerequisite = { focus = PER_elevate_the_iran_party }
		x = 1
		y = 2
		relative_position_id = PER_elevate_the_iran_party
		cost = 5
		
		available = {
			is_subject = no
			has_civil_war = no
			has_government = communism
		}

		bypass = {
			is_subject = yes
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_rule = {
				can_create_factions = yes				
			}
			IF = {
				limit = {
					is_in_faction = no
				}
				create_faction = PER_communist_faction
			}
			
			every_other_country = {
				limit = {
					OR = {
						tag = AFG
						tag = PAK
						tag = IRQ
						tag = KUW
						tag = SAU
						tag = OMA
						tag = YEM
					}
					NOT = {
						has_war_with = ROOT
					}
					has_government = ROOT
					is_in_faction = no
				}
				add_opinion_modifier = {
					modifier = small_increase
					target = ROOT
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_iranian_industrialization
		icon = GFX_focus_ARG_women_in_industry
		prerequisite = { focus = PER_iranian_socialism }
		x = 2
		y = 1
		relative_position_id = PER_iranian_socialism
		cost = 5
		available = {
			has_government = communism
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}
		completion_reward = {
			add_timed_idea = {
				idea = PER_communist_industrialization_idea
				days = 730
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_international_solidarity
		icon = GFX_focus_ETH_freedom_at_gunpoint
		prerequisite = { focus = PER_the_new_economy focus = PER_nationalize_oil_fields }
		x = 5
		y = 2
		relative_position_id = PER_the_new_economy
		cost = 10
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			set_rule = { can_send_volunteers = yes }
			add_ideas = PER_aid_communists_cw
			IF = {
				limit = {
					has_dlc = "La Resistance"
					has_intelligence_agency = no
					has_government = communism
				}
				create_intelligence_agency = {
					name = "Peoples Protection Bureau"
					icon = GFX_intelligence_agency_logo_generic_9
				}
			}

			IF = {
				limit = {
					has_dlc = "La Resistance"
					has_intelligence_agency = no
					has_government = democratic
				}
				create_intelligence_agency = {
					name = "SAVAK"
					icon = GFX_intelligence_agency_logo_PER_savak
				}
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_afghanistan_intervention
		icon = GFX_focus_PER_communist_afghanistan_intervention
		prerequisite = { focus = PER_international_solidarity }
		x = -1
		y = 1
		relative_position_id = PER_international_solidarity
		cost = 5
		will_lead_to_war_with = AFG
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
			AFG = {
				OR = {
					exists = no
					is_subject_of = ROOT
				}
			}
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			create_wargoal = {
				target = AFG
				type = puppet_wargoal_focus
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_liberate_pashtuns
		icon = GFX_focus_AFG_curtail_pashtunwali_primacy
		prerequisite = { focus = PER_communist_afghanistan_intervention }
		x = -1
		y = 1
		relative_position_id = PER_communist_afghanistan_intervention
		cost = 10
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
			AFG = {
				is_subject_of = ROOT
			}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			custom_effect_tooltip = PER_communist_liberate_pashtuns_tt
		}
	}


	focus = { #COMMUNIST
		id = PER_communist_destabilize_iraq
		icon = GFX_focus_generic_befriend_kurdistan
		prerequisite = { focus = PER_international_solidarity }
		x = 1
		y = 1
		relative_position_id = PER_international_solidarity
		cost = 5
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
			OR = {
				KUR = { 
					exists = yes 
					OR = {
						has_government = communism
						is_in_faction_with = ROOT
					}
				}
				676 = { is_owned_by = ROOT }
				291 = { is_owned_by = ROOT }
			}

		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_WAR_SUPPORT
		}
		completion_reward = {
			custom_effect_tooltip = PER_communist_destabilize_iraq_tt
			remove_ideas = PER_kurdistan_resistance_idea
		}
	}

	#focus = { #COMMUNIST
	#	id = PER_communist_kurdish_uprising
	#	icon = GFX_focus_PLACEHOLDER
	#	prerequisite = { focus = PER_communist_destabilize_iraq }
	#	x = 1
	#	y = 1
	#	relative_position_id = PER_communist_destabilize_iraq
	#	cost = 10
	#	
	#	available = {
	#	}
	#	bypass = {
	#	}
	#	allow_branch = {
	#	}
	#	ai_will_do = {
	#		factor = 0
	#	}
	#	search_filters = {
	#	}
	#	completion_reward = {
	#		custom_effect_tooltip = "TODO: decisions to build up and trigger a CW in Iraq for #Kurdish independence. Need events for peacing out Iraq."
	#	}
	#}

	focus = { #COMMUNIST
		id = PER_revolution_in_the_gulf
		icon = GFX_focus_focus_fra_revolution_utmost
		prerequisite = { focus = PER_communist_destabilize_iraq focus = PER_communist_afghanistan_intervention }
		x = -1
		y = 1
		relative_position_id = PER_communist_destabilize_iraq
		cost = 5
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			custom_effect_tooltip = PER_revolution_in_the_gulf_tt
		}
	}

	focus = { #COMMUNIST
		id = PER_hormuz_crisis
		icon = GFX_focus_attack_britain
		prerequisite = { focus = PER_revolution_in_the_gulf }
		x = 0
		y = 1
		relative_position_id = PER_revolution_in_the_gulf
		cost = 10
		will_lead_to_war_with = ENG
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			every_other_country = {
				limit = {
					NOT = {
						OR = {
							is_in_faction_with = ROOT
							is_subject_of = ROOT
							is_subject = yes
						}
					}

					OR = {
						any_owned_state = {
							NOT = { is_core_of = THIS }
							OR = {
							state = 656
							state = 859
							state = 678
							state = 658
							state = 1013
							state = 1014
							state = 765
							state = 294
							state = 1015
							state = 1016
							state = 659
							state = 293
							}
						}
						any_subject_country = {
							any_owned_state = {
								OR = {
									state = 656
									state = 859
									state = 678
									state = 658
									state = 1013
									state = 1014
									state = 765
									state = 294
									state = 1015
									state = 1016
									state = 659
									state = 293
								}
							}
						}
					}
				}
				country_event = {
					id = PER_communist_events.5
					hours = 8
				}
			}
			custom_effect_tooltip = PER_hormuz_crisis_tt
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_gulf_hegemony
		icon = GFX_focus_ETH_an_arabic_base
		prerequisite = { focus = PER_hormuz_crisis }
		x = 0
		y = 1
		relative_position_id = PER_hormuz_crisis
		cost = 10
		
		available = {
			is_subject = no
			#OR = {
			#	has_government = democratic
			#	has_government = communism
			#}
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_ANNEXATION
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_WAR_SUPPORT
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			#custom_effect_tooltip = "TODO: decisions or wargoals to take Saudia Arabia and Yemen. Defense bonus against major powers."
			custom_effect_tooltip = BUL_toppling_giants_wargoal_1_tt
			every_other_country = {
				limit = {
					capital_scope = {
						OR = {
							region = 28
							region = 196
							region = 238
							region = 236
							region = 237
							region = 291
						}
					}
					NOT = {
						OR = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
							is_subject_of = ROOT
						}
					}
				}
				hidden_effect = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = puppet_wargoal_focus
						}
					}
				}
			}
			add_ideas = PER_gulf_hegemony_idea
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_propaganda
		icon = GFX_focus_SWE_radiotjanst
		prerequisite = { focus = PER_iranian_socialism focus = PER_soviet_alignment }
		x = -2
		y = 1
		relative_position_id = PER_appease_the_seperatists
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			custom_effect_tooltip = PER_communist_propaganda_tt
			add_ideas = PER_iranian_radio_idea
			IF = {
				limit = { NOT = { has_tech = radio } }
				set_technology = { radio = 1 }
			}
		}
	}

	focus = { #COMMUNIST
		id = PER_communist_industrialization
		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = PER_iranian_socialism focus = PER_soviet_alignment }
		x = 2
		y = 1
		relative_position_id = PER_appease_the_seperatists
		cost = 10
		
		available = {
			has_government = communism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = PER_reject_foreign_dominance
		icon = GFX_focus_ETH_callout_to_the_world
		prerequisite = { focus = PER_communist_industrialization }
		prerequisite = { focus = PER_iranian_industrialization }
		y = 1
		x = -1
		relative_position_id = PER_iranian_industrialization
		cost = 10

		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
			add_ideas = PER_idea_reject_foreign_dominance
		}
	}

	focus = {
		id = PER_iranian_revolutionary_vanguard
		icon = GFX_focus_SOV_the_glory_of_the_red_army_communism
		prerequisite = { focus = PER_elevate_the_iran_party }
		x = 3
		y = 1
		relative_position_id = PER_elevate_the_iran_party
		cost = 5
		
		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
			hidden_effect = {
				division_template = {
					name = "Vanguard Division"
					is_locked = no
					template_counter=34
					support={
						engineer={ x=0 y=0 }
						artillery={ x=0 y=1 }
					}
					regiments={
						infantry={ x=0 y=0 }
						infantry={ x=0 y=1 }
						infantry={ x=0 y=2 }
						infantry={ x=1 y=0 }
						infantry={ x=1 y=1 }
						infantry={ x=1 y=2 }
						artillery_brigade={ x=2 y=0 }
						artillery_brigade={ x=2 y=1 }
						artillery_brigade={ x=2 y=2 }
					}
				}
			}
			custom_effect_tooltip = PER_vanguard_template_tt
			random_owned_controlled_state = {
				create_unit = {
				    division = "name = \"Vanguard\" division_template = \"Vanguard Division\" start_manpower_factor = 1"
				    owner = PER
				    count = 3
				    allow_spawning_on_enemy_provs = no
				    id = 455
				}
			}
		}
	}

	focus = {
		id = PER_one_for_all_all_for_one
		icon = GFX_focus_generic_workers
		prerequisite = { focus = PER_iranian_revolutionary_vanguard }
		x = 0
		y = 1
		relative_position_id = PER_iranian_revolutionary_vanguard
		cost = 5
		
		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
			add_ideas = PER_idea_one_for_all_all_for_one
		}
	}

	focus = {
		id = PER_land_reform
		icon = GFX_focus_generic_land_reclamation
		prerequisite = { focus = PER_industrial_aid }
		x = -2
		y = 1
		relative_position_id = PER_industrial_aid
		cost = 5
		
		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
            random_core_state = {
                limit = {
                    is_controlled_by = ROOT
                    infrastructure < 5
                }
                add_building_construction = {
                    type = infrastructure
                    level = 1
                    instant_build = yes
                } 
            }

            random_core_state = {
                limit = {
                    is_controlled_by = ROOT
                    infrastructure < 5
                }
                add_building_construction = {
                    type = infrastructure
                    level = 1
                    instant_build = yes
                } 
            }

            random_core_state = {
                limit = {
                    is_controlled_by = ROOT
                    infrastructure < 5
                }
                add_building_construction = {
                    type = infrastructure
                    level = 1
                    instant_build = yes
                } 
            }
		}
	}

	focus = {
		id = PER_soviet_iranian_oil_collaboration
		icon = GFX_focus_PER_increase_oil_sales
		prerequisite = { focus = PER_industrial_aid }
		x = 0
		y = 1
		relative_position_id = PER_industrial_aid
		cost = 5
		
		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
			PER = {
				random_owned_controlled_state = {
					prioritize = { 413 412}
					add_resource = {
						type = oil
						amount = 12
					}
				}
				random_owned_controlled_state = {
					prioritize = { 412 413}
					add_resource = {
						type = oil
						amount = 6
					}
				}
			}
			SOV = {
				random_owned_controlled_state = {
					prioritize = { 229 232}
					add_resource = {
						type = oil
						amount = 10
					}
				}
				random_owned_controlled_state = {
					prioritize = { 232 229}
					add_resource = {
						type = oil
						amount = 14
					}
				}
			}
		}
	}

	focus = {
		id = PER_comintern_research_collaboration
		icon = GFX_focus_research2
		prerequisite = { focus = PER_soviet_iranian_oil_collaboration }
		prerequisite = { focus = PER_land_reform }
		x = -1
		y = 1
		relative_position_id = PER_soviet_iranian_oil_collaboration
		cost = 5
		
		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
			add_ideas = PER_idea_comintern_research_collaboration
		}
	}

	focus = {
		id = PER_iranian_nuclear_program
		icon = GFX_focus_generic_nuclear_development
		prerequisite = { focus = PER_comintern_research_collaboration }
		x = 0
		y = 1
		relative_position_id = PER_comintern_research_collaboration
		cost = 10
		
		available = {

		}

		bypass = {

		}

		search_filters = {}

		completion_reward = {
			add_tech_bonus = {
				name = PER_iranian_nuclear_program
				bonus = 1.0
				uses = 1
				category = nuclear
			}
			add_tech_bonus = {
				name = PER_iranian_nuclear_program
				bonus = 1.0
				uses = 1
				category = rocketry
			}
			add_tech_bonus = {
				name = PER_iranian_nuclear_program
				bonus = 0.5
				uses = 2
				category = electronics
			}
		}
	}


	################################
	### 	Fascist Branch 		 ###
	################################

	focus = { #Fascism
		id = PER_iranian_culture
		icon = GFX_focus_ITA_generic_fascist_workers
		x = 10
		y = 1
		relative_position_id = PER_stage_mass_protests
		prerequisite = { focus = PER_stage_mass_protests focus = PER_propagate_political_literature }
		mutually_exclusive = { focus = PER_rally_behind_mosaddegh focus = PER_united_progressive_parties }
		cost = 5
		
		available = {
			#fascism > 0.3
		}

		bypass = {

		}

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					has_completed_focus = PER_rally_behind_mosaddegh
					has_completed_focus = PER_united_progressive_parties
					has_completed_focus = PER_the_pahlavi_imperium
				}
			}
		}
		
        offset = {
            x = -9
            y = 0
            trigger = {
                has_game_rule = {
                    rule = obsolete_focus_branches_visibility
                    option = HIDE
                }
                has_completed_focus = PER_iranian_culture
            }
        }

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			#set_party_name = {
			#	ideology = fascism
			#	name = PER_pan_iranist_party
			#	long_name = PER_pan_iranist_party_long
			#}
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_fascism_drift
				value = 0.03
				tooltip = fascism_drift_tt
			}
			set_variable = {
				var = PER_opposition_democratic_drift
				value = 0
				tooltip = democratic_drift_tt
			}
			set_variable = {
				var = PER_opposition_communism_drift
				value = 0
				tooltip = communism_drift_tt
			}
			hidden_effect = {
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

	focus = { #Fascism
		id = PER_form_sumka
		icon = GFX_focus_PER_form_sumka
		prerequisite = { focus = PER_iranian_culture }
		x = 0
		y = 1
		relative_position_id = PER_iranian_culture
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_POLITICAL_CHARACTER
		}

		completion_reward = {
			add_country_leader_role = {
			    character = PER_davud_monshizadeh
			    promote_leader = yes
			    country_leader = {
			        ideology = nazism
			        expire = "1965.1.1.1"
			    }
			}
			set_party_name = {
				ideology = fascism
				name = PER_sumka_party
				long_name = PER_sumka_party_long
			}

			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_stability_factor
				value = -0.05
				tooltip = stability_factor_tt
			}
		}
	}

	focus = { #Fascism
		id = PER_ally_the_bazaari
		icon = GFX_focus_generic_industrialists
		prerequisite = { focus = PER_form_sumka }
		x = 1
		y = 2
		relative_position_id = PER_iranian_culture
		cost = 10
		
		available = {
			has_civil_war = no
			NOT = { has_completed_focus = PER_march_on_saadabad}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_fascism_drift
				value = 0.02
				tooltip = fascism_drift_tt
			}
			add_ideas = PER_fascism_sway_the_rich_idea
		}
	}

	focus = { #Fascism
		id = PER_brown_shirts
		icon = GFX_focus_generic_fascist_troops
		prerequisite = { focus = PER_form_sumka }
		x = -1
		y = 2
		relative_position_id = PER_iranian_culture
		cost = 5
		
		available = {

		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			custom_effect_tooltip = PER_modify_opposition_tt
			add_to_variable = {
				var = PER_opposition_fascism_drift
				value = 0.02
				tooltip = fascism_drift_tt
			}
			add_to_variable = {
				var = PER_opposition_stability_factor
				value = -0.05
				tooltip = stability_factor_tt
			}
			custom_effect_tooltip = PER_brown_shirts_tt
		}
	}

	#focus = { #Fascism
	#	id = PER_german_contacts
	#	icon = GFX_focus_ger_oppose_hitler
	#	#prerequisite = { focus = PER_iranian_culture }
	#	x = -3
	#	y = 2
	#	relative_position_id = PER_iranian_culture
	#	cost = 10
	#	
	#	available = {
#
	#	}
#
	#	bypass = {
#
	#	}
#
	#	allow_branch = {
#
	#	}
#
	#	ai_will_do = {
	#		factor = 0
	#	}
#
	#	search_filters = {
#
	#	}
#
	#	completion_reward = {
#
	#	}
	#}

	focus = { #Fascism
		id = PER_march_on_saadabad
		icon = GFX_focus_PER_march_on_saadabad
		prerequisite = { focus = PER_brown_shirts focus = PER_ally_the_bazaari }
		x = 1
		y = 1
		relative_position_id = PER_brown_shirts
		cost = 5
		
		available = {
			fascism > 0.3
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_MANPOWER
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_STABILITY
		}

		completion_reward = {
			remove_dynamic_modifier = { modifier = PER_opposition_modifier }
			set_variable = {
				var = PER_total_anti_govt_size #used to calculate how big portion of the army that is NOT supporting the communists
				value = party_popularity@communism #communism support
			}
			
			add_to_variable = {
				var = PER_total_anti_govt_size
				value = party_popularity@democratic #adds democratic support to variable
			}
			
			add_to_variable = {
				var = PER_total_anti_govt_size
				value = party_popularity@neutrality #adds non-aligned support to variable
			}

			start_civil_war = {
				ruling_party = fascism
				ideology = neutrality #SPLITTING TAG
				size = 0
				army_ratio = ROOT.PER_total_anti_govt_size
				navy_ratio = ROOT.PER_total_anti_govt_size
				air_ratio = ROOT.PER_total_anti_govt_size
				states = all  
				states_filter = {
					NOT = { 
						has_dynamic_modifier = {
							modifier = PER_opposition_cell
						} 
					}
				}
				set_variable = { ROOT.PER_cw_target = THIS }
				set_country_flag = PER_loyalist_side_cw

				IF = {
					limit = {
						has_government = neutrality 
					}
					set_cosmetic_tag = PER_loyalist_iran
				}

					#limit = {
					#	is_capital = yes
					#}
			}
			set_cosmetic_tag = PER_imperial_state_of_iran
			hidden_effect = {
					set_global_flag = PER_civil_war_happened
				}


			random_other_country = {
				limit = {
					has_country_flag = PER_loyalist_side_cw
				}
				division_template = {
					name = "Vafadaran"		
					is_locked = yes
					template_counter = 3
					force_allow_recruiting = yes
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
    				    infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }
					}
					#division_cap = 0
					#override_model = PER_militia_alt_1_entity
				}
				random_controlled_state = {
					limit = {
						is_fully_controlled_by = PREV
					}

					create_unit = {
					    division = "name = \"Vafadaran\" 	division_template = \"Vafadaran\" 	start_experience_factor = 0.4 start_equipment_factor = 1"
					    owner = PREV
					    count = 10
					}
				}
			}

			division_template = {
				name = "Shorshian"		
				is_locked = yes
				template_counter = 3
				force_allow_recruiting = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
    			    infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
				#division_cap = 0
				#override_model = PER_militia_alt_1_entity
			}
			random_controlled_state = {

				create_unit = {
				    division = "name = \"Shorshian\" 	division_template = \"Shorshian\" 	start_experience_factor = 0.4 start_equipment_factor = 1"
				    owner = ROOT
				    count = 10
				}
			}
			IF = {
				limit = {
					has_completed_focus = PER_brown_shirts 
				}
				division_template = {
					name = "Brownshirt Militia"		
					is_locked = no
					template_counter = 101
					force_allow_recruiting = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
    				    militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
    				    military_police = { x = 0 y = 0 }
					}
					#division_cap = 0
					#override_model = PER_militia_alt_1_entity
				}
				random_owned_controlled_state = { 
					create_unit = {
					    division = "name = \"Brownshirt Militia\" 	division_template = \"Brownshirt Militia\" 	start_experience_factor = 0.5 start_equipment_factor = 1"
					    owner = ROOT
					    count = ROOT.PER_fascist_militia_count
					}
				}
			}
		}
	}

	focus = { #Fascism
		id = PER_roll_back_reforms
		icon = GFX_focus_ICE_state_corporatism
		prerequisite = { focus = PER_march_on_saadabad }
		x = -1
		y = 1
		relative_position_id = PER_march_on_saadabad
		cost = 5
		
		available = {
			has_civil_war = no
			has_government = fascism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_INDUSTRY
			FOCUS_FILTER_STABILITY
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			add_timed_idea = {
				idea = PER_restoring_the_nation_idea
				days = 730
			}
		}
	}

	focus = { #Fascism
		id = PER_finding_a_shah
		icon = GFX_focus_generic_monarchy_1
		prerequisite = { focus = PER_march_on_saadabad }
		prerequisite = { focus = PER_ally_the_bazaari }
		x = 1
		y = 1
		relative_position_id = PER_march_on_saadabad
		cost = 10
		
		available = {
			has_civil_war = no
			has_government = fascism
		}
		bypass = {
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_POLITICAL_CHARACTER
		}
		completion_reward = {
			custom_effect_tooltip = PER_finding_a_shah_tt
			country_event = {
				id = PER_fascist_events.1
				hours = 1
			}
		}
	}

	focus = { #Fascism
		id = PER_fascist_secularism
		icon = GFX_focus_ARG_fascist_researchers
		prerequisite = { focus = PER_roll_back_reforms focus = PER_finding_a_shah  }
		x = 3
		y = 1
		relative_position_id = PER_roll_back_reforms
		cost = 10
		
		available = {
			has_government = fascism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_RESEARCH
		}

		completion_reward = {
			add_research_slot = 1
			remove_ideas = PER_islamic_traditions_ns
			custom_effect_tooltip = newline_tt
			add_timed_idea = {
				idea = PER_lingering_islamic_beliefs
				days = 365
			}
		}
	}

	focus = { #Fascism
		id = PER_form_savama
		icon = GFX_focus_generic_secret_service_agency
		prerequisite = { focus = PER_roll_back_reforms focus = PER_finding_a_shah }
		x = -1
		y = 1
		relative_position_id = PER_roll_back_reforms
		cost = 10
		
		available = {
			has_government = fascism 
		}

		bypass = {
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				if = {
					limit = {
						has_intelligence_agency = no
					}

					create_intelligence_agency = {
						name = "Office of National Integrity"
						icon = GFX_intelligence_agency_logo_generic_1
					}
				}
				else = {
					add_stability = 0.05
				}
			}
			else = {
				if = {
					limit = {
						NOT = { has_completed_focus = PER_form_savak }
					}
					add_ideas = PER_savak_idea_no_lar
				}
				else = {
					add_stability = 0.05
				}
			}
			remove_ideas = PER_azerbaijan_resistance_idea
			remove_ideas = PER_kurdistan_resistance_idea
		}
	}

	focus = { #Fascism
		id = PER_fascist_reach_out_to_germany
		icon = GFX_focus_chi_mission_to_germany
		prerequisite = { focus = PER_form_savama }
		prerequisite = { focus = PER_pan_iranianism }
		mutually_exclusive = { focus = PER_fascist_reach_out_to_japan focus = PER_iran_first }
		x = 0
		y = 1
		relative_position_id = PER_form_savama
		cost = 5
		
		available = {
			has_government = fascism
			GER = {
				exists = yes
				has_government = fascism
				is_in_faction = yes
				is_faction_leader = yes
			}
			is_subject = no
			is_in_faction = no
		}

		bypass = {
			is_in_faction = yes
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			GER = {
				country_event = { id = generic.2 hours = 4 }
			}
		}
	}

	focus = { #Fascism
		id = PER_iran_first
		icon = GFX_focus_PER_iran_first
		prerequisite = { focus = PER_form_savama }
		prerequisite = { focus = PER_pan_iranianism }
		mutually_exclusive = { focus = PER_fascist_reach_out_to_germany focus = PER_fascist_reach_out_to_japan }
		x = 2
		y = 1
		relative_position_id = PER_form_savama
		cost = 5
		
		available = {
			has_government = fascism
		}

		bypass = {
			is_faction_leader = yes
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			set_rule = {
				can_create_factions = yes				
			}
		}
	}

	focus = { #Fascism
		id = PER_fascist_reach_out_to_japan
		icon = GFX_focus_PER_fascist_reach_out_to_japan
		prerequisite = { focus = PER_fascist_secularism }
		prerequisite = { focus = PER_pan_iranianism }
		mutually_exclusive = { focus = PER_fascist_reach_out_to_germany focus = PER_iran_first }
		x = 0
		y = 1
		relative_position_id = PER_fascist_secularism
		cost = 5
		
		available = {
			has_government = fascism
			JAP = {
				exists = yes
				has_government = fascism
				is_in_faction = yes
				is_faction_leader = yes
			}
			is_subject = no
			is_in_faction = no
		}

		bypass = {
			is_in_faction = yes
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			JAP = {
				country_event = { id = generic.2 hours = 4 }
			}
		}
	}	

	focus = { #Fascism
		id = PER_pan_iranianism
		icon = GFX_focus_PER_pan_iranianism
		prerequisite = { focus = PER_roll_back_reforms focus = PER_finding_a_shah  }
		x = 1
		y = 1
		relative_position_id = PER_roll_back_reforms
		cost = 10
		
		available = {
			has_government = fascism
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL FOCUS_FILTER_POLITICAL_CHARACTER FOCUS_FILTER_WAR_SUPPORT
		}

		completion_reward = {
			add_country_leader_trait = PER_iranian_revanchist
			229 = { add_claim_by = ROOT }
			230 = { add_claim_by = ROOT }
			231 = { add_claim_by = ROOT }
			267 = { add_claim_by = ROOT }
			291 = { add_claim_by = ROOT }
			350 = { add_claim_by = ROOT }
			352 = { add_claim_by = ROOT }
			353 = { add_claim_by = ROOT }
			415 = { add_claim_by = ROOT }
			442 = { add_claim_by = ROOT }
			444 = { add_claim_by = ROOT }
			584 = { add_claim_by = ROOT }
			676 = { add_claim_by = ROOT }
			800 = { add_claim_by = ROOT }
			830 = { add_claim_by = ROOT }
			832	 = { add_claim_by = ROOT }
			988 = { add_claim_by = ROOT }
			1005 = { add_claim_by = ROOT }
			1006 = { add_claim_by = ROOT }
			1007 = { add_claim_by = ROOT }
			1008 = { add_claim_by = ROOT }
			1009 = { add_claim_by = ROOT }
			1011 = { add_claim_by = ROOT }
			1012 = { add_claim_by = ROOT }
		}
	}

	focus = { #Fascism
		id = PER_intervene_in_central_asia
		icon = GFX_focus_attack_soviet
		prerequisite = { focus = PER_iran_first focus = PER_fascist_reach_out_to_japan focus = PER_fascist_reach_out_to_germany }
		x = 0
		y = 2
		relative_position_id = PER_iran_first
		cost = 5
		
		available = {
			is_subject = no
			has_government = fascism
			SOU = {
				exists = yes
				NOT = {is_subject_of = PER} #this will basically never happen but just in case lol
			}
		}

		bypass = {
			is_subject = yes
			SOU = {
				OR = {
					exists = no
					is_subject_of = PER
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
				target = SOU
				type = puppet_wargoal_focus
			}
		}
	}

	focus = { #Fascism
		id = PER_proclaim_greater_iran
		icon = GFX_focus_PER_proclaim_greater_iran
		prerequisite = { focus = PER_intervene_in_central_asia }
		prerequisite = { focus = PER_crush_saudi_arabia }
		prerequisite = { focus = PER_fascist_attack_afghanistan }
		x = 0
		y = 1
		relative_position_id = PER_intervene_in_central_asia
		cost = 10
		
		available = {
			has_government = fascism
			is_subject = no
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }

		completion_reward = {
			set_cosmetic_tag = PER_greater_iran
			229 = { add_core_of = ROOT }
			230 = { add_core_of = ROOT }
			231 = { add_core_of = ROOT }
			267 = { add_core_of = ROOT }
			291 = { add_core_of = ROOT }
			350 = { add_core_of = ROOT }
			352 = { add_core_of = ROOT }
			353 = { add_core_of = ROOT }
			415 = { add_core_of = ROOT }
			442 = { add_core_of = ROOT }
			444 = { add_core_of = ROOT }
			584 = { add_core_of = ROOT }
			676 = { add_core_of = ROOT }
			800 = { add_core_of = ROOT }
			830 = { add_core_of = ROOT }
			832	 = { add_core_of = ROOT }
			988 = { add_core_of = ROOT }
			1005 = { add_core_of = ROOT }
			1006 = { add_core_of = ROOT }
			1007 = { add_core_of = ROOT }
			1008 = { add_core_of = ROOT }
			1009 = { add_core_of = ROOT }
			1011 = { add_core_of = ROOT }
			1012 = { add_core_of = ROOT }
		}
	}

	focus = { #Fascism
		id = PER_eastern_expansion
		icon = GFX_focus_generic_attack_india
		prerequisite = { focus = PER_proclaim_greater_iran }
		x = 1
		y = 1
		relative_position_id = PER_proclaim_greater_iran
		cost = 5
		
		available = {
			has_government = fascism
			any_other_country = {
				exists = yes
				OR = {
					original_tag = RAJ
					original_tag = PAK
				}
				NOT = {
					OR = {
						is_in_faction_with = ROOT
						is_subject_of = ROOT
						has_war_with = ROOT
						has_war_with = ENG
					}
				}
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_ANNEXATION
		}

		completion_reward = {
			IF = {
				limit = {
					PAK = {
						exists = yes
						NOT = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
						}
					}
				}
				create_wargoal = {
					target = PAK
					type = annex_everything
				}
			}
			ELSE_IF = {
				limit = {
					RAJ = {
						exists = yes
						NOT = {
							is_in_faction_with = ROOT
							has_war_with = ROOT
						}
					}
				}
				create_wargoal = {
					target = RAJ
					type = annex_everything
				}
			}
			ELSE = {
				IF = {
					limit = {
						any_state = {
							OWNER = {
								NOT = {
									OR = {
										tag = ROOT
										is_in_faction_with = ROOT
									}
								}
							}
						}
					}
				}
			}
		}
	}

	focus = { #Fascism
		id = PER_curtail_pan_arabism
		icon = GFX_focus_ETH_an_arabic_base
		prerequisite = { focus = PER_proclaim_greater_iran }
		x = -1
		y = 1
		relative_position_id = PER_proclaim_greater_iran
		cost = 5
		available = {
			has_government = fascism
			SAU = {
				exists = yes
				NOT = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		bypass = {
		
		}
		allow_branch = {
		}
		ai_will_do = {
			factor = 0
		}
		search_filters = {
			FOCUS_FILTER_POLITICAL
		}
		completion_reward = {
			every_other_country = {
				limit = {
					exists = yes
					NOT = {
						OR = {
							is_in_faction_with = ROOT
							is_subject_of = ROOT
							has_war_with = ROOT
						}
					}
					OR = {
						tag = IRQ
						tag = SAU
						tag = KUW
						tag = YEM
						tag = OMA
						tag = UAE
						tag = QAT
						tag = PAL
						tag = SYR
						tag = JOR
						tag = LEB
						tag = EGY
					}
				}
				ROOT = {
					create_wargoal = {
						type = puppet_wargoal_focus
						target = PREV
					}
				}
			}
		}
	}

	focus = { #Fascism
		id = PER_there_can_be_only_one
		icon = GFX_focus_attack_germany
		prerequisite = { focus = PER_proclaim_greater_iran }
		x = 0
		y = 2
		relative_position_id = PER_proclaim_greater_iran
		cost = 5
		
		available = {
			has_government = fascism
			GER = {
				exists = yes
				NOT = { 
					is_puppet_of = ROOT 
					is_in_faction_with = ROOT
				}
			}
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
				target = GER
				type = puppet_wargoal_focus
			}
		}
	}

	focus = { #Fascism
		id = PER_fascist_attack_turkey
		icon = GFX_focus_generic_attack_turkey
		prerequisite = { focus = PER_fascist_reach_out_to_germany focus = PER_fascist_reach_out_to_japan focus = PER_iran_first }
		x = -1
		y = 1
		relative_position_id = PER_fascist_reach_out_to_germany
		cost = 5
		
		available = {
			has_government = fascism
			TUR = {
				exists = yes
				NOT = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}

		bypass = {
			TUR = { 
				OR = { 
					exists = no 
					is_in_faction_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = TUR
			}
		}
	}

	focus = { #Fascism
		id = PER_intervention_in_iraq
		icon = GFX_focus_generic_attack_iraq
		prerequisite = { focus = PER_fascist_reach_out_to_germany focus = PER_fascist_reach_out_to_japan focus = PER_iran_first }
		x = 1
		y = 1
		relative_position_id = PER_fascist_reach_out_to_japan
		cost = 5
		
		available = {
			has_government = fascism
			IRQ = {
				exists = yes
				NOT = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}

		bypass = {
			IRQ = { 
				OR = { 
					exists = no 
					is_in_faction_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = { FOCUS_FILTER_ANNEXATION FOCUS_FILTER_POLITICAL }

		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = IRQ
			}
		}
	}

	focus = { #Fascism
		id = PER_crush_saudi_arabia
		icon = GFX_focus_AUS_raid_military_storages
		prerequisite = { focus = PER_fascist_attack_turkey }
		x = 0
		y = 1
		relative_position_id = PER_fascist_attack_turkey
		cost = 10
		
		available = {
			has_government = fascism
			any_controlled_state = {
				NOT = { 
					OR = {
						is_core_of = ROOT 
						is_owned_by = ROOT
					}
				}
			}
			has_equipment = { train_equipment > 9 }
		}

		bypass = {

		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
			FOCUS_FILTER_INDUSTRY
		}

		completion_reward = {
			IF = {
				limit = {
					NOT = { has_idea = war_economy }
					NOT = { has_idea = tot_economic_mobilisation }
				}
				add_ideas = war_economy        
			}
			ELSE = {
			    add_political_power = 150
			}            
			random_core_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
						}

					is_owned_and_controlled_by = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = { #Fascism
		id = PER_fascist_attack_afghanistan
		icon = GFX_focus_generic_attack_afghanistan
		prerequisite = { focus = PER_intervention_in_iraq }
		x = 0
		y = 1
		relative_position_id = PER_intervention_in_iraq
		cost = 5
		
		available = {
			has_government = fascism
			AFG = {
				exists = yes
				NOT = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}

		bypass = {
			AFG = { 
				OR = { 
					exists = no 
					is_in_faction_with = ROOT
				}
			}
		}

		allow_branch = {

		}

		ai_will_do = {
			factor = 0
		}

		search_filters = {
			FOCUS_FILTER_POLITICAL
		}

		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = AFG
			}
		}
	}
}